*GitHub Repository "kazuto41215/frontend-starter-tenk-dao"*

'''--- .github/workflows/deploy.yml ---
name: Build and Deploy
on:
  push:
    branches:
      - main
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v2.3.1 # If you're using actions/checkout@v2 you must set persist-credentials to false in most cases for the deployment to work correctly.
        with:
          persist-credentials: false
      - uses: FedericoCarboni/setup-ffmpeg@v1
        id: setup-ffmpeg
      - name: Install and Build üîß # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.
        run: |
          yarn install --frozen-lockfile
          yarn build
        env:
          PREFIX_PATHS: true
      - name: Deploy üöÄ
        uses: JamesIves/github-pages-deploy-action@3.7.1
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          BRANCH: gh-pages # The branch the action should deploy to.
          FOLDER: public # The folder the action should deploy.

'''
'''--- .graphqlrc.yml ---
# Used by https://marketplace.visualstudio.com/items?itemName=GraphQL.vscode-graphql
schemaPath: "schema.graphql"
extensions:
  endpoints:
    default:
      url: "http://localhost:8000/___graphql"

'''
'''--- .vscode/extensions.json ---
{
	// See https://go.microsoft.com/fwlink/?LinkId=827846 to learn about workspace recommendations.
	// Extension identifier format: ${publisher}.${name}. Example: vscode.csharp
	// List of extensions which should be recommended for users of this workspace.
	"recommendations": [
		"GraphQL.vscode-graphql",
		"syler.sass-indented"
	],
	// List of extensions recommended by VS Code that should not be recommended for users of this workspace.
	"unwantedRecommendations": []
}
'''
'''--- README.md ---
# TenK NFT Launch Landing Page Template

Welcome to your new TenK NFT Launch Landing Page! This codebase gives you everything you need to make a simple-but-powerful landing page for your NFT project with near-zero custom code. Out-of-the-box, you get:

* Super fast page loads using a Static Site Generator called [Gatsby].
* Internationalization: offer your website in multiple languages for the global NFT market. If you need help translating your page, contact [the TenK team][TenK].
* Good SEO and social media sharing support.
* Simple customization via the handful of files in the [`config`](./config/) folder.

If you need even more customization, you can rest easy knowing that the whole site uses fully-typed TypeScript and a well-considered React architecture with few extensions or add-ons.

  [Gatsby]: https://www.gatsbyjs.com
  [TenK]: https://tenkbay.com/

# Run it

To run this site locally, you will need [NodeJS] and [Yarn] installed. Then, change into the project directory using your command line and:

* `yarn install`
* `yarn start` (New to NodeJS? This runs the "start" script listed in the "scripts" section of the [package.json](./package.json) file.)

Go ahead and do some stretching while that starts; it takes a while.

# Tweak it

Install [Virtual Studio Code][VSCode] (often called VS Code) if you don't have it already. Then open this project folder with it. This project includes a `.vscode` folder which will recommend extensions to improve your experience. Install them!

You only need to edit files in the [`config`](./config/) folder:

* `colors.scss`: This is a [Sass] file used by the site to customize your colors. If you install the recommended Sass extension for VS Code, you will see color squares next to each value.
* `settings.json`: This contains non-internationalized data for your site, including the address of your smart contract.
* `images/`: The images in this folder are referenced later by your internationalization data.
* `i18n/`: Your internationalization data! (There are 18 letters between the "i" and "n" in "internationalization".) There's a JSON file for each language you want to include. These will become routes on your site: `example.com/en`, `example.com/es`, etc. JSON is a finicky specification, throwing errors if you forget quotes or include trailing commas. VS Code will yell at you about these problems, which saves you from needing to restart your Gatsby server to notice them. And yes, when you make changes to these files, you'll need to restart your development Gatsby server to see them. For more info about the shape of these files, see the readme [in the `i18n` folder](./config/i18n/).

Make changes, commit them to git, and push. The included [GitHub Action] will [automatically deploy your pushed changes to GitHub Pages](./.github/workflows/deploy.yml). If you want to deploy somewhere else, you can! Static sites contain nothing but HTML, CSS, and JavaScript, making them the easiest sites to deploy. You could host these files on [IPFS], an AWS S3 bucket, or on many other hosting providers. You could automate deploys to one of these other networks/platforms by customizing the [`deploy.yml`](./.github/workflows/deploy.yml) GitHub Action. There are many GitHub Actions available to help you on [GitHub's marketplace](https://github.com/marketplace?category=deployment&type=actions).

  [NodeJS]: https://nodejs.dev/learn/how-to-install-nodejs
  [Yarn]: https://yarnpkg.com/
  [VSCode]: https://code.visualstudio.com/
  [Sass]: https://sass-lang.com/
  [IPFS]: https://ipfs.io/
  [GitHub Action]: https://github.com/features/actions

# Grok it

Start by understanding the Gatsby files:

* [`gatsby-config.js`](./gatsby-config.js) bootstraps TypeScript for Gatsby
* [`gatsby-config.ts`](./gatsby-config.ts) contains the main configuration for Gatsby, including a hefty stack of [plugins](https://www.gatsbyjs.com/plugins)
* [`gatsby-node.ts`](./gatsby-node.ts) is a NodeJS script run by Gatsby at build time (when you run `yarn build`, which happens automatically during the deploy GitHub Action) or when you first start your development server (with `yarn start`).

This last one is interesting. Reading through it, you'll see that it creates a new page for each JSON file in `config/i18n`. It grabs these files using a `locales` utility located at [`lib/locales`](./lib/locales/index.ts) (you can option-click the import line in VS Code to open the imported file directly) and renders them using a React file at [`src/templates/[locale].tsx`](./src/templates/[locale].tsx). Let's understand each of these next:

* [`lib/locales`](./lib/locales/index.ts): the main export here is down at the bottom: `export const locales`. Everything above that is TypeScript stuff and data validation. This data validation will ensure that each locale is well-formatted with only expected fields. This is great! This means that you can edit your internationalization data confidently, knowing that it will be verified at build time, way before you have a chance to deploy a broken site and have users report bugs.
* [`src/templates/[locale].tsx`](./src/templates/[locale].tsx): The filename here is not special, it's just a naming convention borrowed from NextJS, a competitor to Gatsby. (Square brackets are valid in filenames!) It is a React [JSX](https://reactjs.org/docs/introducing-jsx.html) file that uses TypeScript, hence the `.tsx` extension. As we already saw, this is the file that will be used by `gatsby-node.ts` to create each of the main routes in your page: `/en`, `/es`, etc.

The contents of this last file almost look too simple! The import statements take up about as many lines as the main export. At this point you're about ready to go explore the code directly, option-clicking into various files to figure out what they do. Before you do, it's worth knowing about just a few more interesting bits:

* [`src/near`](./src/near/) contains NEAR bootstrapping logic and a TypeScript wrapper around the TenK smart contract. This is amazing! This means you can use TypeScript-powered type-ahead to see what methods are available on your contract as you write your frontend code. If you want to test certain UI states that rely on certain data being returned from your contract, you can return spoof data in `src/near/contracts/tenk.ts` (just remember to change it back without committing it to git!)
* [`src/hooks/useTenk.ts`](./src/hooks/useTenk.ts) contains a [custom React hook](https://reactjs.org/docs/hooks-custom.html) that makes RPC calls to your TenK smart contract once at page load. All React components that use this hook then make use of this data, without requiring new RPC calls.
* [`src/hooks/useLocales.ts`](./src/hooks/useLocales.ts) is another custom hook that wraps the complex Gatsby logic needed to use your internationalization data in files outside of `[locale].tsx`. Gatsby forces all data, even simple JSON files, through a Rube Goldberg-like GraphQL pipeline ([GraphQL](https://graphql.org/) is great; Gatsby's overuse of it is tiring). Luckily, this project has automatic TypeScript typing on these GraphQL queries, improving the situation slightly. Note that the locales returned by `useLocales` differ slightly from the ones passed to `[locale].tsx`: they **do not contain `hero` or `extraSections` fields**. (This is due to a limitation of the `gatsby-transformer-json` plugin, which expects all JSON files to have exactly matching fields, while the locale format used by this project is more flexible.)
* [`src/pages/index.tsx`](./src/pages/index.tsx) is the index page of the site. You'll see that it just lists all available locales, and then uses the [`useEffect` React hook](https://reactjs.org/docs/hooks-effect.html) to automatically redirect users to their current locale, if found.
'''
'''--- config/i18n/README.md ---
# Internationalize your site

This folder contains a JSON file for each locale you want to include. Add a new one and it will automatically be incorporated into your site next time you build/deploy or restart your development server.

At build time (when you run `yarn build` as during a deploy, or when you restart your `yarn start` development server) the data in these files will be validated. This means you can be confident that you included all necessary fields, didn't misspell optional fields, and that every possible `hero` variant is well-formed. (The data validation does not and cannot validate that you included reasonable translations in each file, though!)

# About that hero

The most important part of your site is the hero section. This is the above-the-fold, right-at-the-top part that people see first.

This site is designed so that everything important happens here. Before your NFT launch, it tells people when the launch will happen and encourages them to add it to their calendars. During the launch, it's where they buy NFTs. Afterwards, the hero section links to the secondary market on [Paras](https://paras.id/).

In the example files contained here, you'll see that the `hero` i18n data is designed to be as compact as possible, minimizing duplication and thus your chance to make mistakes. Let's look at an example:

```js
"hero": {
  "backgroundImage": "hero-bg.svg",
  "image": "hero.png",
  "title": "The first fleet of the  \n*Metaverse*",
  "body": "Join an Exclusive Community of NEAR early adopters and BUIDLers.",
  "ps": "Misfits drop at SALE_START!",
  "cta": "Add to Calendar",
  "action": "ADD_TO_CALENDAR(SALE_START)",
  "saleClosed": {
    "signedIn": {
      "ps": "* Minting starts at: SALE_START\n\n* Pre-mint starts at: PRESALE_START\n\nGet in on the pre-mint! [Join our Discord](https://discord.com/invite/UY9Xf2k) and request an invite."
    },
    "vip": {
      "ps": "Welcome, CURRENT_USER! Pre-mint starts at PRESALE_START",
      "action": "ADD_TO_CALENDAR(PRESALE_START)"
    }
  },
  "presale": {
    "vip": {
      "ps": "Welcome, CURRENT_USER! Pre-mint started. Public minting starts at SALE_START.\n\nYour remaining pre-mint allowance: MINT_LIMIT",
      "cta": "Mint One!",
      "action": "MINT_ONE"
    }
  },
  "saleOpen": {
    "ps": "Misfit Minting Has Begun!",
    "cta": "Mint One!",
    "action": "MINT_ONE",
    "signedOut": {
      "action": "SIGN_IN"
    }
  },
  "allSold": {
    "title": "All INITIAL_COUNT minted!",
    "body": "The Misfits have all been created",
    "ps": "",
    "cta": "Buy Pre-Owned",
    "action": "GO_TO_PARAS"
  }
}
```

As you may have guessed, a more specific setting will override a more general one. So here, before the sale has started (`saleClosed`):

* Someone who is signed out will see the `ps` included in the root: "Misfits drop at SALE_START!"
* While someone who is signed in will see both the sale start time and the presale start time, with a link to the project's Discord to become a VIP
* And someone who is already a VIP will see only the presale start time, and their Call To Action button (CTA) will add the presale time to their calendar, rather than the sale time.

And then, after the public sale has started (`saleOpen`), almost everyone sees the same thing. "Minting has begun! Mint One!" The only exception here is that people who are not yet signed in will get signed in, when they click the Mint One button, rather than immediately minting one.

The `image` and `backgroundImage` values need to have corresponding images in [`config/images`](../images/).

The list of valid `action`s is given by the keys of `const actions` in [`lib/locales/runtimeUtils.ts`](../../lib/locales/runtimeUtils.ts), and the list of valid placeholder strings like `CURRENT_USER` and `SALE_START` is given by the keys of `const replacers` in the same file. If you use an invalid action, the data will not validate and your build will fail, so you're protected from deploying a broken site. If you use an invalid placeholder string, you will only see a warning at build time, but the site will still build! This is because it's impossible to know at build time if you purposely included UPPERCASE_TEXT_WITH_UNDERSCORES_IN_BETWEEN. Maybe this is a stylistic choice that your NFT project made on purpose! So remember to double-check those warnings during `yarn start`. And...

# Test your hero variants

When you're ready to test your hero variants, start your development server, load your site, and then manually add `?hero=0` to the end of the URL in your browser. This will add a banner to the site showing what settings you're testing (`saleClosed` and `signedOut`), and allow you to quickly click through all twelve variants.

Note that this hidden testing feature is included in your deployed site as well. This makes it easier to collaborate with your larger team of copywriters and translators. You can send these non-technical teammates URLs to your deployed site like `example.com/zh?hero=0` and have them click through and check that everything looks good, without them needing to run the site on their own computers.
'''
'''--- config/i18n/en.json ---
{
  "viewIn": "View in English",
  "langPicker": "English",
  "title": "Misfits",
  "description": "NEAR's first PFP-style NFTs",
  "calendarEvent": "Go Mint a Misfit!",
  "connectWallet": "Connect Wallet",
  "signOut": "Sign Out",
  "myNFTs": "My NFTs",
  "nextNFT": "Next NFT",
  "prevNFT": "Previous NFT",
  "close": "Close",
  "zoomIn": "Zoom In",
  "zoomOut": "Zoom Out",
  "hero": {
    "video": "pexels-olya-kobruseva-5236593.mp4",
    "title": "The first fleet of the  \n*Metaverse*",
    "body": "Join an Exclusive Community of NEAR early adopters and BUIDLers.",
    "ps": "Misfits drop at SALE_START!",
    "cta": "Add to Calendar",
    "action": "ADD_TO_CALENDAR(SALE_START)",
    "saleClosed": {
      "signedIn": {
        "ps": "* Minting starts at: SALE_START\n\n* Pre-mint starts at: PRESALE_START\n\nGet in on the pre-mint! [Join our Discord](https://discord.com/invite/UY9Xf2k) and request an invite."
      },
      "vip": {
        "ps": "Welcome, CURRENT_USER! Pre-mint starts at PRESALE_START",
        "action": "ADD_TO_CALENDAR(PRESALE_START)"
      }
    },
    "presale": {
      "vip": {
        "ps": "Welcome, CURRENT_USER! Pre-mint started. Public minting starts at SALE_START.\n\nYour remaining pre-mint allowance: MINT_LIMIT",
        "setNumber": "Number to mint",
        "cta": "Mint for MINT_PRICE",
        "action": "MINT"
      }
    },
    "saleOpen": {
      "ps": "Misfit Minting Has Begun! Misfits remaining: REMAINING_COUNT",
      "setNumber": "Number to mint",
      "cta": "Mint for MINT_PRICE",
      "action": "MINT",
      "signedOut": {
        "action": "SIGN_IN"
      }
    },
    "allSold": {
      "title": "All INITIAL_COUNT minted!",
      "body": "The Misfits have all been created",
      "ps": "",
      "cta": "Buy Pre-Owned",
      "action": "GO_TO_PARAS"
    }
  },
  "extraSections": [
    {
      "text": "# Introducing\n# NEAR Misfits (Gen 0)\n\n10,000 brave souls set out into the vast unknown to explore the Metaverse... Only 1,923 survived.\n\nThese Misfits are part of a Decentralised Special Operations crew from all over the world and all walks of life. A group of humans rising to the challenge of their times, coming together to build the Metaverse: challenge the status quo, push the boundaries of what is possible, build and contribute to enabling technology.",
      "image": "learn.webp"
    }
  ]
}
'''
'''--- config/i18n/es.json ---
{
  "viewIn": "Ver en Espa√±ol",
  "langPicker": "Espa√±ol",
  "title": "Misfitos",
  "description": "Los primeros NFTs de tipo \"PFP\" de NEAR",
  "calendarEvent": "¬°Crear un Misfito!",
  "connectWallet": "Connectar Billeta",
  "signOut": "Desconectar",
  "myNFTs": "Mi NFTs",
  "nextNFT": "Siguiente NFT",
  "prevNFT": "Anterior NFT",
  "close": "Cerrar",
  "zoomIn": "Dar un golpe de zoom",
  "zoomOut": "Disminuir el zoom",
  "hero": {
    "video": "pexels-olya-kobruseva-5236593.mp4",
    "title": "El primero fleeto de la  \n*Metaverse*",
    "body": "Joino un exclusivo comunidad de NEAR early adopters and BUIDLers.",
    "ps": "¬°Puedes crear tu primero a las SALE_START!",
    "cta": "A√±adir a Calendario",
    "action": "ADD_TO_CALENDAR(SALE_START)",
    "saleClosed": {
      "signedIn": {
        "ps": "* Crear tu primero: SALE_START\n\n* Si est√°s en el listo \"VIP\": PRESALE_START\n\nQuedate un/a VIP! [Joino nuestro Discord](https://discord.com/invite/UY9Xf2k)."
      },
      "vip": {
        "ps": "¬°Bienvenid@, CURRENT_USER! Puedes crear un Misfito a las PRESALE_START",
        "action": "ADD_TO_CALENDAR(PRESALE_START)"
      }
    },
    "presale": {
      "vip": {
        "ps": "¬°Bienvenid@, CURRENT_USER! Los VIPs puedes mint ahora. El mint publico empezar a las SALE_START.\n\nTu VIP asignaci√≥n restante: MINT_LIMIT",
        "setNumber": "Crear quantidad de",
        "cta": "Crear para MINT_PRICE",
        "action": "MINT"
      }
    },
    "saleOpen": {
      "ps": "Misfit Minting Has Begin! Misfitos que quedan: REMAINING_COUNT",
      "setNumber": "Crear quantidad de",
      "cta": "Crear para MINT_PRICE",
      "action": "MINT",
      "signedOut": {
        "action": "SIGN_IN"
      }
    },
    "allSold": {
      "title": "¬°Todos INITIAL_COUNT han estado creado!",
      "body": "",
      "ps": "",
      "cta": "Buy Pre-Owned",
      "action": "GO_TO_PARAS"
    }
  },
  "extraSections": [
    {
      "text": "# Introducing\n# NEAR Misfits (Gen 0)\n\n10,000 brave souls set out into the vast unknown to explore the Metaverse... Only 1,923 survived.\n\nThese Misfits are part of a Decentralised Special Operations crew from all over the world and all walks of life. A group of humans rising to the challenge of their times, coming together to build the Metaverse: challenge the status quo, push the boundaries of what is possible, build and contribute to enabling technology.",
      "image": "learn.webp"
    }
  ]
}
'''
'''--- config/i18n/zh.json ---
{
  "viewIn": "‰∏≠ÊñáÊü•Áúã",
  "langPicker": "‰∏≠Êñá",
  "title": "Misfits",
  "description": "NEARÁîüÊÄÅ‰∏äÈ¶ñ‰∏™Â§¥ÂÉèÁ±ªNFT",
  "calendarEvent": "Á´ãÂç≥Èì∏ÈÄ†!",
  "connectWallet": "ÈìæÊé•Èí±ÂåÖ",
  "signOut": "ÁôªÂá∫",
  "myNFTs": "ÊàëÁöÑNFT",
  "nextNFT": "‰∏ã‰∏Ä‰∏™NFT",
  "prevNFT": "‰∏ä‰∏Ä‰∏™NFT",
  "close": "ÂÖ≥Èó≠",
  "zoomIn": "ÊîæÂ§ß",
  "zoomOut": "Áº©Â∞è",
  "hero": {
    "video": "pexels-olya-kobruseva-5236593.mp4",
    "title": "Á¨¨‰∏ÄËà∞ÈòüÂêØËà™ \n*ÂÖÉÂÆáÂÆô*",
    "body": "Âä†ÂÖ• NEAR Êó©ÊúüÁôªÂΩïËÄÖÂíå BUILDers ÁöÑÁã¨ÂÆ∂Á§æÂå∫.",
    "ps": "Misfits È¶ñÂèëÊó•Êúü SALE_START!",
    "cta": "Ê∑ªÂä†Âà∞Êó•ÂéÜ",
    "action": "ADD_TO_CALENDAR(SALE_START)",
    "saleClosed": {
      "signedIn": {
        "ps": "* È¶ñÂèëÂçï‰ª∑: SALE_START\n\n* È¢ÑÂîÆÂçï‰ª∑: PRESALE_START\n\nÂä†ÂÖ•È¢ÑÂîÆ! [Âä†ÂÖ•Á§æÂå∫ Discord](https://discord.com/invite/UY9Xf2k) ÂèÇ‰∏éÁôΩÂêçÂçïÊ¥ªÂä®"
      },
      "vip": {
        "ps": "Ê¨¢Ëøé, CURRENT_USER! È¢ÑÂîÆÂçï‰ª∑Ôºö PRESALE_START",
        "action": "ADD_TO_CALENDAR(PRESALE_START)"
      }
    },
    "presale": {
      "vip": {
        "ps": "Ê¨¢Ëøé, CURRENT_USER! ÁôΩÂêçÂçïÈ¢ÑÂîÆÊ≠£Âú®ËøõË°å‰∏≠. ÂÖ¨ÂºÄÈîÄÂîÆÊó∂Èó¥‰∏∫ SALE_START.\n\n Ââ©‰ΩôË¥≠‰π∞È¢ùÂ∫¶: MINT_LIMIT",
        "setNumber": "Ë¥≠‰π∞Êï∞Èáè",
        "cta": "ÊîØ‰ªòÈáëÈ¢ù: MINT_PRICE",
        "action": "MINT"
      }
    },
    "saleOpen": {
      "ps": "Misfit ÂÖ¨ÂºÄÈîÄÂîÆÂ∑≤ÂêØÂä®!",
      "setNumber": "Ë¥≠‰π∞Êï∞Èáè",
      "cta": "ÊîØ‰ªòÈáëÈ¢ù: MINT_PRICE",
      "action": "MINT",
      "signedOut": {
        "action": "SIGN_IN"
      }
    },
    "allSold": {
      "title": "All INITIAL_COUNT ÂîÆÁΩÑ!",
      "body": "The Misfits Â∑≤ÁªèÂÖ®ÈÉ®ÂîÆÁΩÑ",
      "ps": "",
      "cta": "Âéª‰∫åÁ∫ßÂ∏ÇÂú∫ÈÄõÈÄõ",
      "action": "GO_TO_PARAS"
    }
  },
  "extraSections": [
    {
      "text": "# È°πÁõÆÊ¶ÇÂÜµ NEAR Misfits (Gen 0)\n\n10,000 ÂãáÊï¢ÁöÑÊàòÂ£´Âá∫ÂèëÂà∞ÂπøÈòîÁöÑÊú™Áü•‰∏ñÁïåÂéªÊé¢Á¥¢ÂÖÉÂÆáÂÆô... ‰ªÖÊúâ1,923ÂêçÂπ∏Â≠òËÄÖ.\n\nËøô‰∫õ‰∏çÁß∞ËÅåÁöÑ‰∫∫ÊòØÊù•Ëá™‰∏ñÁïåÂêÑÂú∞ÂíåÂêÑË°åÂêÑ‰∏öÁöÑÂéª‰∏≠ÂøÉÂåñÁâπÁßç‰ΩúÊàò‰∫∫ÂëòÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ ‰∏ÄÁæ§ËøéÊé•Êó∂‰ª£ÊåëÊàòÁöÑ‰∫∫Á±ªÔºåÈΩêÂøÉÂçèÂäõÊâìÈÄ†ÂÖÉÂÆáÂÆôÔºöÊåëÊàòÁé∞Áä∂ÔºåÁ™ÅÁ†¥ÂèØËÉΩÁöÑÁïåÈôêÔºåÊûÑÂª∫Âπ∂‰∏∫‰ΩøËÉΩÊäÄÊúØÂÅöÂá∫Ë¥°ÁåÆ„ÄÇ",
      "image": "learn.webp"
    }
  ]
}
'''
'''--- config/images/discord.svg ---
<svg width="24" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Discord</title>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.9223 12.0706C15.9223 12.8456 15.3051 13.4809 14.5234 13.4809C14.252 13.4809 13.9976 13.4016 13.7822 13.2647C13.6276 13.1664 13.493 13.0385 13.3866 12.889C13.2215 12.6576 13.1239 12.3744 13.1239 12.0695C13.1239 11.2945 13.741 10.6592 14.5227 10.6592C15.0137 10.6592 15.4397 10.9097 15.6887 11.2881C15.8366 11.5125 15.9223 11.7818 15.9223 12.0706ZM24 2.61741V25.4118C23.4504 24.9618 23.0162 24.6071 22.6585 24.3149C21.9655 23.7488 21.5592 23.4169 21.1566 23.0806C20.5861 22.6042 20.023 22.1189 18.6621 20.9462C18.362 20.6875 18.023 20.3954 17.6366 20.0626L18.3634 22.4132H2.81143C1.26171 22.4132 0 21.2442 0 19.7958V2.61741C0 1.16894 1.26171 0 2.81143 0H21.1886C22.7383 0 24 1.16894 24 2.61741ZM14.9897 15.5647C16.7718 15.0984 17.4609 14.0695 17.4719 14.0529C16.9097 14.3959 16.3749 14.6373 15.895 14.8024C12.9402 15.9522 9.65206 15.5587 7.33724 14.3577C7.3305 14.3535 7.30587 14.3404 7.26956 14.3211C7.21272 14.2908 7.12725 14.2453 7.03688 14.195C6.94658 14.1447 6.85138 14.0896 6.77496 14.0401C6.77496 14.0401 7.05676 14.4752 7.73944 14.9113C8.10015 15.1417 8.57277 15.3724 9.17486 15.5393L9.17483 15.5393L9.17496 15.5394C8.76353 16.0222 8.2561 16.5939 8.2561 16.5939C6.89751 16.5541 5.91644 16.1619 5.24742 15.7413C4.42387 15.2235 4.07314 14.6626 4.07314 14.6626C4.07314 10.5713 6.048 7.25506 6.048 7.25506C8.02286 5.88282 9.90171 5.92094 9.90171 5.92094L9.90177 5.921L9.90181 5.921L10.039 6.07347C7.59374 6.72793 6.45376 7.71899 6.43241 7.73768C6.44487 7.7314 6.74446 7.58084 7.24114 7.36941C10.4012 6.08339 14.228 6.08369 17.4857 7.73788C17.4857 7.73788 17.418 7.67832 17.28 7.57866C17.0512 7.41343 16.6292 7.13796 16.0023 6.84093C15.4948 6.6005 14.8531 6.34596 14.071 6.1243L14.071 6.12427L14.0709 6.12424L14.2629 5.92094C14.2629 5.92094 15.5032 5.89578 17.0276 6.62238C17.3794 6.79005 17.7463 6.99776 18.1166 7.25506L18.1167 7.25512C18.1167 7.25512 20.0915 10.5714 20.0915 14.6627C20.0915 14.6627 18.9258 16.505 15.895 16.5939L15.8949 16.5939L15.8949 16.5939C15.8949 16.5939 15.4011 16.0475 14.9897 15.5647ZM8.11816 12.0695C8.11816 11.2945 8.73531 10.6592 9.51702 10.6592C10.2987 10.6592 10.9296 11.2945 10.9159 12.0695C10.9159 12.8446 10.2987 13.4799 9.51702 13.4799C8.74902 13.4799 8.11816 12.8446 8.11816 12.0695Z" fill="var(--fg, gray)"></path>
</svg>
'''
'''--- config/images/twitter.svg ---
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Twitter</title>
  <path d="M21.533 7.1119C21.5482 7.32509 21.5482 7.53832 21.5482 7.75151C21.5482 14.254 16.599 21.7464 7.5533 21.7464C4.76648 21.7464 2.17767 20.9393 0 19.5383C0.395953 19.584 0.776625 19.5992 1.18781 19.5992C3.48727 19.5992 5.60405 18.8226 7.29441 17.4977C5.13197 17.452 3.31978 16.0358 2.69541 14.0865C3 14.1322 3.30455 14.1627 3.62437 14.1627C4.06598 14.1627 4.50764 14.1017 4.91878 13.9952C2.66498 13.5383 0.974578 11.5586 0.974578 9.16775V9.10686C1.62937 9.47234 2.39086 9.70076 3.19791 9.73118C1.87303 8.84792 1.00505 7.34032 1.00505 5.63473C1.00505 4.72104 1.24866 3.88348 1.67508 3.15251C4.09641 6.13728 7.73602 8.08648 11.8172 8.29972C11.7411 7.93423 11.6954 7.55356 11.6954 7.17284C11.6954 4.46215 13.8883 2.25406 16.6141 2.25406C18.0304 2.25406 19.3095 2.84797 20.208 3.80736C21.3197 3.59417 22.3857 3.18298 23.3299 2.61954C22.9643 3.7617 22.1877 4.72109 21.1674 5.33018C22.1573 5.22364 23.1167 4.94947 23.9999 4.56879C23.33 5.54337 22.4924 6.41136 21.533 7.1119Z" fill="var(--fg, gray)"></path>
</svg>
'''
'''--- config/settings.json ---
{
  "author": "@TenKBay",
  "siteUrl": "https://tenkbay.com",
  "contractName": "mint_rate_limit.tenk.testnet",
  "social": [
    {
      "href": "https://discord.com/invite/UY9Xf2k",
      "img":  "discord.svg",
      "alt": "Discord"
    },
    {
      "href": "https://twitter.com/TenKBay",
      "img":  "twitter.svg",
      "alt": "Twitter"
    }
  ]
}
'''
'''--- gatsby-config.js ---
require("ts-node").register()

module.exports = require("./gatsby-config.ts")

'''
'''--- gatsby-config.ts ---
import settings from "./config/settings.json"
import pkg from "./package.json"

// Build with env var PREFIX_PATHS=true to prefix all links & image paths with pathPrefix
// see https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/path-prefix/
export const pathPrefix = pkg.name

export const siteMetadata = settings

export const plugins = [
  // generates `./graphql-types.ts`
  `gatsby-plugin-graphql-codegen`,
  // generates `./schema.graphql`, which is referenced by `.graphqlrc.yml`, used by VS Code plugin GraphQL.vscode-graphql
  `gatsby-plugin-extract-schema`,
  // types for CSS modules
  `gatsby-plugin-dts-css-modules`,
  `gatsby-plugin-react-helmet`,
  `gatsby-transformer-json`,
  {
    resolve: `gatsby-source-filesystem`,
    options: {
      name: `i18n`,
      path: `${__dirname}/config/i18n`,
    },
  },
  `gatsby-transformer-inline-svg`,
  {
    resolve: `gatsby-source-filesystem`,
    options: {
      name: `images`,
      path: `${__dirname}/config/images`,
    },
  },
  {
    // See https://www.gatsbyjs.com/plugins/gatsby-plugin-image/
    resolve: `gatsby-plugin-sharp`,
    options: {
      defaults: {
        formats: [`auto`, `avif`, `webp`],
        placeholder: `blurred`,
      },
    },
  },
  `gatsby-transformer-video`,
  {
    resolve: `gatsby-source-filesystem`,
    options: {
      name: `videos`,
      path: `${__dirname}/config/videos`,
    },
  },
  `gatsby-transformer-sharp`,
  `gatsby-plugin-image`,
  {
    resolve: `gatsby-plugin-manifest`,
    options: {
      name: pkg.name,
      short_name: pkg.name,
      start_url: `/`,
      background_color: `#663399`,
      // This will impact how browsers show your PWA/website
      // https://css-tricks.com/meta-theme-color-and-trickery/
      // theme_color: `#663399`,
      display: `minimal-ui`,
      icon: `config/images/favicon.png`, // This path is relative to the root of the site.
    },
  },
  `gatsby-plugin-sass`,
  // this (optional) plugin enables Progressive Web App + Offline functionality
  // To learn more, visit: https://gatsby.dev/offline
  // `gatsby-plugin-offline`,
]

'''
'''--- gatsby-node.ts ---
import fs from "fs"
import path from "path"
import { GatsbyNode } from "gatsby"
import { locales } from "./lib/locales"
import { rpcData } from "./src/hooks/useTenk"

export const onPreInit: GatsbyNode["onPreInit"] = async () => {
  const data = await rpcData()
  fs.writeFileSync(
    path.join(__dirname, './src/hooks/stale-data-from-build-time.json'),
    JSON.stringify(data)
  )
}

export const createPages: GatsbyNode["createPages"] = async ({ actions }) => {
  locales.forEach(locale => {
    actions.createPage({
      path: locale.id,
      component: require.resolve("./src/templates/[locale].tsx"),
      context: { locale },
    })
  })
}

'''
'''--- lib/locales/Locale.ts ---
/**
 * This file specifies the exact shape of data required in the locales files
 * located in `config/locales/*.json`
 *
 * We then use `typescript-json-validator` to generate a JSON validator based on
 * these types, which lives in `./Locale.validator.ts`
 */
type Markdown = string

// TODO: should be able to import Action from ./runtimeUtils, but currently breaks with typescript-json-validator
// import type { Action } from './runtimeUtils'
type Action = "ADD_TO_CALENDAR(SALE_START)" | "ADD_TO_CALENDAR(PRESALE_START)" | "SIGN_IN" | "MINT" | "GO_TO_PARAS"

export const requiredHeroFields = [
  'title',
  'body',
  'cta',
  'action',
] as const

export const optionalHeroFields = [
  'backgroundImage',
  'backgroundColor',
  'image',
  'video',
  'ps',
  'setNumber',
] as const

export type Hero = {
  [K in typeof requiredHeroFields[number]]: K extends 'action' ? Action : Markdown
} & {
  [K in typeof optionalHeroFields[number]]?: string
}

export const userStatuses = ['signedOut', 'signedIn', 'vip'] as const

type HeroSaleStatus = Partial<Hero> & {
  [K in typeof userStatuses[number]]?: Partial<Hero>
}

export const saleStatuses = ['saleClosed', 'presale', 'saleOpen', 'allSold'] as const

export type RawHeroTree = Partial<Hero> & {
  [K in typeof saleStatuses[number]]?: HeroSaleStatus
}

export interface SectionI18n {
  text: Markdown
  image?: string
  video?: string
  backgroundImage?: string
  backgroundColor?: string
}

export default interface Locale {
  viewIn: string
  langPicker: string
  title: string
  description: string
  calendarEvent: string
  connectWallet: string
  signOut: string
  myNFTs: string
  nextNFT: string
  prevNFT: string
  close: string
  zoomIn: string
  zoomOut: string
  hero: RawHeroTree
  extraSections?: SectionI18n[]
}
'''
'''--- lib/locales/Locale.validator.ts ---
/* tslint:disable */
// generated by typescript-json-validator
import { inspect } from "util"
import Ajv = require("ajv")
import Locale from "./Locale"
export const ajv = new Ajv({
  allErrors: true,
  coerceTypes: false,
  format: "fast",
  nullable: true,
  unicode: true,
  uniqueItems: true,
  useDefaults: true,
})

ajv.addMetaSchema(require("ajv/lib/refs/json-schema-draft-06.json"))

export { Locale }
export const LocaleSchema = {
  $schema: "http://json-schema.org/draft-07/schema#",
  additionalProperties: false,
  defaultProperties: [],
  definitions: {
    "Partial<Hero>": {
      additionalProperties: false,
      defaultProperties: [],
      properties: {
        action: {
          enum: [
            "ADD_TO_CALENDAR(PRESALE_START)",
            "ADD_TO_CALENDAR(SALE_START)",
            "GO_TO_PARAS",
            "MINT",
            "SIGN_IN",
          ],
          type: "string",
        },
        backgroundColor: {
          type: "string",
        },
        backgroundImage: {
          type: "string",
        },
        body: {
          type: "string",
        },
        cta: {
          type: "string",
        },
        image: {
          type: "string",
        },
        ps: {
          type: "string",
        },
        setNumber: {
          type: "string",
        },
        title: {
          type: "string",
        },
        video: {
          type: "string",
        },
      },
      type: "object",
    },
    SectionI18n: {
      additionalProperties: false,
      defaultProperties: [],
      properties: {
        backgroundColor: {
          type: "string",
        },
        backgroundImage: {
          type: "string",
        },
        image: {
          type: "string",
        },
        text: {
          description:
            "This file specifies the exact shape of data required in the locales files\nlocated in `config/locales/*.json`\n\nWe then use `typescript-json-validator` to generate a JSON validator based on\nthese types, which lives in `./Locale.validator.ts`",
          type: "string",
        },
        video: {
          type: "string",
        },
      },
      required: ["text"],
      type: "object",
    },
  },
  properties: {
    calendarEvent: {
      type: "string",
    },
    close: {
      type: "string",
    },
    connectWallet: {
      type: "string",
    },
    description: {
      type: "string",
    },
    extraSections: {
      items: {
        $ref: "#/definitions/SectionI18n",
      },
      type: "array",
    },
    hero: {
      additionalProperties: false,
      properties: {
        action: {
          enum: [
            "ADD_TO_CALENDAR(PRESALE_START)",
            "ADD_TO_CALENDAR(SALE_START)",
            "GO_TO_PARAS",
            "MINT",
            "SIGN_IN",
          ],
          type: "string",
        },
        allSold: {
          additionalProperties: false,
          properties: {
            action: {
              enum: [
                "ADD_TO_CALENDAR(PRESALE_START)",
                "ADD_TO_CALENDAR(SALE_START)",
                "GO_TO_PARAS",
                "MINT",
                "SIGN_IN",
              ],
              type: "string",
            },
            backgroundColor: {
              type: "string",
            },
            backgroundImage: {
              type: "string",
            },
            body: {
              type: "string",
            },
            cta: {
              type: "string",
            },
            image: {
              type: "string",
            },
            ps: {
              type: "string",
            },
            setNumber: {
              type: "string",
            },
            signedIn: {
              $ref: "#/definitions/Partial<Hero>",
            },
            signedOut: {
              $ref: "#/definitions/Partial<Hero>",
            },
            title: {
              type: "string",
            },
            video: {
              type: "string",
            },
            vip: {
              $ref: "#/definitions/Partial<Hero>",
            },
          },
          type: "object",
        },
        backgroundColor: {
          type: "string",
        },
        backgroundImage: {
          type: "string",
        },
        body: {
          type: "string",
        },
        cta: {
          type: "string",
        },
        image: {
          type: "string",
        },
        presale: {
          additionalProperties: false,
          properties: {
            action: {
              enum: [
                "ADD_TO_CALENDAR(PRESALE_START)",
                "ADD_TO_CALENDAR(SALE_START)",
                "GO_TO_PARAS",
                "MINT",
                "SIGN_IN",
              ],
              type: "string",
            },
            backgroundColor: {
              type: "string",
            },
            backgroundImage: {
              type: "string",
            },
            body: {
              type: "string",
            },
            cta: {
              type: "string",
            },
            image: {
              type: "string",
            },
            ps: {
              type: "string",
            },
            setNumber: {
              type: "string",
            },
            signedIn: {
              $ref: "#/definitions/Partial<Hero>",
            },
            signedOut: {
              $ref: "#/definitions/Partial<Hero>",
            },
            title: {
              type: "string",
            },
            video: {
              type: "string",
            },
            vip: {
              $ref: "#/definitions/Partial<Hero>",
            },
          },
          type: "object",
        },
        ps: {
          type: "string",
        },
        saleClosed: {
          additionalProperties: false,
          properties: {
            action: {
              enum: [
                "ADD_TO_CALENDAR(PRESALE_START)",
                "ADD_TO_CALENDAR(SALE_START)",
                "GO_TO_PARAS",
                "MINT",
                "SIGN_IN",
              ],
              type: "string",
            },
            backgroundColor: {
              type: "string",
            },
            backgroundImage: {
              type: "string",
            },
            body: {
              type: "string",
            },
            cta: {
              type: "string",
            },
            image: {
              type: "string",
            },
            ps: {
              type: "string",
            },
            setNumber: {
              type: "string",
            },
            signedIn: {
              $ref: "#/definitions/Partial<Hero>",
            },
            signedOut: {
              $ref: "#/definitions/Partial<Hero>",
            },
            title: {
              type: "string",
            },
            video: {
              type: "string",
            },
            vip: {
              $ref: "#/definitions/Partial<Hero>",
            },
          },
          type: "object",
        },
        saleOpen: {
          additionalProperties: false,
          properties: {
            action: {
              enum: [
                "ADD_TO_CALENDAR(PRESALE_START)",
                "ADD_TO_CALENDAR(SALE_START)",
                "GO_TO_PARAS",
                "MINT",
                "SIGN_IN",
              ],
              type: "string",
            },
            backgroundColor: {
              type: "string",
            },
            backgroundImage: {
              type: "string",
            },
            body: {
              type: "string",
            },
            cta: {
              type: "string",
            },
            image: {
              type: "string",
            },
            ps: {
              type: "string",
            },
            setNumber: {
              type: "string",
            },
            signedIn: {
              $ref: "#/definitions/Partial<Hero>",
            },
            signedOut: {
              $ref: "#/definitions/Partial<Hero>",
            },
            title: {
              type: "string",
            },
            video: {
              type: "string",
            },
            vip: {
              $ref: "#/definitions/Partial<Hero>",
            },
          },
          type: "object",
        },
        setNumber: {
          type: "string",
        },
        title: {
          type: "string",
        },
        video: {
          type: "string",
        },
      },
      type: "object",
    },
    langPicker: {
      type: "string",
    },
    myNFTs: {
      type: "string",
    },
    nextNFT: {
      type: "string",
    },
    prevNFT: {
      type: "string",
    },
    signOut: {
      type: "string",
    },
    title: {
      type: "string",
    },
    viewIn: {
      type: "string",
    },
    zoomIn: {
      type: "string",
    },
    zoomOut: {
      type: "string",
    },
  },
  required: [
    "calendarEvent",
    "close",
    "connectWallet",
    "description",
    "hero",
    "langPicker",
    "myNFTs",
    "nextNFT",
    "prevNFT",
    "signOut",
    "title",
    "viewIn",
    "zoomIn",
    "zoomOut",
  ],
  type: "object",
}
export type ValidateFunction<T> = ((data: unknown) => data is T) &
  Pick<Ajv.ValidateFunction, "errors">
export const isLocale = ajv.compile(LocaleSchema) as ValidateFunction<Locale>
export default function validate(value: unknown): Locale {
  if (isLocale(value)) {
    return value
  } else {
    throw new Error(
      ajv.errorsText(
        isLocale.errors!.filter((e: any) => e.keyword !== "if"),
        { dataVar: "Locale" }
      ) +
        "\n\n" +
        inspect(value)
    )
  }
}

'''
'''--- lib/locales/index.ts ---
import fs from "fs"
import path from "path"
import { execSync } from "child_process"
import { requiredHeroFields, optionalHeroFields, saleStatuses, userStatuses } from "./Locale"
import type Locale from "./Locale"
import { placeholderStrings } from './runtimeUtils'
import type { Hero, RawHeroTree } from "./Locale"

// re-create `Locale.validator.ts` based of current contents of `Locale.ts`
execSync(`yarn typescript-json-validator --noExtraProps ${__dirname}/Locale.ts Locale`)

// now that we re-created the file we can import the latest version
const validate: (x: unknown) => Locale = require('./Locale.validator').default

class LocaleError extends Error {}

interface HeroSaleState {
  signedOut: Hero
  signedIn: Hero
  vip: Hero
}

export interface ExpandedHeroTree {
  saleClosed: HeroSaleState
  presale: HeroSaleState
  saleOpen: HeroSaleState
  allSold: HeroSaleState
}

export interface DecoratedLocale extends Locale {
  id: string
  hero: ExpandedHeroTree
}

function computeField({ rawHeroTree, saleStatus, userStatus, required }: {
  rawHeroTree: RawHeroTree
  saleStatus: keyof ExpandedHeroTree
  userStatus: keyof HeroSaleState
  required: boolean
}) {
  return (hero: Partial<Hero>, field: keyof Hero) => {
    // @ts-expect-error Type 'string | undefined' is not assignable to type 'Action'
    hero[field] =
      rawHeroTree[saleStatus]?.[userStatus]?.[field] ??
      rawHeroTree[saleStatus]?.[field] ??
      rawHeroTree[field]
    if (required && typeof hero[field] === "undefined") {
      throw new LocaleError(
        `"hero" must include computable "${field}" in each branch; please include at least one of:\n` +
        `  ‚Ä¢ "hero.${field}"\n` +
        `  ‚Ä¢ "hero.${saleStatus}.${field}"\n` +
        `  ‚Ä¢ "hero.${saleStatus}.${userStatus}.${field}"\n` +
        `(if set in more than one of these, a more specific setting overrides a more general)`
      )
    }
    // warn if it looks like there might be an unknown placeholder string
    // ('action' field values are validated as part of the schema, so we can skip them here)
    const allCapsSubStrings = field !== 'action' && hero[field]?.matchAll(/\b[A-Z_]+\b/g)
    Array.from(allCapsSubStrings || []).forEach(([possiblePlaceholder]) => {
      // TODO: update above regex to only match strings with underscores in them to avoid `.match('_')`
      if (possiblePlaceholder.match('_') && !placeholderStrings.includes(possiblePlaceholder)) {
        console.warn(
          `"hero" field "${field}" contains what looks like a placeholder string "${possiblePlaceholder}", ` +
          `but no substitution is available for this string. Did you mean to include one of the following?\n\n` +
          `  ‚Ä¢ ${placeholderStrings.join('\n  ‚Ä¢ ')}\n\n` +
          `The full text given for this field was:\n\n  ${hero[field]}\n\n`
        )
      }
    })
    return hero
  }
}

function hoistHeroFields(rawHeroTree: RawHeroTree): ExpandedHeroTree {
  return saleStatuses.reduce((a, saleStatus) => ({ ...a,
    [saleStatus]: userStatuses.reduce((b, userStatus) => ({ ...b,
      [userStatus]: {
        ...requiredHeroFields.reduce(computeField({ rawHeroTree, saleStatus, userStatus, required: true }), {}),
        ...optionalHeroFields.reduce(computeField({ rawHeroTree, saleStatus, userStatus, required: false }), {}),
      } as Hero
    }), {} as HeroSaleState)
  }), {} as ExpandedHeroTree)
}

// for use with `sort`
function alphabeticOrder({ id: a }: DecoratedLocale, { id: b }: DecoratedLocale): -1 | 0 | 1 {
  if (a < b) {
    return -1
  } else if (a > b) {
    return 1
  } else {
    return 0
  }
}

const localesDirectory = path.join(process.cwd(), "config/i18n")

let fileNames: string[]
try {
  fileNames = fs.readdirSync(localesDirectory)
} catch {
  fileNames = []
}

const IS_JSON = /.json$/

export const locales: DecoratedLocale[] = fileNames.filter(f => IS_JSON.test(f))
  .map(fileName => {
    // Remove ".json" from file name to get id
    // TODO: validate that `id` is valid according to https://www.npmjs.com/package/iso-639-1
    const id = fileName.replace(/\.json$/, "")
    const fullPath = path.join(localesDirectory, fileName)
    const fileContents: unknown = JSON.parse(fs.readFileSync(fullPath, "utf8"))
    const i18n = validate(fileContents)

    let hero: ExpandedHeroTree
    try {
      hero = hoistHeroFields(i18n.hero)
    } catch (e: unknown) {
      if (e instanceof LocaleError) {
        throw new Error(`Error parsing ${fileName}:\n\n${e.message}`)
      }
      throw e
    }

    // Combine the data with the id
    return {
      id,
      ...i18n,
      hero,
    }
  })
  .sort(alphabeticOrder)

'''
'''--- lib/locales/runtimeUtils.ts ---
import { Gas, NEAR } from 'near-units'
import { addToCalendar } from "add-to-calendar-button"
import settings from '../../config/settings.json'
import { signIn } from '../../src/near'
import { TenK } from '../../src/near/contracts'
import { TenkData } from "../../src/hooks/useTenk"
import { saleStatuses, userStatuses } from './Locale'
import { Locale } from '../../src/hooks/useLocales'

type Timestamp = number

type Data = TenkData & {
  currentUser: string
  locale: Locale
  numberToMint?: number
  saleStatus: typeof saleStatuses[number]
  userStatus: typeof userStatuses[number]
}

function formatDate(
  d: Timestamp | Date,

  /**
   * `undefined` will default to browser's locale (may not work correctly in Node during build)
   */
  locale?: string,
  options: Intl.DateTimeFormatOptions = {}
): string {
  const date = typeof d === "number" ? new Date(d) : d

  return new Intl.DateTimeFormat(locale,  {
    dateStyle: 'short',
    timeStyle: 'short',
    ...options,
  }).format(date)
}

const replacers = {
  CURRENT_USER: (d: Data) => d.currentUser,
  PRESALE_START: (d: Data) => formatDate(d.saleInfo.presale_start),
  SALE_START: (d: Data) => formatDate(d.saleInfo.sale_start),
  MINT_LIMIT: (d: Data) => d.remainingAllowance ?? 0,
  MINT_PRICE: (d: Data) => NEAR.from(d.saleInfo.price).mul(NEAR.from('' + (d.numberToMint ?? 1))).toHuman(),
  MINT_RATE_LIMIT: (d: Data) => d.mintRateLimit,
  INITIAL_COUNT: (d: Data) => d.saleInfo.token_final_supply,
  REMAINING_COUNT: (d: Data) => d.tokensLeft,
} as const

export const placeholderStrings = Object.keys(replacers)

export type PlaceholderString = keyof typeof replacers

const placeholderRegex = new RegExp(`(${placeholderStrings.join('|')})`, 'gm')

export function fill(text: string, data: Data): string {
  return text.replace(placeholderRegex, (match) => {
    return String(replacers[match as PlaceholderString](data))
  })
}

// add-to-calendar-button has strange strict requirements on time format
function formatDatesForAtcb(d: Timestamp) {
  let [start, end] = new Date(d).toISOString().split('T')
  return [
    start,
    end.replace(/:\d\d\..*$/, '') // strip seconds, ms, & TZ
  ]
}

// add-to-calendar-button doesn't allow passing simple ISO strings for start/end
function getStartAndEnd(d: Timestamp) {
  const [startDate, startTime] = formatDatesForAtcb(d)
  const [endDate, endTime] = formatDatesForAtcb(d + 3600000)
  return { startDate, startTime, endDate, endTime }
}

const actions = {
  'ADD_TO_CALENDAR(SALE_START)': (d: Data) => addToCalendar({
    name: d.locale.calendarEvent!,
    ...getStartAndEnd(d.saleInfo.sale_start),
    options: ['Google', 'iCal', 'Apple', 'Microsoft365', 'MicrosoftTeams', 'Outlook.com', 'Yahoo'],
    timeZone: "UTC",
    trigger: 'click',
  }),
  'ADD_TO_CALENDAR(PRESALE_START)': (d: Data) => addToCalendar({
    name: d.locale.calendarEvent!,
    ...getStartAndEnd(d.saleInfo.presale_start),
    options: ['Google', 'iCal', 'Apple', 'Microsoft365', 'MicrosoftTeams', 'Outlook.com', 'Yahoo'],
    timeZone: "UTC",
    trigger: 'click',
  }),
  'SIGN_IN': signIn,
  'MINT': (d: Data) => TenK.nft_mint_many({ num: d.numberToMint ?? 1 }, {
    gas: Gas.parse('20 Tgas').mul(Gas.from('' + d.numberToMint)),
    attachedDeposit: NEAR.from(d.saleInfo.price).mul(NEAR.from('' + d.numberToMint)),
  }),
  'GO_TO_PARAS': () => window.open(`https://paras.id/search?q=${settings.contractName}&sort=priceasc&pmin=.01&is_verified=true`),
}

export type Action = keyof typeof actions

export function act(action: Action, data: Data): void {
  actions[action](data)
}

export function can(action: Action, data: Data): boolean {
  if (action === 'MINT') {
    return Boolean(data.currentUser) && (
      (data.saleStatus === 'presale' &&
        data.remainingAllowance !== undefined &&
        data.remainingAllowance > 0
      ) ||
      (data.saleStatus === 'saleOpen')
    )
  }
  return true
}
'''
'''--- package.json ---
{
  "name": "frontend-starter",
  "private": true,
  "description": "Template for NFT Launches on TenK",
  "version": "0.1.0",
  "author": "Chad Ostrowski <chad@ahalabs.dev>",
  "dependencies": {
    "@fontsource/montserrat": "^4.5.4",
    "@radix-ui/react-dropdown-menu": "0.1.4",
    "add-to-calendar-button": "AhaLabs/add-to-calendar-button#develop",
    "bn.js": "^5.2.0",
    "gatsby-background-image": "^1.6.0",
    "gatsby-transformer-video": "^0.6.0",
    "gbimage-bridge": "^0.2.1",
    "near-api-js": "AhaLabs/near-api-js#1.0.1",
    "near-units": "^0.1.9",
    "react": "^17.0.1",
    "react-dom": "^17.0.1",
    "react-helmet": "^6.1.0",
    "react-image-lightbox": "^5.1.4",
    "react-markdown": "^8.0.0"
  },
  "devDependencies": {
    "@types/bn.js": "^5.1.0",
    "@types/react-helmet": "^6.1.5",
    "gatsby": "^4.5.3",
    "gatsby-plugin-dts-css-modules": "^2.2.0",
    "gatsby-plugin-extract-schema": "^0.2.1",
    "gatsby-plugin-gatsby-cloud": "^4.5.2",
    "gatsby-plugin-graphql-codegen": "^3.1.1",
    "gatsby-plugin-image": "^2.5.2",
    "gatsby-plugin-manifest": "^4.5.2",
    "gatsby-plugin-offline": "^5.5.2",
    "gatsby-plugin-react-helmet": "^5.5.0",
    "gatsby-plugin-sass": "^5.7.0",
    "gatsby-plugin-sharp": "^4.5.2",
    "gatsby-source-filesystem": "^4.5.2",
    "gatsby-transformer-inline-svg": "^1.1.0",
    "gatsby-transformer-json": "^4.5.0",
    "gatsby-transformer-sharp": "^4.5.0",
    "node-sass": "6",
    "prettier": "^2.5.1",
    "ts-node": "^10.4.0",
    "typescript": "^4.5.4",
    "typescript-json-validator": "^2.4.2"
  },
  "keywords": [
    "gatsby"
  ],
  "license": "LGPL-3.0",
  "scripts": {
    "build": "gatsby build",
    "develop": "gatsby develop",
    "format": "prettier --write \"**/*.{js,jsx,ts,tsx,json,md}\"",
    "start": "gatsby develop",
    "serve": "gatsby serve",
    "clean": "gatsby clean",
    "test": "echo \"Write tests! -> https://gatsby.dev/unit-testing\" && exit 1"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/gatsbyjs/gatsby-starter-default"
  },
  "bugs": {
    "url": "https://github.com/gatsbyjs/gatsby/issues"
  }
}

'''
'''--- src/components/banner/banner.module.css ---
.banner {
  align-items: center;
  background-color: var(--secondary);
  text-align: center;
  padding: var(--spacing-m);
  position: relative;
}

.banner a,
.banner a:after {
  border-style: solid;
  border-color: transparent;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
}
.banner a {
  border-width: var(--spacing-m) var(--spacing-s);
}
.banner a:after {
  content: " ";
  border-width: var(--spacing-s) var(--spacing-xs);
}

.banner a:first-child,
.banner a:first-child:after {
  border-left-width: 0;
}
.banner a:first-child {
  border-right-color: var(--fg);
  left: var(--spacing-m);
}
.banner a:first-child:after {
  border-right-color: var(--secondary);
  left: var(--spacing-xs);
}

.banner a:last-child,
.banner a:last-child:after {
  border-right-width: 0;
}
.banner a:last-child {
  border-left-color: var(--fg);
  right: var(--spacing-m);
}
.banner a:last-child:after {
  border-left-color: var(--secondary);
  right: var(--spacing-xs);
}

'''
'''--- src/components/banner/banner.module.css.d.ts ---
// This file is automatically generated. Do not modify this file manually -- YOUR CHANGES WILL BE ERASED!
export const banner: string;

'''
'''--- src/components/dropdown/dropdown.module.css ---
.trigger {
  background-image: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAwMCAxMDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8cGF0aCBmaWxsPSJncmF5IiBkPSJNMTAsMjMyLjdsNDkwLDUzNC41bDQ5MC01MzQuNUgxMHoiIC8+DQo8L3N2Zz4=);
  background-repeat: no-repeat;
  background-position: bottom 50% right var(--spacing-s);
  background-size: var(--spacing-s);
  border-radius: var(--br-small);
  border: 1px solid var(--gray-3);
  padding-right: var(--spacing-l);
}

.trigger,
.item {
  border-radius: var(--br-small);
  color: inherit;
  font-weight: var(--fw-regular);
}

.trigger:focus,
.trigger:hover,
.item:focus,
.item:hover {
  box-shadow: none;
  outline: none;
}
.trigger:focus,
.trigger:hover {
  border-color: var(--gray-5);
}
.item:focus,
.item:hover {
  background-color: var(--gray-1);
}

.trigger:active,
.item:active {
  top: 0;
  border-color: var(--gray-4);
}

.item {
  border: none;
}

.arrow {
  fill: var(--gray-4);
}

.content {
  background-color: var(--bg);
  border-radius: var(--br-small);
  border: 1px solid var(--gray-4);
  box-shadow: rgba(22, 23, 24, 0.35) 0px 10px 38px -10px, rgba(22, 23, 24, 0.2) 0px 10px 20px -15px;
  padding: var(--spacing-xs);
}

.item {
  cursor: pointer;
  padding: 0 var(--spacing-s);
}

'''
'''--- src/components/dropdown/dropdown.module.css.d.ts ---
// This file is automatically generated. Do not modify this file manually -- YOUR CHANGES WILL BE ERASED!
export const trigger: string;
export const item: string;
export const arrow: string;
export const content: string;

'''
'''--- src/components/hero/hero.module.css ---
.cta {
  padding: var(--spacing-m) var(--spacing-xl);
}

.setNumber {
  align-items: center;
  display: grid;
  grid-template-columns: auto 5em;
  justify-content: flex-start;
  gap: var(--spacing-s);
}

.setNumber label:after {
  content: ":";
}

'''
'''--- src/components/hero/hero.module.css.d.ts ---
// This file is automatically generated. Do not modify this file manually -- YOUR CHANGES WILL BE ERASED!
export const cta: string;
export const setNumber: string;

'''
'''--- src/components/lang-picker/lang-picker.module.css ---
.wrap {
  position: relative;
}

.globe {
  position: absolute;
  left: var(--spacing-s);
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  justify-content: space-around;
}
.globe svg {
  height: 1em;
  width: 1em;
}

.select {
  border: 1px solid transparent;
  padding-left: var(--spacing-l);
}
.select:hover,
.select:focus {
  border-color: var(--gray-3);
}

'''
'''--- src/components/lang-picker/lang-picker.module.css.d.ts ---
// This file is automatically generated. Do not modify this file manually -- YOUR CHANGES WILL BE ERASED!
export const wrap: string;
export const globe: string;
export const select: string;

'''
'''--- src/components/layout/a11y.css ---
/* hide from screen but leave visible to screen readers and findable with cmd/ctrl-F searches */
.visuallyHidden {
  border: 0;
  clip: rect(0 0 0 0);
  height: auto;
  margin: 0;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
  white-space: nowrap;
}
'''
'''--- src/components/layout/atcb.css ---
/**
 * styles needed for add-to-calendar-button plugin
 */
.atcb_icon {
  height: 16px;
  display: inline-flex;
  margin-bottom: 4px;
  margin-right: 10px;
  vertical-align: middle;
}
.atcb_icon svg {
  height: 100%;
  color: rgb(51, 51, 51);
  width: auto;
}

.atcb_list {
  box-sizing: border-box;
  color: rgb(51, 51, 51);
  display: block;
  max-width: 100%;
  position: absolute;
  padding: 0 3px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  width: 100%;
  min-width: 12em;
  z-index: 80;
}

.atcb_list.atcb_modal {
  position: fixed;
  width: 12em;
  left: 50%;
  top: 50%;
  transform: translateY(-50%) translateX(-50%);
}

.atcb_list_item {
  background: rgb(250, 250, 250);
  border: 1px solid rgb(210, 210, 210);
  border-top: 0;
  -webkit-box-shadow: 1px 2px 8px 0px rgba(0,0,0,.3);
  box-shadow: 1px 2px 8px 0px rgba(0,0,0,.3);
  box-sizing: border-box;
  cursor: pointer;
  font-size: 16px;
  left: 50%;
  position: relative;
  padding: 12px 18px;
  text-align: left;
  transform: translate(-50%);
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}
.atcb_list_item:focus,
.atcb_list_item:hover {
  background: rgb(255, 255, 255);
  -webkit-box-shadow: 1px 2px 10px 0px rgba(0,0,0,.4);
  box-shadow: 1px 2px 10px 0px rgba(0,0,0,.4);
  color: rgb(0, 0, 0);
}
@media only screen and (max-width: 575px) {
  .atcb_list_item {
    font-size: 14px;
  }
}

.atcb_list:not(.atcb_modal) .atcb_list_item:first-child {
  padding-top: 25px;
}

.atcb_list.atcb_modal .atcb_list_item:first-child {
  border-radius: 6px 6px 0 0;
}

.atcb_list_item:last-child {
  border-radius: 0 0 6px 6px;
}

.atcb_list_item .atcb_icon {
  margin-right: 8px;
}

.atcb_bgoverlay {
  background: rgba(20,20,20,.2);
  backdrop-filter: blur(2px);
  height: 100%;
  left: 0;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 70;
}

'''
'''--- src/components/my-nfts/my-nfts.module.css ---
.grid {
  display: grid;
  gap: var(--spacing-m);
  grid-template-columns: repeat(auto-fill, minmax(7em, 1fr));
  margin: var(--spacing-m) 0;
}

.nft {
  color: inherit;
  padding: 0;
  margin: 0;
  border: none;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.nft:hover,
.nft:focus {
  box-shadow: none;
  top: -2px;
}

.nft > div:first-child {
  --aspect-ratio: 1 / 1;
  background-color: var(--gray-1);
  border-radius: var(--br-small);
  padding-bottom: calc(var(--aspect-ratio, 1 / 1) * 100%);
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  width: 100%;
}
'''
'''--- src/components/my-nfts/my-nfts.module.css.d.ts ---
// This file is automatically generated. Do not modify this file manually -- YOUR CHANGES WILL BE ERASED!
export const grid: string;
export const nft: string;

'''
'''--- src/components/nav/nav.module.css ---
/* This is a CSS Module; see https://create-react-app.dev/docs/adding-a-css-modules-stylesheet/ */
.nav {
  align-items: center;
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-s) var(--spacing-m);
  justify-content: space-between;
  padding: var(--spacing-l);
}

.social,
.title {
  display: flex;
  align-items: center;
}

.social {
  gap: var(--spacing-s);
}

.social svg {
  height: var(--spacing-m);
  width: var(--spacing-m);
  vertical-align: middle;
}

.title svg,
.title img {
  display: inline-block;
  height: var(--fs-heading-1);
  width: var(--fs-heading-1);
}
'''
'''--- src/components/nav/nav.module.css.d.ts ---
// This file is automatically generated. Do not modify this file manually -- YOUR CHANGES WILL BE ERASED!
export const nav: string;
export const social: string;
export const title: string;

'''
'''--- src/components/section/section.module.css ---
.section {
  padding-bottom: var(--spacing-xl);
  padding-top: var(--spacing-xl);
}

.content {
  place-items: center;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-s);
}

.content.hasMedia {
  display: grid;
}
'''
'''--- src/components/section/section.module.css.d.ts ---
// This file is automatically generated. Do not modify this file manually -- YOUR CHANGES WILL BE ERASED!
export const section: string;
export const content: string;
export const hasMedia: string;

'''
'''--- src/hooks/stale-data-from-build-time.json ---
{"saleInfo":{"status":"Open","presale_start":8640000000000000,"sale_start":1646236498996,"token_final_supply":100,"price":"1000000000000000000000000"},"contractMetadata":{"spec":"nft-1.0.0","name":"TENK NFT","symbol":"TENK","icon":null,"base_uri":"https://bafybeiehqz6vklvxkopg3un3avdtevch4cywuihgxrb4oio2qgxf4764bi.ipfs.dweb.link/","reference":null,"reference_hash":null},"tokensLeft":20,"vip":false,"nfts":[]}
'''
'''--- src/hooks/useHeroStatuses.ts ---
import { useLocation } from "@reach/router"
import { wallet } from "../near"
import { Status } from "../near/contracts/tenk"
import useTenk from './useTenk'

const overrides = [
  { saleStatus: 'saleClosed', userStatus: 'signedOut' },
  { saleStatus: 'saleClosed', userStatus: 'signedIn' },
  { saleStatus: 'saleClosed', userStatus: 'vip' },
  { saleStatus: 'presale', userStatus: 'signedOut' },
  { saleStatus: 'presale', userStatus: 'signedIn' },
  { saleStatus: 'presale', userStatus: 'vip' },
  { saleStatus: 'saleOpen', userStatus: 'signedOut' },
  { saleStatus: 'saleOpen', userStatus: 'signedIn' },
  { saleStatus: 'saleOpen', userStatus: 'vip' },
  { saleStatus: 'allSold', userStatus: 'signedOut' },
  { saleStatus: 'allSold', userStatus: 'signedIn' },
  { saleStatus: 'allSold', userStatus: 'vip' },
] as const

const saleStatuses = {
  [Status.Closed]: 'saleClosed',
  [Status.Presale]: 'presale',
  [Status.Open]: 'saleOpen',
  [Status.SoldOut]: 'allSold',
} as const

export default function useHeroStatuses() {
  const { saleInfo, vip } = useTenk()
  const heroParamStr = new URLSearchParams(useLocation().search).get('hero')
  const heroParam = heroParamStr ? parseInt(heroParamStr) : undefined
  const override = overrides[heroParam ?? -1]

  return {
    heroParam,
    overrides,
    saleStatus: override?.saleStatus ?? saleStatuses[saleInfo.status],
    userStatus: override?.userStatus ??
      (vip ? 'vip' : wallet.getAccountId() ? 'signedIn' : 'signedOut'),
  }
}
'''
'''--- src/hooks/useImageData.ts ---
import { useStaticQuery, graphql } from "gatsby"
import type { AllImagesQuery } from "../../graphql-types"

type SvgOrImage = {
  svg: AllImagesQuery['svg']['nodes'][number]
  image: undefined
} | {
  svg: undefined
  image: AllImagesQuery['nonSvg']['nodes'][number]
}

/**
 * Get image data for use with an inline/data-URL SVG or with GatsbyImage.
 *
 * @param src filename of an image in `config/images`. A helpful error will be thrown if no image found.
 * @returns an object with either an `svg` key or an `image` key
 */
export default function useImageData(src: string): SvgOrImage {
  const {
    svg: { nodes: svgs },
    nonSvg: { nodes: images },
  }: AllImagesQuery = useStaticQuery(
    graphql`
      query AllImages {
        svg: allFile(filter: { sourceInstanceName: { eq: "images" }, extension: { eq: "svg" } }) {
          nodes {
            relativePath
            svg {
              content
              dataURI
            }
          }
        }
        nonSvg: allFile(filter: { sourceInstanceName: { eq: "images" }, extension: { ne: "svg" } }) {
          nodes {
            relativePath
            publicURL
            childImageSharp {
              gatsbyImageData
            }
          }
        }
      }
    `
  )

  const svg = svgs.find(s => s.relativePath === src)
  const image = images.find(i => i.relativePath === src)

  if (!svg && !image) {
    console.error(
      new Error(
        `No image "${src}" in PROJECT_ROOT/config/images. Set "src" to one of the following:\n  ‚Ä¢ ${images
          .map(i => i.relativePath)
          .join("\n  ‚Ä¢ ")}`
      )
    )
  }

  return { svg, image } as SvgOrImage
}
'''
'''--- src/hooks/useLocales.ts ---
import { useStaticQuery, graphql } from "gatsby"
import { useLocation } from "@reach/router"
import type { AllLocalesQuery } from "../../graphql-types"

type I18n = NonNullable<AllLocalesQuery["allFile"]["nodes"][number]["childI18NJson"]>

export type Locale = {
  id: string
} & {
  [K in keyof I18n]: NonNullable<I18n[K]>
}

/**
 * Gatsby really wants to push everything, even simple stuff like JSON files in
 * a project folder, through a complicated GraphQL pipeline. This hook hides the
 * details of looking up the locale files in the `i18n` folder and makes them
 * easily accessible to any component that needs them.
 *
 * @returns the list of all `locales`, as well as the current `locale` given by the URL
 */
export default function useLocales(): { locales: Locale[]; locale?: Locale } {
  const { allFile }: AllLocalesQuery = useStaticQuery(
    graphql`
      query AllLocales {
        allFile(filter: { sourceInstanceName: { eq: "i18n" }, extension: {eq: "json"}}) {
          nodes {
            name
            childI18NJson {
              viewIn
              langPicker
              title
              description
              calendarEvent
              connectWallet
              signOut
              myNFTs
              nextNFT
              prevNFT
              close
              zoomIn
              zoomOut
            }
          }
        }
      }
    `
  )
  const { pathname } = useLocation()

  const locales = allFile.nodes.map(node => ({
    id: node.name,
    ...node.childI18NJson!,
  }) as Locale) // type coercion removes the `| null` that GraphQL includes

  const locale = locales.find(l => new RegExp(`/${l.id}`).test(pathname))

  return { locales, locale }
}

'''
'''--- src/hooks/useTenk.ts ---
import React from "react"
import { NftContractMetadata, SaleInfo, Token as RawToken } from "../near/contracts/tenk"
import { TenK } from "../near/contracts"
import { wallet } from "../near"
import staleData from "./stale-data-from-build-time.json"

const account_id = wallet.getAccountId()

type Token = RawToken & {
  media: string
}

export interface TenkData {
  contractMetadata?: NftContractMetadata
  remainingAllowance?: number
  mintRateLimit?: number
  nfts: Token[]
  saleInfo: SaleInfo
  tokensLeft?: number
  vip: boolean
}

// initialize calls at root of file so that first evaluation of this file causes
// calls to start, and subsequent imports of this file just use those same calls
const rpcCalls = Promise.all([
  TenK.get_sale_info(),
  TenK.nft_metadata(),
  TenK.tokens_left(),
  !account_id ? undefined : TenK.whitelisted({ account_id }),
  !account_id ? undefined : TenK.remaining_allowance({ account_id }),
  !account_id ? undefined : TenK.nft_tokens_for_owner({ account_id }),
  !account_id ? undefined : TenK.mint_rate_limit({ account_id }),
])

// Export utility to get data in object form, rather than array form.
// Used by gatsby-node.ts to create the stale data JSON file.
export async function rpcData(): Promise<TenkData> {
  const [
    saleInfo,
    contractMetadata,
    tokensLeft,
    vip,
    remainingAllowance,
    nfts,
    mintRateLimit
  ] = await rpcCalls
  return {
    saleInfo,
    contractMetadata,
    tokensLeft,
    vip: vip ?? false,
    remainingAllowance: remainingAllowance ?? undefined,
    nfts: nfts?.map(nft => ({ ...nft,
      media: new URL(nft.metadata?.media ?? '', contractMetadata.base_uri ?? '').href
    })) ?? [],
    mintRateLimit: mintRateLimit ?? undefined,
  }
}

export default function useTenk() {
  const [data, setData] = React.useState<TenkData>(staleData as unknown as TenkData)
  React.useEffect(() => {
    rpcData().then(setData)
  }, [])
  return data
}
'''
'''--- src/hooks/useVideoData.ts ---
import { useStaticQuery, graphql } from "gatsby"
import type { AllVideosQuery } from "../../graphql-types"

type VideoQuery = AllVideosQuery['allFile']['videos'][number]
type VideoH264 = NonNullable<VideoQuery['videoH264']>

type H264 = {
  [K in keyof VideoH264]: NonNullable<VideoH264[K]>
}

type VideoData = {
  videoH264: H264
}

/**
 * Get video data for use with the Video or BackgroundVideo components.
 *
 * @param src filename of an image in `config/videos`. A helpful error will be thrown if no image found.
 * @returns ...
 */
export default function useImageData(src: string): VideoData  {
  const { allFile: { videos } }: AllVideosQuery = useStaticQuery(
    graphql`
      query AllVideos {
        allFile(filter: {sourceInstanceName: {eq: "videos"}}) {
          videos: nodes {
            relativePath
            videoH264 {
              name
              duration
              aspectRatio
              absolutePath
              bitRate
              ext
              formatName
              height
              path
              size
              width
              startTime
            }
          }
        }
      }
    `
  )

  const video = videos.find(v => v.relativePath === src)

  if (!video) {
    throw new Error(
      `No video "${src}" in PROJECT_ROOT/config/videos. Set "src" to one of the following:\n  ‚Ä¢ ${videos
        .map(v => v.relativePath)
        .join("\n  ‚Ä¢ ")}`
    )
  }

  if (!video.videoH264) {
    throw new Error(
      `Video "PROJECT_ROOT/config/videos/${src}" returned bad data; expected videoH264 to both be present, got: ${JSON.stringify(video)}`
    )
  }

  return {
    videoH264: video.videoH264 as H264,
  }
}
'''
'''--- src/near/contracts/index.ts ---
import settings from "../../../config/settings.json"
import { wallet } from ".."
import { Contract } from "./tenk"

export const TenK = new Contract(wallet.account(), settings.contractName)

'''
'''--- src/near/contracts/tenk.ts ---
import { Account, transactions, providers, DEFAULT_FUNCTION_CALL_GAS } from 'near-api-js';

import BN from 'bn.js';
export interface ChangeMethodOptions {
  gas?: BN;
  attachedDeposit?: BN;
  walletMeta?: string;
  walletCallbackUrl?: string;
}
export interface ViewFunctionOptions {
  parse?: (response: Uint8Array) => any;
  stringify?: (input: any) => any;
}

/** 64 bit unsigned integer less than 2^53 -1 */
type u64 = number;
/** 64 bit signed integer less than 2^53 -1 */
type i64 = number;
/**
* StorageUsage is used to count the amount of storage used by a contract.
*/
export type StorageUsage = u64;
/**
* Balance is a type for storing amounts of tokens, specified in yoctoNEAR.
*/
export type Balance = U128;
/**
* Represents the amount of NEAR tokens in "gas units" which are used to fund transactions.
*/
export type Gas = u64;
/**
* base64 string.
*/
export type Base64VecU8 = string;
/**
* Raw type for duration in nanoseconds
*/
export type Duration = u64;
export type U128 = string;
/**
* Public key in a binary format with base58 string serialization with human-readable curve.
* The key types currently supported are `secp256k1` and `ed25519`.
*
* Ed25519 public keys accepted are 32 bytes and secp256k1 keys are the uncompressed 64 format.
*/
export type PublicKey = string;
export type AccountId = string;
/**
* Raw type for timestamp in nanoseconds
*/
export type Timestamp = u64;
export interface StorageBalanceBounds {
  min: U128,
  max?: U128,
}
export interface FungibleTokenMetadata {
  spec: string,
  name: string,
  symbol: string,
  icon?: string,
  reference?: string,
  reference_hash?: Base64VecU8,
  decimals: number,
}
/**
* In this implementation, the Token struct takes two extensions standards (metadata and approval) as optional fields, as they are frequently used in modern NFTs.
*/
export interface Token {
  token_id: TokenId,
  owner_id: AccountId,
  metadata?: TokenMetadata,
  approved_account_ids?: Record<AccountId, u64>,
}
/**
* Note that token IDs for NFTs are strings on NEAR. It's still fine to use autoincrementing numbers as unique IDs if desired, but they should be stringified. This is to make IDs more future-proof as chain-agnostic conventions and standards arise, and allows for more flexibility with considerations like bridging NFTs across chains, etc.
*/
export type TokenId = string;
export interface StorageBalance {
  total: U128,
  available: U128,
}
export type WrappedDuration = string;
/**
* Metadata on the individual token level.
*/
export interface TokenMetadata {
  title?: string,
  description?: string,
  media?: string,
  media_hash?: Base64VecU8,
  copies?: u64,
  issued_at?: string,
  expires_at?: string,
  starts_at?: string,
  updated_at?: string,
  extra?: string,
  reference?: string,
  reference_hash?: Base64VecU8,
}
/**
* Metadata for the NFT contract itself.
*/
export interface NftContractMetadata {
  spec: string,
  name: string,
  symbol: string,
  icon?: string,
  base_uri?: string,
  reference?: string,
  reference_hash?: Base64VecU8,
}
/**
* Current state of contract
*/
export enum Status {
  /**
  * Not open for any sales
  */
  Closed = "Closed",
  /**
  * VIP accounts can mint
  */
  Presale = "Presale",
  /**
  * Any account can mint
  */
  Open = "Open",
  /**
  * No more tokens to be minted
  */
  SoldOut = "SoldOut",
}
export interface InitialMetadata {
  name: string,
  symbol: string,
  uri: string,
  icon?: string,
  spec?: string,
  reference?: string,
  reference_hash?: Base64VecU8,
}
/**
* Information about the current sale
*/
export interface SaleInfo {
  /**
  * Current state of contract
  */
  status: Status,
  /**
  * Start of the VIP sale
  */
  presale_start: Duration,
  /**
  * Start of public sale
  */
  sale_start: Duration,
  /**
  * Total tokens that could be minted
  */
  token_final_supply: u64,
  /**
  * Current price for one token
  */
  price: U128,
}
export interface Sale {
  royalties?: Royalties,
  initial_royalties?: Royalties,
  presale_start?: Duration,
  public_sale_start?: Duration,
  allowance?: number,
  presale_price?: U128,
  price: U128,
  mint_rate_limit?: number,
}
export type BasisPoint = number;
/**
* Information about the current sale from user perspective
*/
export interface UserSaleInfo {
  sale_info: SaleInfo,
  is_vip: boolean,
  remaining_allowance?: number,
}
/**
* Copied from https://github.com/near/NEPs/blob/6170aba1c6f4cd4804e9ad442caeae9dc47e7d44/specs/Standards/NonFungibleToken/Payout.md#reference-level-explanation
* A mapping of NEAR accounts to the amount each should be paid out, in
* the event of a token-sale. The payout mapping MUST be shorter than the
* maximum length specified by the financial contract obtaining this
* payout data. Any mapping of length 10 or less MUST be accepted by
* financial contracts, so 10 is a safe upper limit.
* This currently deviates from the standard but is in the process of updating to use this type
*/
export interface Payout {
  payout: Record<AccountId, U128>,
}
export interface Royalties {
  accounts: Record<AccountId, BasisPoint>,
  percent: BasisPoint,
}

export class Contract {

  constructor(public account: Account, public readonly contractId: string){}

  check_key(args: {
    public_key: PublicKey,
  }, options?: ViewFunctionOptions): Promise<boolean> {
    return this.account.viewFunction(this.contractId, "check_key", args, options);
  }
  async update_allowance(args: {
    allowance: number,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.update_allowanceRaw(args, options));
  }
  update_allowanceRaw(args: {
    allowance: number,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "update_allowance", args, ...options});
  }
  update_allowanceTx(args: {
    allowance: number,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("update_allowance", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  whitelisted(args: {
    account_id: AccountId,
  }, options?: ViewFunctionOptions): Promise<boolean> {
    return this.account.viewFunction(this.contractId, "whitelisted", args, options);
  }
  get_sale_info(args: {
  } = {}, options?: ViewFunctionOptions): Promise<SaleInfo> {
    return this.account.viewFunction(this.contractId, "get_sale_info", args, options);
  }
  cost_per_token(args: {
    minter: AccountId,
  }, options?: ViewFunctionOptions): Promise<U128> {
    return this.account.viewFunction(this.contractId, "cost_per_token", args, options);
  }
  async transfer_ownership(args: {
    new_owner: AccountId,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.transfer_ownershipRaw(args, options));
  }
  transfer_ownershipRaw(args: {
    new_owner: AccountId,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "transfer_ownership", args, ...options});
  }
  transfer_ownershipTx(args: {
    new_owner: AccountId,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("transfer_ownership", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  nft_total_supply(args: {
  } = {}, options?: ViewFunctionOptions): Promise<U128> {
    return this.account.viewFunction(this.contractId, "nft_total_supply", args, options);
  }
  nft_tokens(args: {
    from_index?: U128,
    limit?: u64,
  }, options?: ViewFunctionOptions): Promise<Token[]> {
    return this.account.viewFunction(this.contractId, "nft_tokens", args, options);
  }
  nft_token(args: {
    token_id: TokenId,
  }, options?: ViewFunctionOptions): Promise<Token | null> {
    return this.account.viewFunction(this.contractId, "nft_token", args, options);
  }
  async close_contract(args: {
  } = {}, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.close_contractRaw(args, options));
  }
  close_contractRaw(args: {
  } = {}, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "close_contract", args, ...options});
  }
  close_contractTx(args: {
  } = {}, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("close_contract", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async nft_approve(args: {
    token_id: TokenId,
    account_id: AccountId,
    msg?: string,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.nft_approveRaw(args, options));
  }
  nft_approveRaw(args: {
    token_id: TokenId,
    account_id: AccountId,
    msg?: string,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "nft_approve", args, ...options});
  }
  nft_approveTx(args: {
    token_id: TokenId,
    account_id: AccountId,
    msg?: string,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("nft_approve", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async start_sale(args: {
    price?: U128,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.start_saleRaw(args, options));
  }
  start_saleRaw(args: {
    price?: U128,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "start_sale", args, ...options});
  }
  start_saleTx(args: {
    price?: U128,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("start_sale", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async nft_mint_many(args: {
    num: number,
  }, options?: ChangeMethodOptions): Promise<Token[]> {
    return providers.getTransactionLastResult(await this.nft_mint_manyRaw(args, options));
  }
  nft_mint_manyRaw(args: {
    num: number,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "nft_mint_many", args, ...options});
  }
  nft_mint_manyTx(args: {
    num: number,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("nft_mint_many", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async update_uri(args: {
    uri: string,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.update_uriRaw(args, options));
  }
  update_uriRaw(args: {
    uri: string,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "update_uri", args, ...options});
  }
  update_uriTx(args: {
    uri: string,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("update_uri", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async nft_transfer_call(args: {
    receiver_id: AccountId,
    token_id: TokenId,
    approval_id?: u64,
    memo?: string,
    msg: string,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.nft_transfer_callRaw(args, options));
  }
  nft_transfer_callRaw(args: {
    receiver_id: AccountId,
    token_id: TokenId,
    approval_id?: u64,
    memo?: string,
    msg: string,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "nft_transfer_call", args, ...options});
  }
  nft_transfer_callTx(args: {
    receiver_id: AccountId,
    token_id: TokenId,
    approval_id?: u64,
    memo?: string,
    msg: string,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("nft_transfer_call", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  nft_payout(args: {
    token_id: string,
    balance: U128,
    max_len_payout?: number,
  }, options?: ViewFunctionOptions): Promise<Payout> {
    return this.account.viewFunction(this.contractId, "nft_payout", args, options);
  }
  async nft_transfer_payout(args: {
    receiver_id: AccountId,
    token_id: string,
    approval_id?: u64,
    memo?: string,
    balance: U128,
    max_len_payout?: number,
  }, options?: ChangeMethodOptions): Promise<Payout> {
    return providers.getTransactionLastResult(await this.nft_transfer_payoutRaw(args, options));
  }
  nft_transfer_payoutRaw(args: {
    receiver_id: AccountId,
    token_id: string,
    approval_id?: u64,
    memo?: string,
    balance: U128,
    max_len_payout?: number,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "nft_transfer_payout", args, ...options});
  }
  nft_transfer_payoutTx(args: {
    receiver_id: AccountId,
    token_id: string,
    approval_id?: u64,
    memo?: string,
    balance: U128,
    max_len_payout?: number,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("nft_transfer_payout", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  /**
  * Returns the balance associated with given key.
  */
  get_key_balance(args: {
  } = {}, options?: ViewFunctionOptions): Promise<U128> {
    return this.account.viewFunction(this.contractId, "get_key_balance", args, options);
  }
  /**
  * Create a pending token that can be claimed with corresponding private key
  */
  async create_linkdrop(args: {
    public_key: PublicKey,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.create_linkdropRaw(args, options));
  }
  /**
  * Create a pending token that can be claimed with corresponding private key
  */
  create_linkdropRaw(args: {
    public_key: PublicKey,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "create_linkdrop", args, ...options});
  }
  /**
  * Create a pending token that can be claimed with corresponding private key
  */
  create_linkdropTx(args: {
    public_key: PublicKey,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("create_linkdrop", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async add_whitelist_accounts(args: {
    accounts: AccountId[],
    allowance?: number,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.add_whitelist_accountsRaw(args, options));
  }
  add_whitelist_accountsRaw(args: {
    accounts: AccountId[],
    allowance?: number,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "add_whitelist_accounts", args, ...options});
  }
  add_whitelist_accountsTx(args: {
    accounts: AccountId[],
    allowance?: number,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("add_whitelist_accounts", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async new(args: {
    owner_id: AccountId,
    metadata: NftContractMetadata,
    size: number,
    sale: Sale,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.newRaw(args, options));
  }
  newRaw(args: {
    owner_id: AccountId,
    metadata: NftContractMetadata,
    size: number,
    sale: Sale,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "new", args, ...options});
  }
  newTx(args: {
    owner_id: AccountId,
    metadata: NftContractMetadata,
    size: number,
    sale: Sale,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("new", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async start_presale(args: {
    public_sale_start?: Duration,
    presale_price?: U128,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.start_presaleRaw(args, options));
  }
  start_presaleRaw(args: {
    public_sale_start?: Duration,
    presale_price?: U128,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "start_presale", args, ...options});
  }
  start_presaleTx(args: {
    public_sale_start?: Duration,
    presale_price?: U128,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("start_presale", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  token_storage_cost(args: {
  } = {}, options?: ViewFunctionOptions): Promise<U128> {
    return this.account.viewFunction(this.contractId, "token_storage_cost", args, options);
  }
  async nft_transfer(args: {
    receiver_id: AccountId,
    token_id: TokenId,
    approval_id?: u64,
    memo?: string,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.nft_transferRaw(args, options));
  }
  nft_transferRaw(args: {
    receiver_id: AccountId,
    token_id: TokenId,
    approval_id?: u64,
    memo?: string,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "nft_transfer", args, ...options});
  }
  nft_transferTx(args: {
    receiver_id: AccountId,
    token_id: TokenId,
    approval_id?: u64,
    memo?: string,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("nft_transfer", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async nft_revoke_all(args: {
    token_id: TokenId,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.nft_revoke_allRaw(args, options));
  }
  nft_revoke_allRaw(args: {
    token_id: TokenId,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "nft_revoke_all", args, ...options});
  }
  nft_revoke_allTx(args: {
    token_id: TokenId,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("nft_revoke_all", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  cost_of_linkdrop(args: {
    minter: AccountId,
  }, options?: ViewFunctionOptions): Promise<U128> {
    return this.account.viewFunction(this.contractId, "cost_of_linkdrop", args, options);
  }
  total_cost(args: {
    num: number,
    minter: AccountId,
  }, options?: ViewFunctionOptions): Promise<U128> {
    return this.account.viewFunction(this.contractId, "total_cost", args, options);
  }
  get_linkdrop_contract(args: {
  } = {}, options?: ViewFunctionOptions): Promise<AccountId> {
    return this.account.viewFunction(this.contractId, "get_linkdrop_contract", args, options);
  }
  async new_default_meta(args: {
    owner_id: AccountId,
    metadata: InitialMetadata,
    size: number,
    sale?: Sale,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.new_default_metaRaw(args, options));
  }
  new_default_metaRaw(args: {
    owner_id: AccountId,
    metadata: InitialMetadata,
    size: number,
    sale?: Sale,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "new_default_meta", args, ...options});
  }
  new_default_metaTx(args: {
    owner_id: AccountId,
    metadata: InitialMetadata,
    size: number,
    sale?: Sale,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("new_default_meta", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async nft_revoke(args: {
    token_id: TokenId,
    account_id: AccountId,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.nft_revokeRaw(args, options));
  }
  nft_revokeRaw(args: {
    token_id: TokenId,
    account_id: AccountId,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "nft_revoke", args, ...options});
  }
  nft_revokeTx(args: {
    token_id: TokenId,
    account_id: AccountId,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("nft_revoke", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  nft_metadata(args: {
  } = {}, options?: ViewFunctionOptions): Promise<NftContractMetadata> {
    return this.account.viewFunction(this.contractId, "nft_metadata", args, options);
  }
  mint_rate_limit(args: {
  } = {}, options?: ViewFunctionOptions): Promise<number | null> {
    return this.account.viewFunction(this.contractId, "mint_rate_limit", args, options);
  }
  nft_is_approved(args: {
    token_id: TokenId,
    approved_account_id: AccountId,
    approval_id?: u64,
  }, options?: ViewFunctionOptions): Promise<boolean> {
    return this.account.viewFunction(this.contractId, "nft_is_approved", args, options);
  }
  remaining_allowance(args: {
    account_id: AccountId,
  }, options?: ViewFunctionOptions): Promise<number | null> {
    return this.account.viewFunction(this.contractId, "remaining_allowance", args, options);
  }
  async nft_mint(args: {
    token_id: TokenId,
    token_owner_id: AccountId,
    token_metadata: TokenMetadata,
  }, options?: ChangeMethodOptions): Promise<Token> {
    return providers.getTransactionLastResult(await this.nft_mintRaw(args, options));
  }
  nft_mintRaw(args: {
    token_id: TokenId,
    token_owner_id: AccountId,
    token_metadata: TokenMetadata,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "nft_mint", args, ...options});
  }
  nft_mintTx(args: {
    token_id: TokenId,
    token_owner_id: AccountId,
    token_metadata: TokenMetadata,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("nft_mint", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  get_user_sale_info(args: {
    account_id: AccountId,
  }, options?: ViewFunctionOptions): Promise<UserSaleInfo> {
    return this.account.viewFunction(this.contractId, "get_user_sale_info", args, options);
  }
  nft_tokens_for_owner(args: {
    account_id: AccountId,
    from_index?: U128,
    limit?: u64,
  }, options?: ViewFunctionOptions): Promise<Token[]> {
    return this.account.viewFunction(this.contractId, "nft_tokens_for_owner", args, options);
  }
  async add_whitelist_account_ungaurded(args: {
    account_id: AccountId,
    allowance: number,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.add_whitelist_account_ungaurdedRaw(args, options));
  }
  add_whitelist_account_ungaurdedRaw(args: {
    account_id: AccountId,
    allowance: number,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "add_whitelist_account_ungaurded", args, ...options});
  }
  add_whitelist_account_ungaurdedTx(args: {
    account_id: AccountId,
    allowance: number,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("add_whitelist_account_ungaurded", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  tokens_left(args: {
  } = {}, options?: ViewFunctionOptions): Promise<number> {
    return this.account.viewFunction(this.contractId, "tokens_left", args, options);
  }
  nft_supply_for_owner(args: {
    account_id: AccountId,
  }, options?: ViewFunctionOptions): Promise<U128> {
    return this.account.viewFunction(this.contractId, "nft_supply_for_owner", args, options);
  }
  async update_royalties(args: {
    royalties: Royalties,
  }, options?: ChangeMethodOptions): Promise<void> {
    return providers.getTransactionLastResult(await this.update_royaltiesRaw(args, options));
  }
  update_royaltiesRaw(args: {
    royalties: Royalties,
  }, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "update_royalties", args, ...options});
  }
  update_royaltiesTx(args: {
    royalties: Royalties,
  }, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("update_royalties", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
  async nft_mint_one(args: {
  } = {}, options?: ChangeMethodOptions): Promise<Token> {
    return providers.getTransactionLastResult(await this.nft_mint_oneRaw(args, options));
  }
  nft_mint_oneRaw(args: {
  } = {}, options?: ChangeMethodOptions): Promise<providers.FinalExecutionOutcome> {
    return this.account.functionCall({contractId: this.contractId, methodName: "nft_mint_one", args, ...options});
  }
  nft_mint_oneTx(args: {
  } = {}, options?: ChangeMethodOptions): transactions.Action {
    return transactions.functionCall("nft_mint_one", args, options?.gas ?? DEFAULT_FUNCTION_CALL_GAS, options?.attachedDeposit ?? new BN(0))
  }
}

'''
'''--- src/near/index.ts ---
import * as naj from "near-api-js"
import settings from "../../config/settings.json"

const { contractName } = settings

// TODO: remove pending https://github.com/near/near-api-js/issues/757
import { Buffer } from "buffer"
if (typeof window !== "undefined") window.Buffer = Buffer
if (typeof global !== "undefined") global.Buffer = Buffer

const nearConfig = /near$/.test(contractName)
  ? {
      networkId: "mainnet",
      nodeUrl: "https://rpc.mainnet.near.org",
      walletUrl: "https://wallet.near.org",
      helperUrl: "https://helper.mainnet.near.org",
    }
  : /testnet$/.test(contractName)
  ? {
      networkId: "testnet",
      nodeUrl: "https://rpc.testnet.near.org",
      walletUrl: "https://wallet.testnet.near.org",
      helperUrl: "https://helper.testnet.near.org",
    }
  : undefined

if (!nearConfig) {
  throw new Error(
    `Don't know what network settings to use for contract "${contractName}"; expected name to end in 'testnet' or 'near'`
  )
}

/**
 * NEAR Config object
 */
export const near = new naj.Near({
  ...nearConfig,
  keyStore: typeof window === "undefined"
    ? new naj.keyStores.InMemoryKeyStore()
    : new naj.keyStores.BrowserLocalStorageKeyStore()
})

/**
 * Interface to NEAR Wallet
 */
export const wallet = new naj.WalletConnection(near)

export function signIn() {
  wallet.requestSignIn({ contractId: settings.contractName })
}
'''
'''--- src/pages/404.js ---
import * as React from "react"

import Layout from "../components/layout"
import Seo from "../components/seo"

const NotFoundPage = () => (
  <Layout>
    <Seo title="404: Not found" />
    <h1>404: Not Found</h1>
    <p>You just hit a route that doesn&#39;t exist... the sadness.</p>
  </Layout>
)

export default NotFoundPage

'''
'''--- tsconfig.json ---
{
  "compilerOptions": {
    "target": "ES2019",
    "module": "commonjs",
    "lib": [ "es2020", "ESNext", "DOM" ],
    "allowJs": true,
    "jsx": "react",
    "esModuleInterop": true,
    "resolveJsonModule": true,
    "forceConsistentCasingInFileNames": true,
    "incremental": true,
    "declaration": true,
    "sourceMap": true,
    /* Strict Type-Checking Options */
    "strict": true, /* Enable all strict type-checking options. */
    "noImplicitAny": true, /* Raise error on expressions and declarations with an implied 'any' type. */
    "strictNullChecks": true, /* Enable strict null checks. */
    "noImplicitThis": true, /* Raise error on 'this' expressions with an implied 'any' type. */
  }
}
'''