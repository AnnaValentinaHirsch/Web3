*GitHub Repository "near/node-docs"*

'''--- .github/ISSUE_TEMPLATE/BOUNTY.yml ---
name: "Simple Bounty"
description: "Use this template to create a HEROES Simple Bounty via Github bot"
title: "Bounty: "
labels: ["bounty"]
assignees: heroes-bot-test
body:
  - type: markdown
    attributes:
      value: |
        Hi! Let's set up your bounty! Please don't change the template - @heroes-bot-test won't be able to help you.

  - type: dropdown
    id: type
    attributes:
      label: What talent are you looking for?
      options:
        - Marketing
        - Development
        - Design
        - Other
        - Content
        - Research
        - Audit

  - type: textarea
    id: description
    attributes:
      label: What you need to be done?

  - type: dropdown
    id: tags
    attributes:
      label: Tags
      description: Add tags that match the topic of the work
      multiple: true
      options:
        - API
        - Blockchain
        - Community
        - CSS
        - DAO
        - dApp
        - DeFi
        - Design
        - Documentation
        - HTML
        - Javascript
        - NFT
        - React
        - Rust
        - Smart contract
        - Typescript
        - UI/UX
        - web3
        - Translation
        - Illustration
        - Branding
        - Copywriting
        - Blogging
        - Editing
        - Video Creation
        - Social Media
        - Graphic Design
        - Transcription
        - Product Design
        - Artificial Intelligence
        - Quality Assurance
        - Risk Assessment
        - Security Audit
        - Bug Bounty
        - Code Review
        - Blockchain Security
        - Smart Contract Testing
        - Penetration Testing
        - Vulnerability Assessment
        - BOS
        - News
        - Hackathon
        - NEARCON2023
        - NEARWEEK

  - type: input
    id: deadline
    attributes:
      label: Deadline
      description: "Set a deadline for your bounty. Please enter the date in format: DD.MM.YYYY"
      placeholder: "19.05.2027"

  - type: dropdown
    id: currencyType
    attributes:
      label: Currency
      description: What is the currency you want to pay?
      options:
        - USDC.e
        - USDT.e
        - DAI
        - wNEAR
        - USDt
        - XP
        - marmaj
        - NEKO
        - JUMP
        - USDC
        - NEARVIDIA
      default: 0
    validations:
      required: true

  - type: input
    id: currencyAmount
    attributes:
      label: Amount
      description: How much it will be cost?

  - type: markdown
    attributes:
      value: "## Advanced settings"

  - type: checkboxes
    id: kyc
    attributes:
      label: KYC
      description: "Use HEROES' KYC Verification, only applicants who passed HEROES' KYC can apply and work on this bounty!"
      options:
        - label: Use KYC Verification

  - type: markdown
    attributes:
      value: |
        ### This cannot be changed once the bounty is live!

'''
'''--- .github/workflows/build.yml ---
name: CI
on: [push]
jobs:
  build-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '16'
      - name: Build Docusaurus docs
        run: |
          cd website && npm install
          npm run build
        env:
          CROWDIN_PERSONAL_TOKEN: ${{ secrets.CROWDIN_PERSONAL_TOKEN }}

'''
'''--- .github/workflows/links.yml ---
name: Check Markdown links

on: push

jobs:
  markdown-link-check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - uses: gaurav-nelson/github-action-markdown-link-check@v1
      with:
        use-quiet-mode: 'yes'
#        use-verbose-mode: 'yes'
        config-file: 'website/mlc_config.json'
        folder-path: 'docs'

'''
'''--- .github/workflows/spellcheck.yml ---
name: spellchecker

on:
  pull_request:
    branches:
      - main

jobs:
  misspell:
    name: runner / misspell
    runs-on: ubuntu-latest
    steps:
      - name: Check out code.
        uses: actions/checkout@v1
      - name: misspell
        id: check_for_typos
        uses: reviewdog/action-misspell@v1
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          path: "./docs"
          locale: "US"

'''
'''--- README.md ---
<br />
<br />

<p align="center">
<img src="website/static/img/near_logo.svg" width="400">
</p>

<br />
<br />

## NEAR Protocol - scalable and usable blockchain

[![Discord](https://img.shields.io/discord/490367152054992913.svg)](http://near.chat)
[![CI](https://github.com/near/node-docs/actions/workflows/build.yml/badge.svg)](https://github.com/near/node-docs/actions/workflows/build.yml)

* ‚öñÔ∏è NEAR Protocol is a new smart-contract platform that delivers scalability and usability.
* üõ† Through sharding, it will linearly scale with the number of validation nodes on the network.
* üóù Leveraging WebAssembly (via Rust and AssemblyScript), more sane contract management, ephemeral accounts and many other advancements, NEAR
finally makes using a blockchain protocol easy for both developers and consumers.

## Quick start

Check out the following links

- Deployed, live node documentation: https://near-nodes.io
- Example applications: https://near.dev
- Community chat: https://near.chat

## Contributing

NEAR uses [Docusaurus](https://docusaurus.io) for documentation.  Please refer to their documentation for details on major structural contributions to the documentation.

For simple content changes you have 2 options

- [Submit an issue](https://github.com/near/node-docs/issues)
- [Submit a pull request](https://github.com/near/node-docs/pulls) *(we prefer PRs of course)*

### The instant PR

This is the fastest way to submit content changes directly from the page where you notice a mistake.

1. Open any page in the docs on https://near-nodes.io
2. Click the `[ Edit ]` button at the top right hand side of _every_ content page
3. Make your edits to the document that opens in GitHub by clicking the ‚úé (pencil) icon
4. Submit a PR with your changes and comments for context

### The typical PR

This is the standard fork-branch-commit workflow for submitting pull requests to open source repositories

1. Fork this repo to your own GitHub account (or just clone it directly if you are currently a member of NEAR)

2. Open your editor to the _top level repo folder_ to view the directory structure as seen below

3. Move into the `/website` folder where you will run the following commands:

   - Make sure all the dependencies for the website are installed:

     ```sh
     # Install dependencies
     yarn
     ```

   - Run the local docs development server

      ```sh
      # Start the site
      yarn start
      ```

      _Expected Output_

      ```sh
      # Website with live reload is started
      Docusaurus server started on port 3000
      ```

      The website for docs will open your browser locally to port `3000` 

4. Make changes to the docs

5. Observe those changes reflected in the local docs

6. Submit a pull request with your changes

'''
'''--- docs/README.md ---
---
sidebar_position: 1
---

# NEAR Nodes

NEAR Protocol runs on a collection of publicly maintained computers (or "nodes"). All nodes are running the same `nearcore` codebase with the latest releases available on [GitHub](https://github.com/near/nearcore/releases/).

It is important to keep in mind all nodes run the same codebase, with different configurations. As such, we have split up the documentation for running different types of node into sections specific to the node's type.

| Node Type | Description |
|-----------|-------------|
| [Validator Node](/validator)   | Validator nodes participate in the consensus and produce blocks and/or chunks.          |
| [RPC Node](/rpc)               | RPC nodes are service providers that provide public RPC endpoints for developers to use.           |
| [Archival Node](/archival)     | Archival nodes store full blockchain data, and build an archive of historical states.           |

'''
'''--- docs/archival/_category_.json ---
{
  "position": 4,
  "label": "Archival Nodes",
  "collapsible": true,
  "collapsed": true,
  "link": {
    "type": "generated-index",
    "slug": "archival",
    "title": "Archival Nodes"
  }
}

'''
'''--- docs/archival/hardware-archival.md ---
---
id: hardware-archival
title: Hardware Requirements for Archival Node
sidebar_label: Hardware Requirements
sidebar_position: 1
description: NEAR Archival Node Hardware Requirements
---

This page covers the minimum and recommended hardware requirements for engaging with the NEAR platform as an Archival node.

## Recommended Hardware Specifications {#recommended-hardware-specifications}

| Hardware       |  Recommended Specifications                                               |
| -------------- | -----------------------------------------------------------------------   |
| CPU            | 8-Core (16-Thread) Intel i7/Xeon or equivalent with AVX support           |
| CPU Features   | CMPXCHG16B, POPCNT, SSE4.1, SSE4.2, AVX                                   |
| RAM            | 24GB DDR4                                                                 |
| Storage        | 9 Terabyte SSD                                                            |

_Verify AVX support on Linux by issuing the command ```$ lscpu | grep -oh  avx```. If the output is empty, your CPU is not supported._

## Minimal Hardware Specifications {#minimal-hardware-specifications}

| Hardware       |  Minimal Specifications                                                    |
| -------------- | -------------------------------------------------------------------------- |
| CPU            | 8-Core (16-Thread) Intel i7/Xeon or equivalent with AVX support            |
| RAM            | 16GB DDR4                                                                   |
| Storage        | 9 Terabyte SSD                                                             |

_Verify AVX support on Linux by issuing the command ```$ lscpu | grep -oh  avx```. If the output is empty, your CPU is not supported._

## Cost Estimation {#cost-estimation}

Estimated monthly costs depending on operating system:

| Cloud Provider | Machine Size    | Linux                     |
| -------------- | --------------- | ------------------------  |
| AWS            | m5.2xlarge      | $330 CPU + $800 storage ‚Ä† |
| GCP            | n2-standard-8   | $280 CPU + $800 storage ‚Ä† |
| Azure          | Standard_F8s_v2 | $180 CPU + $800 storage ‚Ä† |

_( ‚Ä† ) The storage cost will grow overtime as an archival node stores more data from the growing NEAR blockchain._

<blockquote class="info">
<strong>Resources for Cost Estimation</strong><br /><br />

All prices reflect *reserved instances* which offer deep discounts on all platforms with a 1 year commitment

- AWS
  - cpu: https://aws.amazon.com/ec2/pricing/reserved-instances/pricing
  - storage: https://aws.amazon.com/ebs/pricing
- GCP
  - cpu: https://cloud.google.com/compute/vm-instance-pricing
  - storage: https://cloud.google.com/compute/disks-image-pricing
- Azure ‚Äî https://azure.microsoft.com/en-us/pricing/calculator

</blockquote>

> Got a question?
> <a href="https://stackoverflow.com/questions/tagged/nearprotocol"> > <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/archival/run-archival-node-with-nearup.md ---
---
id: run-archival-node-with-nearup
title: Run an Archival Node (with nearup)
sidebar_label: Run a Node (with nearup)
sidebar_position: 3
description: How to run an Archival Node with nearup
---

*We encourage you to set up your node with Neard instead of Nearup as Nearup is not used on Mainnet. Please head to [Run a Node](/archival/run-archival-node-without-nearup) for instructions on how to setup an archival node with Neard.*

<blockquote class="info">
<strong>Heads up</strong><br /><br />

Running an archival node is very similar to running a [validator node](/validator/running-a-node) as both types of node use the same `nearcore` release. The main difference for running an archival node is a modification to the `config.json` by changing `archive` to `true`. See below for more details.

</blockquote>

## Prerequisites {#prerequisites}

- [Git](https://git-scm.com/)
- [Nearup](https://github.com/near-guildnet/nearup): Make sure [`nearup`](https://github.com/near-guildnet/nearup) is installed. You can install `nearup` by following the instructions at https://github.com/near-guildnet/nearup.

---

### Steps to Run an Archival Node using `nearup` {#steps-to-run-an-archival-node-using-nearup}

First, retrieve a copy of the latest archival snapshot from S3:
```bash
$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/testnet/archive/latest .
$ LATEST=$(cat latest)
$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/testnet/archive/$LATEST ~/.near/data
```

### Configuration Update {#configuration-update}

Running an archival node is the same as a [validator node](/validator/running-a-node) as both types of node use the same `nearcore` release. The main difference for running an archival node is a modification to the `config.json` by changing `archive` to `true`.

The `config.json` should contain the following fields. Currently, NEAR testnet and mainnet have only 1 (indexed [0]) shard and that shard is tracked. In the future, there will be the possibility to track different or multiple shards.

```
{
  ...
  "archive": true,
  "tracked_shards": [0],
  ...
}
```

Please make sure that the node is stopped while changing the `config.json`.

Once the config has been changed, you can restart the node and the node will start syncing new archival data. In the case where you want the full archival history, you can delete the data dir and start the node from scratch syncing full history or use one of the latest backups containing the data directory snapshot which can be copied under the near home dir (default: ~/.near/data).

Then run:
```bash
  $ nearup run testnet
```
Wait until initialization finishes, use the following command to follow logs:
```bash
  $ nearup logs --follow
```
Then run:
```bash
  $ nearup stop
```
Finally, run the following command and the node should start syncing headers at ~97%:
```bash
  $ nearup run testnet
```

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/archival/run-archival-node-without-nearup.md ---
---
id: run-archival-node-without-nearup
title: Run an Archival Node
sidebar_label: Run a Node üöÄ
sidebar_position: 2
description: How to run an Archival Node without nearup
---

The following instructions are applicable across localnet, testnet, and mainnet.

If you are looking to learn how to compile and run a NEAR Archival node natively for one of the following networks, this guide is for you.

- [`testnet`](/archival/run-archival-node-without-nearup#testnet)
- [`mainnet`](/archival/run-archival-node-without-nearup#mainnet)

<blockquote class="info">
<strong>Heads up</strong><br /><br />

Running an archival node is very similar to running a [validator node](/validator/running-a-node) as both types of node use the same `nearcore` release. The main difference for running an archival node is a modification to the `config.json` by changing `archive` to `true`. See below for more details.

</blockquote>

## Prerequisites {#prerequisites}

- [Rust](https://www.rust-lang.org/). If not already installed, please [follow these instructions](https://docs.near.org/sdk/rust/introduction#install-rust-and-wasm-toolchain).
- [Git](https://git-scm.com/)
- Installed developer tools:
  - MacOS
    ```bash
    $ brew install cmake protobuf clang llvm awscli
    ```
  - Linux
    ```bash
    $ apt update
    $ apt install -y git binutils-dev libcurl4-openssl-dev zlib1g-dev libdw-dev libiberty-dev cmake gcc g++ python docker.io protobuf-compiler libssl-dev pkg-config clang llvm cargo awscli
    ```
---

### Choosing your `nearcore` version {#choosing-your-nearcore-version}

When building your NEAR node you will have two branch options to choose from depending on your desired use:

- `master` : _(**Experimental**)_
  - Use this if you want to play around with the latest code and experiment. This branch is not guaranteed to be in a fully working state and there is absolutely no guarantee it will be compatible with the current state of *mainnet* or *testnet*.
- [`Latest stable release`](https://github.com/near/nearcore/tags) : _(**Stable**)_
  - Use this if you want to run a NEAR node for *mainnet*. For *mainnet*, please use the latest stable release. This version is used by mainnet validators and other nodes and is fully compatible with the current state of *mainnet*.
- [`Latest release candidates`](https://github.com/near/nearcore/tags) : _(**Release Candidates**)_
  - Use this if you want to run a NEAR node for *tesnet*. For *testnet*, we first release a RC version and then later make that release stable. For testnet, please run the latest RC version.

## `testnet` {#testnet}

### 1. Clone `nearcore` project from GitHub {#1-clone-nearcore-project-from-github}

First, clone the [`nearcore` repository](https://github.com/near/nearcore).

```bash
$ git clone https://github.com/near/nearcore
$ cd nearcore
$ git fetch origin --tags
```

Checkout to the branch you need if not `master` (default). Latest release is recommended. Please check the [releases page on GitHub](https://github.com/near/nearcore/releases).

```bash
$ git checkout tags/1.28.0 -b mynode
```

### 2. Compile `nearcore` binary {#2-compile-nearcore-binary}

In the `nearcore` folder run the following commands:

```bash
$ make release
```

This will start the compilation process. It will take some time
depending on your machine power (e.g. i9 8-core CPU, 32 GB RAM, SSD
takes approximately 25 minutes). Note that compilation will need over
1 GB of memory per virtual core the machine has. If the build fails
with processes being killed, you might want to try reducing number of
parallel jobs, for example: `CARGO_BUILD_JOBS=8 make release`.

By the way, if you‚Äôre familiar with Cargo, you could wonder why not
run `cargo build -p neard --release` instead.  While this will produce
a binary, the result will be a less optimized version.  On technical
level, this is because building via `make neard` enables link-time
optimisation which is disabled by default.

The binary path is `target/release/neard`

### 3. Initialize working directory {#3-initialize-working-directory}

The NEAR node requires a working directory with a couple of configuration files. Generate the initial required working directory by running:

```bash
$ ./target/release/neard --home ~/.near init --chain-id testnet --download-genesis --download-config
```

> You can specify trusted boot nodes that you'd like to use by pass in a flag during init: `--boot-nodes ed25519:4k9csx6zMiXy4waUvRMPTkEtAS2RFKLVScocR5HwN53P@34.73.25.182:24567,ed25519:4keFArc3M4SE1debUQWi3F1jiuFZSWThgVuA2Ja2p3Jv@34.94.158.10:24567,ed25519:D2t1KTLJuwKDhbcD9tMXcXaydMNykA99Cedz7SkJkdj2@35.234.138.23:24567,ed25519:CAzhtaUPrxCuwJoFzceebiThD9wBofzqqEMCiupZ4M3E@34.94.177.51:24567`

> You can skip the `--home` argument if you are fine with the default working directory in `~/.near`. If not, pass your preferred location.

This command will create the required directory structure and will generate `config.json`, `node_key.json`, and `genesis.json` for `testnet` network.
- `config.json` - Configuration parameters which are responsive for how the node will work.
- `genesis.json` - A file with all the data the network started with at genesis. This contains initial accounts, contracts, access keys, and other records which represents the initial state of the blockchain.
- `node_key.json` -  A file which contains a public and private key for the node. Also includes an optional `account_id` parameter which is required to run a validator node (not covered in this doc).
- `data/` -  A folder in which a NEAR node will write it's state.

> **Heads up**
> The genesis file for `testnet` is big (8GB +) so this command will be running for a while and no progress will be shown.

### 4. Replacing the `config.json` {#4-replacing-the-configjson}

From the generated `config.json`, there two parameters to modify:
- `boot_nodes`: If you had not specify the boot nodes to use during init in Step 3, the generated `config.json` shows an empty array, so we will need to replace it with a full one specifying the boot nodes.
- `tracked_shards`: In the generated `config.json`, this field is an empty empty. You will have to replace it to `"tracked_shards": [0]`

To replace the `config.json`, run the following commands:

```bash
$ rm ~/.near/config.json
$ wget https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/testnet/config.json -P ~/.near/
```

### Configuration Update {#configuration-update}

The `config.json` should contain the following fields. Currently, NEAR testnet and mainnet have 4 shards. To track all 4 shards, use `"tracked_shards": [0]`. In the future, there will be the possibility to track different or multiple shards.

```
{
  ...
  "archive": true,
  "tracked_shards": [0],
  ...
}
```

Please make sure that the node is not running while changing the `config.json`.

Once the config has been changed, you can restart the node and the node will start syncing new archival data. In the case where you want the full archival history, you can delete the data dir and start the node from scratch syncing full history or use one of the latest backups containing the data directory snapshot which can be copied under the near home dir (default: ~/.near/data).

### 5. Get data backup {#5-get-data-backup}

The node is ready to be started. However, you must first sync up with the network. This means your node needs to download all the headers and blocks that other nodes in the network already have.

```bash
$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/testnet/archive/latest .
$ LATEST=$(cat latest)
$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/testnet/archive/$LATEST ~/.near/data
```

### 6. Run the node {#6-run-the-node}
To start your node simply run the following command:

```bash
$ ./target/release/neard --home ~/.near run
```

That's all. The node is running you can see log outputs in your console. It will download a bit of missing data since the last backup was performed but it shouldn't take much time.

## `mainnet` {#mainnet}

### 1. Clone `nearcore` project from GitHub {#1-clone-nearcore-project-from-github-1}

First, clone the [`nearcore` repository](https://github.com/near/nearcore).

```bash
$ git clone https://github.com/near/nearcore
$ cd nearcore
$ git fetch origin --tags
```

Next, checkout the release branch you need (recommended) if you will not be using the default `master` branch. Please check the [releases page on GitHub](https://github.com/near/nearcore/releases) for the latest release.

For more information on choosing between `master` and latest release branch [ [click here](/validator/compile-and-run-a-node#choosing-your-nearcore-version) ].

```bash
$ git checkout tags/1.26.1 -b mynode
```

### 2. Compile `nearcore` binary {#2-compile-nearcore-binary-1}

In the `nearcore` folder run the following commands:

```bash
$ make release
```

This will start the compilation process. It will take some time
depending on your machine power (e.g. i9 8-core CPU, 32 GB RAM, SSD
takes approximately 25 minutes). Note that compilation will need over
1 GB of memory per virtual core the machine has. If the build fails
with processes being killed, you might want to try reducing number of
parallel jobs, for example: `CARGO_BUILD_JOBS=8 make release`.

By the way, if you‚Äôre familiar with Cargo, you could wonder why not
run `cargo build -p neard --release` instead.  While this will produce
a binary, the result will be a less optimized version.  On technical
level, this is because building via `make neard` enables link-time
optimisation which is disabled by default.

The binary path is `target/release/neard`

### 3. Initialize working directory {#3-initialize-working-directory-1}

The NEAR node requires a working directory with a couple of configuration files. Generate the initial required working directory by running:

```bash
$ ./target/release/neard --home ~/.near init --chain-id mainnet --download-genesis --download-config
```

> You can specify trusted boot nodes that you'd like to use by pass in a flag during init: `--boot-nodes ed25519:86EtEy7epneKyrcJwSWP7zsisTkfDRH5CFVszt4qiQYw@35.195.32.249:24567,ed25519:BFB78VTDBBfCY4jCP99zWxhXUcFAZqR22oSx2KEr8UM1@35.229.222.235:24567,ed25519:Cw1YyiX9cybvz3yZcbYdG7oDV6D7Eihdfc8eM1e1KKoh@35.195.27.104:24567,ed25519:33g3PZRdDvzdRpRpFRZLyscJdbMxUA3j3Rf2ktSYwwF8@34.94.132.112:24567,ed25519:CDQFcD9bHUWdc31rDfRi4ZrJczxg8derCzybcac142tK@35.196.209.192:24567`

> You can skip the `--home` argument if you are fine with the default working directory in `~/.near`. If not, pass your preferred location.

This command will create the required directory structure by generating a `config.json`, `node_key.json`, and downloads a `genesis.json` for `mainnet`.
- `config.json` - Configuration parameters which are responsive for how the node will work.
- `genesis.json` - A file with all the data the network started with at genesis. This contains initial accounts, contracts, access keys, and other records which represents the initial state of the blockchain.
- `node_key.json` -  A file which contains a public and private key for the node. Also includes an optional `account_id` parameter which is required to run a validator node (not covered in this doc).
- `data/` -  A folder in which a NEAR node will write it's state.

### 4. Replacing the `config.json` {#4-replacing-the-configjson-1}

From the generated `config.json`, there two parameters to modify:
- `boot_nodes`: If you had not specify the boot nodes to use during init in Step 3, the generated `config.json` shows an empty array, so we will need to replace it with a full one specifying the boot nodes.
- `tracked_shards`: In the generated `config.json`, this field is an empty empty. You will have to replace it to `"tracked_shards": [0]`

To replace the `config.json`, run the following commands:

```bash
$ rm ~/.near/config.json
$ wget https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/config.json -P ~/.near/
```

### Configuration Update {#configuration-update-1}

The `config.json` should contain the following fields. Currently, NEAR testnet and mainnet have 4 shards. To track all 4 shards, use `"tracked_shards": [0]`. In the future, there will be the possibility to track different or multiple shards.

```
{
  ...
  "archive": true,
  "tracked_shards": [0],
  ...
}
```

Please make sure that the node is not running while changing the `config.json`.

Once the config has been changed, you can restart the node and the node will start syncing new archival data. In the case where you want the full archival history, you can delete the data dir and start the node from scratch syncing full history or use one of the latest backups containing the data directory snapshot which can be copied under the near home dir (default: ~/.near/data).

### 5. Get data backup {#5-get-data-backup-1}

The node is ready to be started. However, you must first sync up with the network. This means your node needs to download all the headers and blocks that other nodes in the network already have.

```bash
$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/mainnet/archive/latest .
$ LATEST=$(cat latest)
$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/mainnet/archive/$LATEST ~/.near/data
```

### 6. Run the node {#6-run-the-node-1}
To start your node simply run the following command:

```bash
$ ./target/release/neard --home ~/.near run
```

That's all. The node is running and you can see log outputs in your console. It will download a bit of missing data since the last backup was performed but it shouldn't take much time.

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/archival/split-storage-archival.md ---
---
id: split-storage-archival
title: Split Storage for NEAR Archival Nodes
sidebar_label: Split Storage
sidebar_position: 4
description: Split Storage for NEAR Archival Nodes
---

This page presents the Split Storage option for NEAR Archival nodes.

## Introduction {#introduction}

With the 1.35.0 release we are rolling out split storage, a new option for storage management that is mainly targeted at archival nodes.. Split storage allows nodes to reduce storage costs and improve block production performance by splitting local storage into two separate areas: a hot and a cold database .  The hot database is smaller in size and stores all of the data from the most recent epochs. The cold database is larger, and it stores all historical data for older epochs. Hot and cold databases can be independently placed on separate hardware storage, allowing configurations such as using hot storage on a fast NVMe drive, and placing cold storage on a cheaper HDD drive.

In split storage mode, the Near Client only works with a smaller hot database to produce blocks, which results in increased performance. Cold database is not accessed for reads during normal block production and is only read when historical data is specifically requested. Thus, we recommend keeping the cold database on cheaper and slower drives such as an HDD and only optimize speed for the hot database, which is about 10 times smaller.

Split storage is disabled by default, and can be enabled with a config change and going through a migration process that requires manual steps. We have several choices for the migration:
* Use Pagoda-provided S3 snapshots of nodes that have split-storge configured.
* Do a manual migration using S3 snapshots of the existing RPC single database
* Do a manual migration using your own buddy RPC node

| Migration option                                    | Pros                            | Cons                                                   |
| --------------------------------------------------- | ------------------------------- | ------------------------------------------------------ |
| Pagoda-provided S3 snapshots of split-storage nodes | Fastest. Little to no downtime. | Requires trust  in migration performed by Pagoda nodes |
| Manual migration + S3 RPC snapshots                 | No need for extra node. Cold storage is initialized in a trustless way. |  Requires trust in Pagoda RPC snapshots. The node will be out of sync at the end of the migration and will need to block sync several epochs. Migration takes days and you cannot restart your node during that time. |
| Manual migration + your own node                    | Trustless. Little to no downtime | Requires an extra RPC node with bigger storage. Migration takes days and you cannot restart your node during that time. |

## Important config fields {#config}
```json
{
    "archive": true,
    "save_trie_changes": <whether to store TrieChanges column need for garbage collection>,
    "store": {
      "path": <path to hot db, relative to near home dir, "data" by default>
    },
    "cold_store": { # description of cold db, if such is present
      "path": <path to cold db, relative to near home dir, "cold-data" by default>
    },
    "split_storage": {
      "enable_split_storage_view_client": <whether to query cold storage in view client request, essentially making node act as archival, not just store all archival information>
    }
}
```

Example:
```json
{
  "archive": true,
  "save_trie_changes": true,
  "store": {
    "path": "hot-data",
    ...
  },
  "cold_store": {
    "path": "cold-data",
    ...
  },
  "split_storage": {
    "enable_split_storage_view_client": true
  },
  ...
}
```

## Using Pagoda-provided S3 split-storage snapshots {#S3 migration}
1. Find latest snapshot
```bash
chain=testnet/mainnet
aws s3 --no-sign-request cp s3://near-protocol-public/backups/$chain/archive/latest_split_storage .
latest=$(cat latest_split_storage)
```
2. Download cold and hot databases
```bash
NEAR_HOME=/home/ubuntu/.near
aws s3 --no-sign-request cp --recursive s3://near-protocol-public/backups/$chain/archive/$latest/ $NEAR_HOME
```
This will download cold database to `$NEAR_HOME/cold-data`, and hot database to `$NEAR_HOME/hot-data`
3. Make changes to your config.json
```bash
cat <<< $(jq '.save_trie_changes = true | .cold_store = .store | .cold_store.path = "cold-data" | .store.path = "hot-data" | .split_storage.enable_split_storage_view_client = true' $NEAR_HOME/config.json) > $NEAR_HOME/config.json
```
4. Restart the node

### If your node is out of sync after restarting from the latest snapshot {#syncing node}
Downloading the cold database can take a long time (days). In this time your database can become very far behind the chain.
You may wait for your node to catchup, but it still can take a long time.
One alternative approach is to sync up your node by only downloading fresh hot database, and let the neard binary do the work of bringing cold database up to speed.
Another option is to use an rpc database instead of hot. You will need to run some extra commands, but you will have database options (as rpc dbs are uploaded twice a day) and can sync up faster.

This process should make your node "jump" to the head of a new snapshot.
Your cold database will need some time to copy everything new from the fresh hot database.
If after a day your node is still not in sync, you can repeat the process.

#### Fast-forward node via downloading fresh hot database {#hot fast forward}
1. Check the head of cold database (your node has to be running for this step)
```bash
curl --silent  0.0.0.0:3030/metrics | grep cold_head_height
```
2. Check the time of creation of this block in any explorer of your choice
3. Check available split storage snapshots
```bash
chain=testnet/mainnet
aws s3 --no-sign-request ls s3://near-protocol-public/backups/$chain/archive/
```
This list contains both split storage snapshots and legacy archival snapshots. To check that some snapshot is for split storage run
```bash
timestamp=<snapshot timestamp>
aws s3 --no-sign-request ls s3://near-protocol-public/backups/$chain/archive/$timestamp/ | head -n3
```
If the snapshot is for legacy node, you should see some sst files. If the snapshot is for split storage node, you should see
```bash
                           PRE cold-data/
                           PRE hot-data/
```
4. Select split storage snapshot with a timestamp roughly 48 hours after the time of creation of the cold head block.
5. Stop your node.
6. Replace your local database with hot database from selected snapshot
```bash
NEAR_HOME=/home/ubuntu/.near
HOT_DATA=$NEAR_HOME/hot-data
rm -r $HOT_DATA
aws s3 --no-sign-request cp --recursive s3://near-protocol-public/backups/$chain/archive/$timestamp/hot-data $HOT_DATA
```
7. Restart your node.
8. Check that head of the cold database is progressing
```bash
for i in {0..5}
do
    curl --silent  0.0.0.0:3030/metrics | grep cold_head_height
    sleep 60`
done
```

#### Fast-forward node via downloading fresh rpc database {#rpc fast forward}
1. Check the head of cold database (your node has to be running for this step)
```bash
curl --silent  0.0.0.0:3030/metrics | grep cold_head_height
```
2. Check the time of creation of this block in any explorer of your choice
3. Check available rpc snapshots
```bash
chain=testnet/mainnet
aws s3 --no-sign-request ls s3://near-protocol-public/backups/$chain/rpc/
```
4. Select rpc snapshot with a timestamp roughly 48 hours after the time of creation of the cold head block.
Or use any snapshot that fully covers the epoch of cold head.
For public snapshot 48 hours used as 12h * (5 - 1), because we roughly estimate an epoch to last 12 hours, and the snapshot nodes are set up to keep 5 epochs.
If you have some rpc snapshot that keeps 10 epochs, for example, you may use it if it's head was created ~4.5 days after cold head.
If your snapshot is incompatible with your cold database you are going to see it during the last step, because in that case cold head would not increase (or even wouldn't be present in logs).
5. Stop your node.
6. Replace your local database with rpc database snapshot
```bash
NEAR_HOME=/home/ubuntu/.near
HOT_DATA=$NEAR_HOME/hot-data
rm -r $HOT_DATA
aws s3 --no-sign-request cp --recursive s3://near-protocol-public/backups/$chain/rpc/$timestamp/ $HOT_DATA
```
7. Turn an rpc snapshot into a hot snapshot. All you need to do is change the `DbKind` of the database.
This can be done with
```bash
NEAR_HOME=/home/ubuntu/.near
CONFIG=$NEAR_HOME/config.json
CONFIG_BKP=$NEAR_HOME/config.json.backup

cp $CONFIG $CONFIG_BKP # preserving your old config
cat <<< $(jq '.cold_store = null | .archive = false' $CONFIG) > $CONFIG # adjust config to open hot-data as rpc db
./neard --home $NEAR_HOME database change-db-kind --new-kind Hot change-hot # change DbKind of hot-data to Hot
cp $CONFIG_BKP $CONFIG # return original config
```
8. Restart your node.
9. Check that head of the cold database is progressing
```bash
for i in {0..5}
do
    curl --silent  0.0.0.0:3030/metrics | grep cold_head_height
    sleep 60`
done
```

## Doing the migration manually (based on an S3 RPC snapshot or your own node) {#manual migration}
Note: We prepared an optimistic migration script that we have used several times to migrate our nodes.
It follows a second scenario of using manual migration + S3 snapshots.
https://github.com/near/nearcore/blob/master/scripts/split_storage_migration.sh  
This script relies on our internal infrastructure, you can find a list of assumptions commented at the top of the file.
We do not recommend using this script as is, but it is a good reference point.

To perform a manual migration you first need to decide whether you can afford the node being out of sync.
If not, you should set up a second non-archival (rpc) node and increase its `gc_num_epochs_to_keep` to 100 (this is just an example of a ridiculously large number).
The second node will now stop performing garbage collection, and its storage size will grow.
This is needed for smooth transition between legacy archival storage and split storage.

1. If you decided to use your own node to support migration, set up an RPC node with `gc_num_epochs_to_keep` set to 100.
2. Next steps concern your archival node.  
Enable `save_trie_changes` in Neard configuration json.
```bash
NEAR_HOME=/home/ubuntu/.near
cp $NEAR_HOME/config.json $NEAR_HOME/config.json.bkp1
cat <<< $(jq '.save_trie_changes = true' $NEAR_HOME/config.json) > $NEAR_HOME/config.json
```
3. Restart neard
4. Verify neard started fine with the new config option enabled.
5. Wait at least 100 new blocks to be produced.
6. Setup cold storage configuration json part and set the path to desired location.  
Note that `.cold_store.path` value should be relative to `$NEAR_HOME`, so in example below the path used by neard for cold-storage is `/home/ubuntu/.near/cold-data`.  
Command:
```bash
NEAR_HOME=/home/ubuntu/.near
cp $NEAR_HOME/config.json $NEAR_HOME/config.json.bkp2
cat <<< $(jq '.cold_store = .store | .cold_store.path = "cold-data"' $NEAR_HOME/config.json) > $NEAR_HOME/config.json
```
7. Restart neard. This will trigger the cold database migration process.
8. Verify neard started fine with the new config option enabled.
9. Wait enough time for the migration to complete. **This migration takes several days.**  
Ensure that neard is not restarted because the migration process cannot resume and all progress made so far will be lost.  
During migration you'll be seeing high cold disk usage because effectively we are moving data from archival db to cold storage.  
Some useful command to check the progress:
```bash
curl --silent  0.0.0.0:3030/metrics | grep near_cold_migration_initial_writes_time_count
```
Most of the time is spent on `State` column migration. Each other column should migrate in hours.
To check on per-column progress look at `near_cold_migration_initial_writes` metric.
```bash
curl --silent  0.0.0.0:3030/metrics | grep near_cold_migration_initial_writes
```
It appears when the process starts migrating a specific column, and stops growing for that column when the column migration is finished.  
10. Once the migration process is complete, the disk usage will decrease and `cold_head_height` value will surface in node metrics and will continue to increase.
This means that initial migration is over and you can safely restart the node.
```bash
curl --silent  0.0.0.0:3030/metrics | grep cold_head_height
```
11. Stop neard process.
12. If you set up your own RPC node, stop it and download its database to the hot data folder in `$NEAR_HOME`.
Otherwise, download a fresh RPC DB backup to the hot data folder in `$NEAR_HOME`.
13. This step relies on your hot database and your cold database having blocks in common.
If you properly set up your own RPC node as the first step, this should be true.
If you are using S3 snapshot, the condition might not hold. In this case, this step will fail. You will need to restart the neard process and wait until the `cold_head_height` metric reports large enough value indicating the overlap between cold and hot databases.
This command will open two dbs specified in your config file, plus additional db provided in the command line. It will check that db provided in the command line is compatible with the current storage and can be used as a replacement hot database, and make some adjustments.
```bash
NEAR_HOME=/home/ubuntu/.near
/home/ubuntu/neard --home $NEAR_HOME cold-store prepare-hot  --store-relative-path='hot-data'
```
14. Set the hot database path and enable split storage in neard configuration file
```bash
NEAR_HOME=/home/ubuntu/.near
cp $NEAR_HOME/config.json $NEAR_HOME/config.json.bkp3
cat <<< $(jq '.store.path = "hot-data" | .split_storage.enable_split_storage_view_client = true' $NEAR_HOME/config.json) > $NEAR_HOME/config.json
```
15. Restart neard.
If you chose to use S3 snapshot to initialize the hot database, your node may be out of sync for a while, due to your hot database becoming out-of-date, while you were waiting for cold head to increase enough.
Verify neard started fine with the new config option enabled.
You can also post a request about split storage status and check that `.result.hot_db_kind` is `Hot`.
```bash
curl -H "Content-Type: application/json" -X POST --data '{"jsonrpc":"2.0","method":"EXPERIMENTAL_split_storage_info","params":[],"id":"dontcare"}'  0.0.0.0:3030
```

## Important metrics {#metrics}
The metrics below can be used to monitor the way split storage works

`near_cold_head_height` ‚Äì height of cold storage.
`near_block_height_head` ‚Äì height of hot storage.
These two metrics should be very close to each other.

`near_rocksdb_live_sst_files_size` ‚Äì size of column in hot storage.
`near_rocksdb_live_sst_files_size_cold` ‚Äì size of column in cold storage.

`near_cold_store_copy_result` ‚Äì status of the continuous block-by-block migration that is performed in background to block production and can be interrupted.

Size of the hot db ‚Äì should be close to the size of an RPC node‚Äôs storage.
Size of the cold db ‚Äì should be close to the size of a legacy archival node‚Äôs storage. 

'''
'''--- docs/bug-report/_category_.json ---
{
  "position": 7,
  "label": "Submit Feature Request and Bug Report",
  "collapsible": true,
  "collapsed": true,
  "link": {
    "type": "generated-index",
    "slug": "bug-report",
    "title": "Feature Request and Bug Report"
  }
}

'''
'''--- docs/bug-report/feature-request-and-bug-report.md ---
---
id: feature-request-and-bug-report
title: Feature Request and Bug Report
sidebar_label: Feature Request and Bug Report
description: NEAR Node Feature Request and Bug Report
---

<blockquote class="info">
<strong>Did You Know?</strong><br /><br />

As a node operator, you are welcome to create feature requests and submit bug reports on [Github](https://github.com/near/nearcore/issues) to improve the experience of running a node. Head to [`nearcore`](https://github.com/near/nearcore/issues) repository on Github to open an issue, and don't forget to tag the issue with the `nodeX` tag to indicate that this issue is related to `Node Experience`.

</blockquote>

## Feature Request and Bug Report {#feature-request-and-bug-report}

The NEAR team is actively solicitating feedback from the Node and Validator Community, and offers a process for the community to engage in feature / enhancement requests and to submit bug reports. Besides the existing NEAR Validator channels, the NEAR team is introducing a formal process for feature requests and bug reports.

With respect to the experience of operating a NEAR node, all bugs and feature enhancements are publicly tracked in the Github project tracker [`Node Experience`](https://github.com/orgs/near/projects/42). Node operators are welcome to create new issues for features and bugs, and to add these issues into the [Github project tracker](https://github.com/orgs/near/projects/42).

- **New Feature / Enhancement Request:**
  - Please create a [`Github issue`](https://github.com/near/nearcore/issues)
  - The issue will be reviewed and filtered through `Incoming Requests` column in the Github project [`Node Experience`](https://github.com/orgs/near/projects/42), where they will be groomed and slated for development based on priority

- **Bug Report:**
  - For node operator issues, please create a Zendesk issue here https://near-node.zendesk.com/hc/en-us/requests/new for the Node team, and try to attach your logs.

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/intro/_category_.json ---
{
  "position": 1,
  "label": "Introduction to NEAR Nodes",
  "collapsible": true,
  "collapsed": true,
  "link": {
    "type": "generated-index",
    "slug": "intro",
    "title": "Introduction"
  }
}

'''
'''--- docs/intro/keys.md ---
---
id: keys
title: Key Management
sidebar_label: Key Management
sidebar_position: 4
description: NEAR Node Key Management
---

## What are Keys? {#what-are-keys}

In public key cryptography, there exists a key pair, one public and one private, to sign and send verifiable transactions across the network. NEAR takes the common approach of using public keys for identity and private keys for signatures. Internally the NEAR platform uses ed25519, one of several "elliptic curves" that produce secure cryptographic results quickly. Specifically, we use `tweetnacl` in JavaScript and `libsodium` in Rust.

## Are there Different Types of Keys? {#are-there-different-types-of-keys}

There are 3 types of key pairs on the NEAR platform:

- Signer Keys (e.g. account keys, access keys)
- Validator Keys
- Node Keys

**Signer Keys** are the ones we all know and love. They're used by accounts on the network to sign transactions like `sendMoney` and `stake` before sending these transactions to the network. Signer keys are not related to running a node in any way. End users who sign up through the [NEAR Wallet](https://wallet.near.org/) get their own signer keys, for example. These are the keys that humans think about and keep safe.

There are two flavors of signer keys currently available, `FullAccess` keys and `FunctionCall` keys. The first has unrestricted control to "act on behalf of an account" (as used by NEAR CLI and NEAR Wallet to get things done for you). The second is limited to contract storage and compute. Both flavors of keys can be revoked by the account holder. There is no limit to the flavors of keys that the NEAR platform can handle so we can easily imagine keys for voting, shopping, conducting official business, etc. each with their own access controls on our data, programmable time limits, etc. But keep in mind that you do have to pay rent on keys issued to your account.

**Validator Keys** are used by validators (people and companies who are committed to maintaining the integrity of the system) to support their work of validating blocks and chunks on the network, nothing more. The human validators don't think about these keys beyond creating them and resetting them. Once added to a validator's node, validator keys are used by the node to do their thing of validating blocks and chunks. As a convenience to validators, validator keys are currently produced by a script at node startup if they don't already exist (in the case of NEAR Stake Wars, the `start_stakewars.py` script) but this may change.

**Node Keys** are something no humans on the network think about except core contributors to the platform. These keys are used internally by a node to sign low-level communications with other nodes in the network like sending block headers or making other verifiable requests. Node keys are currently provided to a node at startup by a script. In the case of NEAR Stake Wars it's the `start_stakewars.py` script that produces these keys for now, but this may change.

## Can Keys be Changed? {#can-keys-be-changed}

Yes, but only in that keys can be _reset_ (ie. regenerated as a new key pair). If a private key is lost or compromised somehow then a new key pair must be generated. This is just the nature of secure keys.

**Signers** can create new keys and revoke existing keys at will. NEAR Wallet also supports key recovery via SMS or seed phrase which makes it convenient to move signer keys from one computer to another, for example.

**Validators** have the option to reset their validator keys at any time but it makes sense to avoid resetting validator keys while staking. To reset their keys, a human validator stops their node, changes their validator key and restarts the node. All new validator output will be signed by these new keys.

**Nodes** should not need to reset their node keys.

<blockquote class="info">
<strong>Did you know?</strong><br /><br />

As a brief word on the NEAR runtime, the subsystem that manages state transitions on the blockchain (ie. keeping things moving from one block to the next), it's worth understanding that the movement of the system happens in stages, called epochs, during which the group of validators does not change. The [Nightshade whitepaper](https://near.org/papers/nightshade) introduces epochs this way: "the maintenance of the network is done in epochs, where an epoch is a period of time on the order of days." and there's much more detail in the paper.

At the beginning of each epoch, some computation produces a list of validators for the very next epoch (not the one that just started). The input to this computation includes all validators that have "raised their hand" to be a validator by staking some amount over the system's staking threshold. The output of this computation is a list of the validators for the very next epoch.

When a validator is elected during an epoch, they have the opportunity to stake (ie. put some skin in the game in the form of tokens) in support of their intent to "behave" while keeping their node running so others can rent storage and compute on it. Any foul play on the part of the validator that is detected by the system may result is a slashing event where the validator is marked as out of integrity and forfeit their stake to be redistributed among other validators.

</blockquote>

<blockquote class="warning">
<strong>Heads up</strong><br /><br />

If validator keys are changed _during an epoch in which the validator is staking_, the validator's output will be rejected since their signature will not match (new keys). This means the validator will, by the end of the epoch, not be able to meet the minimum validator output threshold and lose their position as a recognized validator. Their stake will be returned to them.

</blockquote>

For concrete examples of keys being used as identifiers, you can see a list of validators and active nodes on various NEAR networks here:

- NEAR testnet (staking currently disabled)
  - `https://rpc.testnet.near.org/status`
  - `https://rpc.testnet.near.org/network_info`

- NEAR betanet
  - `https://rpc.betanet.near.org/status`
  - `https://rpc.betanet.near.org/network_info`

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/intro/snapshots.md ---
---
id: node-data-snapshots
title: Node Data Snapshots
sidebar_label: Node Data Snapshots
sidebar_position: 3
description: Node Data Snapshots
---

**Notice: The AWS S3 endpoints will be inaccessible starting January 1st, 2024. Please use the updated Cloudfront endpoints for snapshot downloads to ensure uninterrupted service.**

Before you start running a node, you must first sync with the network. This means your node needs to download all the headers and blocks that other nodes in the network already have. You can speed up this process by downloading the latest data snapshots from a public cloudfront endpoint.

Here are the available snapshots directories based on node type and network. Please note that the snapshots are updated every 12 hours.

| Node Type and Network| S3 Path                                                                  |
| -------------------- | ------------------------------------------------------------------------ |
| RPC testnet          | `https://dcf58hz8pnro2.cloudfront.net/backups/testnet/rpc/latest`        |
| RPC mainnet          | `https://dcf58hz8pnro2.cloudfront.net/backups/mainnet/rpc/latest`        |
| Archival testnet     | `https://dcf58hz8pnro2.cloudfront.net/backups/testnet/archive/latest`    |
| Archival mainnet     | `https://dcf58hz8pnro2.cloudfront.net/backups/mainnet/archive/latest`    |

----
Prerequisite:

Recommended download client [`rclone`](https://rclone.org). 
This tool is present in many Linux distributions. There is also a version for Windows.
And its main merit is multithread.
You can [read about it on](https://rclone.org)

First, install rclone:
```
$ sudo apt install rclone
```
Next, prepare config, so you don't need to specify all the parameters interactively:
```
mkdir -p ~/.config/rclone
touch ~/.config/rclone/rclone.conf
```

, and paste the following config into `rclone.conf`:
```
[near_cf]
type = s3
provider = AWS
download_url = https://dcf58hz8pnro2.cloudfront.net/
acl = public-read
server_side_encryption = AES256
region = ca-central-1

```
Commands to run:
```
chain="mainnet"  # or "testnet"
kind="rpc"       # or "archive"
rclone copy --no-check-certificate near_cf://near-protocol-public/backups/${chain:?}/${kind:?}/latest ./
latest=$(cat latest)
rclone copy --no-check-certificate --progress --transfers=6 \
  near_cf://near-protocol-public/backups/${chain:?}/${kind:?}/${latest:?} ~/.near/data
```

----

**Notice: The following section are the older instructions to download snapshots from s3. Direct s3 access will be deprecated starting January 1, 2024.**

| Node Type and Network| S3 Path                                                       |
| -------------------- | ------------------------------------------------------------- |
| RPC testnet          | s3://near-protocol-public/backups/testnet/rpc/latest          |
| RPC mainnet          | s3://near-protocol-public/backups/mainnet/rpc/latest          |
| Archival testnet     | s3://near-protocol-public/backups/testnet/archive/latest      |
| Archival mainnet     | s3://near-protocol-public/backups/mainnet/archive/latest      |

----

If you've [initialized the working directory for your node](/validator/compile-and-run-a-node#3-initialize-working-directory-1) without passing in a preferred location, the default working directory for your node is `~/.near`. It is recommended that you wget and untar into a `data` folder under `~/.near/`. The new `~/.near/data` is where your node will store historical states and write its state. To use the default location, run the following commands.

First, please install AWS CLI:
```bash
$ sudo apt-get install awscli -y
```

Then, download the snapshot using the AWS CLI:
```bash
$ chain="mainnet"  # or "testnet"
$ kind="rpc"       # or "archive"
$ aws s3 --no-sign-request cp "s3://near-protocol-public/backups/${chain:?}/${kind:?}/latest" .
$ latest=$(cat latest)
$ aws s3 sync --delete --no-sign-request  "s3://near-protocol-public/backups/${chain:?}/${kind:?}/${latest:?}" ~/.near/data
```

For a faster snapshot download speed, use s5cmd, the download accelerator for S3 written in Go. For download instruction, please see https://github.com/peak/s5cmd.

Another alternative is [`rclone`](https://rclone.org). 
This tool is present in many Linux distributions. There is also a version for Windows.
And its main merit is multithread.
You can [read about it on](https://rclone.org)

First, install rclone:
```
$ sudo apt install rclone
```
Next, prepare config, so you don't need to specify all the parameters interactively:
```
mkdir -p ~/.config/rclone
touch ~/.config/rclone/rclone.conf
```

, and paste the following config into `rclone.conf`:
```
[near_s3]
type = s3
provider = AWS
location_constraint = EU
acl = public-read
server_side_encryption = AES256
region = ca-central-1
```
Next step very similar with aws-cli. 
```
chain="mainnet"  # or "testnet"
kind="rpc"       # or "archive"
rclone copy --no-check-certificate near_s3://near-protocol-public/backups/${chain:?}/${kind:?}/latest ./
latest=$(cat latest)
rclone copy --no-check-certificate --progress --transfers=6 \
  near_s3://near-protocol-public/backups/${chain:?}/${kind:?}/${latest:?} ~/.near/data
```

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/intro/types-of-node.md ---
---
id: node-types
title: Node Types
sidebar_label: Node Types
sidebar_position: 2
description: Types of NEAR Nodes
---

You can run three different types of node - Validator Node, RPC Node, and Archival Node.

### Validator Node {#validator-node}

Validator nodes are the operators of the NEAR blockchain and are essential to the health of the network. Validator nodes participate in the consensus and produce blocks and/or chunks. You can see a real-time view of NEAR network validator nodes on the [NEAR Explorer](https://explorer.near.org/nodes/validators).

### RPC Node {#rpc-node}

RPC nodes are RPC service providers that provide public RPC endpoints for developers to use. The NEAR Foundation currently maintains a public RPC endpoint `http://rpc.mainnet.near.org/` that is free for everyone to use. However, any participants are encouraged to run their own RPC node and offer RPC services through [an Open Source & Public Goods grant from the NEAR Foundation](https://near.org/blog/refining-near-foundations-grant-approach/). For more information, please check out Community section in the documentation and reach out in the Validator Channels on [Discord](https://discord.gg/ZMPr3VB) and on [Telegram](https://t.me/near_validators).

### Archival Node {#archival-node}

Archival nodes store full blockchain data, and build an archive of historical states. These nodes are useful for block explorers, chain analysis, and infrastructure providers.

See [API Setup](https://docs.near.org/api/rpc/setup) section for archival RPC nodes endpoints.

> Got a question?
> <a href="https://stackoverflow.com/questions/tagged/nearprotocol">
> <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/intro/what-is-a-node.md ---
---
id: what-is-a-node
title: What is a Node
sidebar_label: What is a Node
sidebar_position: 1
description: What is a NEAR Node and Why Run a Node
---

NEAR Protocol runs on a collection of publicly maintained computers (or "nodes"). All nodes are running the same `nearcore` codebase with the latest releases available on [GitHub](https://github.com/near/nearcore/releases/). In the following section, we will introduce three types of nodes.

It is important to keep in mind all nodes run the same codebase, with different configurations. As such, we have split up the documentation for running different types of node into sections specific to the type of nodes.

## Why run a Node? {#why-run-a-node}

You may decide to run a node of your own for a few reasons:

- To join a network as a validator running a validator node. Running a validator node is a public good and you are effectively securing the NEAR network and earning rewards.
- To run applications that heavily depend on RPC performance and/or availability.
- To develop and deploy contracts on a local (independent and isolated) node (sometimes called "localnet"). (‚Ä†)
- To quickly extract blockchain data that can be used for chain analytics, block explorer, etc.

_( ‚Ä† ) `localnet` would be the right choice if you prefer to avoid leaking information about your work during the development process since `testnet` and `betanet` are *public* networks. `localnet` also gives you total control over accounts, economics and other factors for more advanced use cases (ie. making changes to `nearcore`)._

## Types of Network {#types-of-network}

There are a few different networks to potentially run a node. Each network operates with its own independent validators and unique state. To find out more, head to the [network overview](https://docs.near.org/concepts/basics/networks).

* [`mainnet`](https://docs.near.org/concepts/basics/networks#mainnet)
* [`testnet`](https://docs.near.org/concepts/basics/networks#testnet)
* [`betanet`](https://docs.near.org/concepts/basics/networks#betanet)
* [`localnet`](https://docs.near.org/concepts/basics/networks#localnet)

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/maintenance/_category_.json ---
{
  "position": 6,
  "label": "Maintain Your Node",
  "collapsible": true,
  "collapsed": true,
  "link": {
    "type": "generated-index",
    "slug": "maintenance",
    "title": "Maintenance and Network Upgrade"
  }
}

'''
'''--- docs/maintenance/community-channels.md ---
---
id: community-channels
title: Node Operator Community Channels
sidebar_label: Node Operator Community Channels
sidebar_position: 1
description: Node Operator Community Channels
---

# Node Operator Community Channels {#near-node-community-channels}

NEAR Protocol will communicate with node operators using these channels. If you are running a NEAR node, please join these channels, so you will be notified.

1. Releases are announced on [Discord](https://discord.gg/ZMPr3VB), [Telegram](https://t.me/near_validators), [Twitter](https://twitter.com/NEARChainStatus), and by [email](http://eepurl.com/heLZhb). Please join the these channels, follow up along on twitter, and sign up for release email alerts here: http://eepurl.com/heLZhb.

2. Technical support and troubleshooting by the NEAR team are available in the Validator Channels on [Discord](https://discord.gg/ZMPr3VB) and on [Telegram](https://t.me/near_validators), and by the Open Shards Alliance on [Discord](https://discord.gg/t9Kgbvf).

3. Discussions on upcoming changes and early ideation are on [gov.near.org](https://gov.near.org/c/staking-delegation/5).

Releases of `nearcore` are on Github repository of [`nearcore`](https://github.com/near/nearcore/issues).

Nearcore future release dates are available on [NEAR Community Google Calendar](https://calendar.google.com/calendar/u/0/embed?src=nearprotocol.com_ltk89omsjnc2ckgbtk6h9157i0@group.calendar.google.com).

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/maintenance/db-migrations.md ---
---
id: db-migrations
title: Safe Database Migrations
sidebar_label: Safe Database Migrations
description: How to do database migrations without corrupting the database
sidebar_position: 3
---

# Database Migrations

## Background

Nodes use [RocksDB](https://rocksdb.org/) database to store blockchain
information locally. Some node releases need to change the format of data stored
in that database, for example to enable new protocol features.  The process of
converting the data to a new format is called **database migration**. Data
formats are also numbered and this is called **database version**.

Node binary can print its supported protocol version and the database version it needs.

For example, here we can see that the node expects database version 28, as indicated by `db 28`:

```
$ ./target/release/neard
neard (release 1.22.0) (build 5a6fb2bd2) (protocol 48) (db 28)
NEAR Protocol Node
```

If an existing database version is lower that what the binary needs, the node
performs a **database migration** at startup. Here is an example of running a
node version `1.24.0` using an instance of database created by a node version
`1.21.1`. You can see several DB migrations triggering sequentially.

```
$ ./target/release/neard
INFO neard: Version: 1.24.0, Build: crates-0.11.0-80-g164991d7a, Latest Protocol: 51
INFO near: Opening store database at "/home/user/.near/data"
INFO near: Migrate DB from version 27 to 28
INFO near: Migrate DB from version 28 to 29
INFO near: Migrate DB from version 29 to 30
INFO near: Migrate DB from version 30 to 31
```

## What can go wrong?

Sometimes a database migration gets **interrupted**. This can happen for many
reasons, such as a machine failing during a long-running database migration, or
the user accidentally stopping the process with `Ctrl-C`. The data stored in the
database has no self-describing metadata for efficiency reasons, therefore it is
impossible to determine which database items were already converted to the new
format, making it impossible to resume or start the migration over. This means
that interrupting a database migration gets the database irrecoverably corrupted.

## Safe database migrations

Starting with neard release `1.26.0`, the node includes a way to **recover the
database instance** even if the database migration gets corrupted. This feature
is enabled by default but requires a manual intervention if a database migration
actually gets interrupted.

One of the possible ways to restore a database is to use a known good state of
the database. Before `1.26.0`, this was mostly done by downloading a
[node database snapshot](/intro/node-data-snapshots).
Starting with `1.26.0`, it can be done locally, which is more convenient and
much faster.

For the demonstration purposes, let's assume that the near home directory is
`/home/user/.near`, and the database location is `/home/user/.near/data`. Then a
safe database migration works the following way:

1. Creates an instant and free snapshot of the existing database in
`/home/user/.near/data/migration-snapshot` using filesystem hard links.
<blockquote class="warning">
If your filesystem doesn't support hardlinks (or you‚Äôve configured the snapshot
to be created on a different file system), this step can take significant
time and double the space used by the database.
</blockquote>
2. Runs the database migration.
<blockquote class="warning">
Even though a newly created snapshot takes no additional space, the space taken
by the snapshot will gradually increase as the database migration progresses.
</blockquote>
3. Deletes the snapshot.

4. Runs the node normally.

If the migration step is interrupted, a snapshot will not be deleted. Upon
restart, the node will detect the presence of the local snapshot, assume that
a database migration was interrupted (thus corrupting the database) and ask the
user to recover the database from that snapshot.

### Recovery

Assuming the corrupted database is in `/home/user/.near/data`, and the snapshot
is in its default location in the database directory (
`/home/user/.near/data/migration-snapshot`) a user may restore the database as
follows:

```sh
# Delete files of the corrupted database
rm /home/user/.near/data/*.sst

# Move not only the .sst files, but all files, to the data directory
mv /home/user/.near/data/migration-snapshot/* /home/user/.near/data/

# Delete the empty snapshot directory
rm -r /home/user/.near/data/migration-snapshot

# Restart
./target/release/neard
```

### Configuration

Starting with upcoming release 1.30, the safe database migrations feature is
configured by a `store.migration_snapshot` option (i.e., a `migration_snapshot`
property of a `store` object).  It can be set to one of the following:

- an absolute path (e.g. `"/srv/neard/migration-snapshot"`) ‚Äî the snapshot will
  be created in specified location;
- a relative path (e.g. `"migration-snapshot"`) ‚Äî the snapshot will be created
  in specified sub-directory inside of the database directory;
- `true` (the default) ‚Äî equivalent to specifying `"migration-snapshot"`
  relative path; or
- `false` ‚Äî the safe migration feature will be disabled.

Note that the default location of the snapshot is inside the database directory.
This ensures the snapshot is instant and free (so long as the filesystem
supports hardlinks).

Prior to version 1.30, the feature was configured by `use_db_migration_snapshot`
and `db_migration_snapshot_path` options.  They are are now deprecated and if
the node detects that they are set, it will fail a migration with message
explaining how to migrate to new options.

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/maintenance/node-maintenance.md ---
---
id: maintenance
title: Node Update and Network Upgrade
sidebar_label: Node Update and Network Upgrade
sidebar_position: 2
description: NEAR Node Update and Network Upgrade
---

## Nearcore Releases {#updating-a-node}

As a decentralized network, every update to NEAR Protocol needs some coordination between end users, platforms, developers, and validators.

NEAR merges nearcore updates from nearcore release on Github: https://github.com/near/nearcore/releases. For each nearcore release, the release notes indicate the nature of the release:
```
CODE_COLOR: CODE_YELLOW_MAINNET  // This field indicates the release tag (see below).
RELEASE_VERSION: 1.23.0          // This field indicates the nearcore version.
PROTOCOL_UPGRADE: TRUE           // This indicates that is a protocol upgrade and therefore a required upgrade.
DATABASE_UPGRADE: TRUE           // This field indicates that database migration is needed.
SECURITY_UPGRADE: FALSE          // This field indicates this release does not contain a security upgrade.
```

## Nearcore Release Schedule {#nearcore-planned-updates}

The nearcore release schedule is shown on the public [NEAR Community Google Calendar](https://calendar.google.com/calendar/u/0/embed?src=nearprotocol.com_ltk89omsjnc2ckgbtk6h9157i0@group.calendar.google.com).

Typically, `testnet` and `mainnet` releases are five weeks apart to allow nearcore to be tested thoroughly on `testnet` before promotion to `mainnet`. From time to time, due to changes in engineering calendar and the nature of the release, release dates may change. Please refer to the [NEAR Community Google Calendar](https://calendar.google.com/calendar/u/0/embed?src=nearprotocol.com_ltk89omsjnc2ckgbtk6h9157i0@group.calendar.google.com) for the most updated release dates.
- `testnet` Wednesday at 15:00 UTC. The release tag is mapped with `x.y.z-rc.1`
- `mainnet` Wednesday at 15:00 UTC. The release tag is mapped with `x.y.z`

<blockquote class="warning">
<strong>Heads up</strong><br /><br />

`betanet` provides cutting-edge testing grounds for validators, with daily updates and frequent hard-forks. For more information on nodes that are running on `betanet`, please see the [betanet analysis group on the governance forum](https://gov.near.org/t/betanet-analysis-group-reports/339).
</blockquote>

## Nearcore Emergency Updates {#nearcore-emergency-updates}

We may issue a `[CODE_YELLOW_TESTNET]` or `[CODE_YELLOW_MAINNET]` if the network is suffering minor issues, or a new software release introduces incompatibilities and requires additional testing.

NEAR Protocol team will use the tag `[CODE_RED_TESTNET]` or `[CODE_RED_MAINNET]` in the Validator Announcement channel on [Discord](https://discord.gg/xsrHaCb), followed by email instructions for coordination. Some updates may follow a confidential process, as explained on [nearcore/SECURITY.md](https://github.com/near/nearcore/blob/master/SECURITY.md) docs.

NEAR's team will be mostly active on [Github](https://github.com/near/nearcore), and with limited participation on Discord and Telegram.

## Runtime Alerts {#runtime-alerts}

To keep our network healthy and minimize the damage of potential incidents, the NEAR team would like to establish a process with which we communicate updates and emergency situations with validators so that they can respond promptly to properly sustain the operations of the network. To this end, we propose that we use different tags in important messages to validators so that they can be easily picked up by automated systems on validators‚Äô end.

The tags we propose are as follows:

`[CODE_RED_<network_id>]` where `<network_id>` is either `MAINNET` or `TESTNET`. This represents the most dire and urgent situation. Usually it means that the network has stalled or crashed and we need validators to take **immediate** actions to bring the network up. Alternatively it could mean that we discovered some highly critical security vulnerabilities and a patch is needed as soon as possible. If it is about mainnet, we expect that validators will react immediately to such alerts, ideally within 30 minutes.

`[CODE_YELLOW_<network_id>]` where `<network_id>` is either `MAINNET` or `TESTNET`. This represents a less urgent announcement. Usually it means the release of a protocol change or a fix of a moderate security issue. In such cases, validators are not expected to take immediate actions but are still expected to react within days.

`[CODE_GREEN_<network_id>]` where `<network_id>` is either `MAINNET` or `TESTNET`. This usually means some general announcement that is more informational or doesn‚Äôt require actions within a short period of time. It could be an announcement of a release that improves performance or a fix some minor issues.

Call-to-actions for technical teams if the network is stalling and there's the need to coordinate a manual node restart. Such messages begin with `[CODE_RED_BETANET]` or `[CODE_RED_TESTNET]`, and will be posted in the read-only Validator Announcement channel on [Discord](https://discord.gg/xsrHaCb). The same message may be repeated in other channels, to have higher outreach.

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/maintenance/recompress-storage.md ---
---
id: recompress-storage
title: Recompressing archival node storage
sidebar_label: Recompressing archival node storage
sidebar_position: 4
description: How to recompress archival node‚Äôs storage to reduce its size.
---

# Recompressing archival node storage

The nearcore 1.26.0 release introduces various improvements to node‚Äôs
storage layer.  Among better performance, the changes result in
*significant* reduction of the storage on archival nodes: from 7.7‚ÄäTB
to 3.8‚ÄäTB on mainnet and from 3.6‚ÄäTB to 1.7‚ÄäTB on testnet.

However, to take full advantage of the savings, some manual steps need
to be taken.  This document describes those steps.  Note that if
you‚Äôre not running an archival node, you don‚Äôt need to do anything.

One of the improvements is changing of the compression algorithm used
by the databases.  Because of that, the whole process is referred to
as ‚Äòrecompressing the storage‚Äô.

## Downloading recompressed snapshot

Rather than performing the recompression, an easier way of getting
benefits of the storage optimisation is to download a new [node data
snapshots](/intro/node-data-snapshots).  This option is available for
mainnet and testnet chains alike.

If you‚Äôve started a new archival node from a backup on 2022-06-10 or
later, your node is already running with recompressed storage and you
don‚Äôt need to take any further actions.

## Performing the operation

The recompression can be performed at any time.  That is, it doesn‚Äôt
need to happen directly after the node upgrade.  In fact, it might be
better to schedule it some number of days after binary upgrade.  Such
delay gives time to make sure that the binary release works correctly
before introducing another change.

### Required free space

Recompressing storage works by creating *a new* database.  As
a result, it requires noticeable amount of free disk space.
Specifically 4‚ÄäTB for mainnet and 2‚ÄäTB for testnet archival nodes.

If your host does not have enough free space you will need to resize
one of the existing partitions (if you are running in the cloud and
can resize disks freely) or temporarily attach a new disk.

At the end of the process it will be possible to delete the old
database freeing a lot of space.  Note however that while increasing
disk size in the cloud is often a simple operation, shrinking it might
be more complicated.  You need to plan accordingly based on your
node‚Äôs setup.

### Stopping the node

While the recompression takes place the database cannot be modified.
In other words, the node needs to be shut down.  The operation takes
around twelve hours on mainnet and six hours on testnet.  If you
require a continuous access to an archival node, you will need to set
up a redundant node if one is not already available.

Procedure for stopping a node depends on configuration of your system.
For example, if neard is run as a systemd service, the command to stop
it might look like:

```console
$ sudo systemctl stop neard.service
```

### Executing the recompression

The recompression is done by executing `recompress-storage` command of
`neard` binary.  If the command is interrupted the whole operation
needs to be run from scratch.  Because of that, it‚Äôs best to run it
inside of a screen or tmux session or through nohup utility.  For
example:

```console
$ NEAR_HOME=$HOME/.near  # change to point to near home directory
$ export NEAR_HOME

$ screen
$ # Inside of screen session:
$ neard recompress-storage --output-dir="${NEAR_HOME:?}/data.new"
```

Once recompression finishes successfully, the new database needs to be
put in place of the old one.  This is simply done by renaming the
`data.new` directory:

```console
$ NEAR_HOME=$HOME/.near  # change to point to near home directory
$ export NEAR_HOME

$ mv -- "${NEAR_HOME:?}/data"     "${NEAR_HOME:?}/data.bak"
$ mv -- "${NEAR_HOME:?}/data.new" "${NEAR_HOME:?}/data"
```

The `data.bak` backup might be worth keeping at least until
verification described in the next section is completed.  If the
verification fails, it will be easy to recover database prior to
recompression.  Otherwise `data.bak` can be deleted.

#### Disk size considerations

As mentioned above, the operation requires up to 4‚ÄäTB of free disk
space.  The above commands assume that near home directory has it but
if it doesn‚Äôt you will have to write new database in a different
location adjusting `--output-dir` flag accordingly.

For example, if the archival node is running in cloud environment an
easy way could be to create a new disk and mount it under a new
location, e.g. `/mnt`.  This could look something like:

```console
$ NEAR_HOME=$HOME/.near  # change to point to near home directory
$ export NEAR_HOME

$ # After attaching new disk to the virtual machine; e.g. at /dev/sdx:
$ dev=/dev/sdx

$ sudo mkfs.ext4 "${dev:?}"
$ sudo mount "${dev:?}" /mnt
$ sudo chown -R $USER /mnt
$ neard recompress-storage --output-dir=/mnt/data
$ # ... recompress comences ...

$ rm -rf -- "${NEAR_HOME:?}/data"
$ cp -R -- /mnt/data "${NEAR_HOME:?}"
$ sudo umount /mnt
```

If you‚Äôre using a different configuration with a separate disk mounted
at `~/.near` directory, copying is not necessary and can be handled by
swapping the mount points.  Note that in this instance the new disk
needs to be an SSD.

```console
$ cp ~/.near/*.json /mnt
$ sudo umount ~/.near
$ sudo umount /mnt
$ sudo mount "${dev:?}" ~/.near
```

The details will depend on the configuration of the system you‚Äôre
using.

### Verification

At this point it is possible to start the archival node again.
However, we recommend performing sanity checks on the new database
before doing that.  This can be done with help of `view-state` command
as follows:

```console
$ NEAR_HOME=$HOME/.near  # change to point to near home directory
$ export NEAR_HOME

$ head=$(neard view-state view-chain |
         sed -ne 's/ *height: *\([0-9]*\),$/\1/p')
$ test -n "$head" || echo 'Unable to read chain head'
$ echo TIP: "$head"
TIP: 63870907

$ start=$((head - 1000))
$ neard view-state apply-range --start-index=$start --shard-id=0
$ neard view-state apply-range --start-index=$start --shard-id=1
$ neard view-state apply-range --start-index=$start --shard-id=2
$ neard view-state apply-range --start-index=$start --shard-id=3
```

If the commands report no errors or differences, it‚Äôs safe to start
the node again.  This verification should take around 15 minutes.

## What has been changed

The 1.26.0 release introduced three main changes which reduced size of
the storage.

Firstly, we‚Äôve incorporated Zstandard (zstd) compression algorithm
which by itself reduces size of the database by around a quarter.
However, normally existing data remains intact unless it‚Äôs changed or
compacted.  Since RPC nodes rewrite most of the storage every five
epochs, their database will be recompressed after two and a half days.
On the other hand, archival nodes benefit from it being done manually
since otherwise the size reduction would take a long time to present
itself.

Secondly, we‚Äôve started garbage collecting partial encoded chunks on
archival nodes.  RPC nodes already garbage collected that data so this
change doesn‚Äôt affect them.  The encoded chunks are needed when other
nodes sync their state but can be reconstructed from other objects in
the database.  They constitute around a quarter of the database‚Äôs size
thus garbage collecting them results in a big reduction in storage
size at the cost of slight computation increase when node sends old
blocks to other archival nodes which attempt to sync their state.

Thirdly, we‚Äôve stopped generating trie changes on archival nodes.
Those objects are needed on RPC nodes but can be omitted on archival
nodes.  They accounted for around a quarter of the database‚Äôs size.

## Do I need to do anything?

You don‚Äôt need to do anything if you‚Äôre running an RPC node or if you
don‚Äôt care about storage cost.  If you have SSD disk space laying
around you may continue running your node without performing the
recompression.

Note also that if you are operating an archival node but are worried
about scheduling (e.g. you‚Äôre busy dealing with other issues and thus
have no time to deal with neard database changes) you can postpone the
recompression.

'''
'''--- docs/maintenance/upgrade_alert.md ---
---
id: upgrade_alert
title: Validator Node Upgrade Alert
sidebar_label: Validator Node Upgrade Alert
description: How to setup an alert for validator nodes upgrading.
sidebar_position: 5
---

# Alerting for Validator Node Upgrades

Please note that once 80% of the validator nodes switch to a new protocol version, the upgrade will occur in 2 epochs. Any validator node who doesn't upgrade in time will be kicked. The following provides a network upgrade ratio which allows validators to see what percentage of the validator nodes has upgraded to a new protocol version.

<blockquote class="warning">
<strong>Heads up</strong><br /><br />

Information about node version and build is available on-chain. A metric based on on-chain data would be more reliable, and that metric is already under construction.
</blockquote>

Validator nodes periodically submit telemetry data, which is stored in a publicly-accessible PostgresSQL database.
Note that the nodes can opt out of submitting the telemetry data, and the telemetry data isn't guaranteed to be accurate.

With these caveats clarified, let's define an upgrade alert. The instructions were tested only in Grafana.

Step 1. Add a PostgreSQL data source with the following credentials:

* `telemetry_testnet` for testnet and `telemetry_mainnet` for mainnet: https://github.com/near/near-indexer-for-explorer/#shared-public-access

Step 2. Add a dashboard with a Graph panel with the following SQL query. Grafana only supports alerts on the Graph panels, therefore this needs a workaround to fit the Table data into a Graph format.

```
SELECT $__time(time_sec)
  ,upgraded_ratio
FROM (
  SELECT NOW() - INTERVAL '1' SECOND AS time_sec
    ,(
      (
        SELECT CAST(COUNT(*) AS FLOAT)
        FROM nodes
        WHERE agent_version > (
            SELECT MIN(agent_version)
            FROM nodes
            WHERE is_validator
              AND (now() - last_seen) < INTERVAL '15 MINUTE'
            )
          AND is_validator
          AND (now() - last_seen) < INTERVAL '15 MINUTE'
        ) / (
        SELECT COUNT(*)
        FROM nodes
        WHERE is_validator
          AND (now() - last_seen) < INTERVAL '15 MINUTE'
        )
      ) AS upgraded_ratio
  ) AS inner_table
WHERE $__timeFilter(time_sec);
```

Step 3. Go to the alert tab and change the condition to `WHEN last () OF query (A, 10s, now) IS ABOVE 0.65` or similar.

Step 4. Optionally add a table with min and max version of the validator nodes:

```
SELECT (
    SELECT MIN(agent_version)
    FROM nodes
    WHERE is_validator
      AND (now() - last_seen) < INTERVAL '15 MINUTE'
    ) AS min_version
  ,(
    SELECT MAX(agent_version)
    FROM nodes
    WHERE is_validator
      AND (now() - last_seen) < INTERVAL '15 MINUTE'
    ) AS max_version
  ,(
    SELECT COUNT(*)
    FROM nodes
    WHERE is_validator
      AND (now() - last_seen) < INTERVAL '15 MINUTE'
    ) AS num_validators
  ,(
    SELECT COUNT(*)
    FROM nodes
    WHERE agent_version = (
        SELECT MAX(agent_version)
        FROM nodes
        WHERE is_validator
          AND (now() - last_seen) < INTERVAL '15 MINUTE'
        )
      AND is_validator
      AND (now() - last_seen) < INTERVAL '15 MINUTE'
    ) AS upgraded_validators
  ,(
    (
      SELECT CAST(COUNT(*) AS FLOAT)
      FROM nodes
      WHERE agent_version = (
          SELECT MAX(agent_version)
          FROM nodes
          WHERE is_validator
            AND (now() - last_seen) < INTERVAL '15 MINUTE'
          )
        AND is_validator
        AND (now() - last_seen) < INTERVAL '15 MINUTE'
      ) / (
      SELECT COUNT(*)
      FROM nodes
      WHERE is_validator
        AND (now() - last_seen) < INTERVAL '15 MINUTE'
      )
    ) AS upgraded_ratio;
```

Step 5. Optionally add a table with the number of nodes running a newer version than your node:

```
SELECT (
    SELECT COUNT(*)
    FROM nodes
    WHERE is_validator
      AND (now() - last_seen) < INTERVAL '15 MINUTE'
    ) AS num_validators
  ,(
    SELECT COUNT(*)
    FROM nodes
    WHERE agent_version > (
        SELECT agent_version
        FROM nodes
        WHERE moniker = '$YOUR_VALIDATOR_MONIKER'
        )
      AND is_validator
      AND (now() - last_seen) < INTERVAL '15 MINUTE'
    ) AS upgraded_validators
  ,(
    (
      SELECT CAST(COUNT(*) AS FLOAT)
      FROM nodes
      WHERE agent_version > (
          SELECT agent_version
          FROM nodes
          WHERE moniker = '$YOUR_VALIDATOR_MONIKER'
          )
        AND is_validator
        AND (now() - last_seen) < INTERVAL '15 MINUTE'
      ) / (
      SELECT COUNT(*)
      FROM nodes
      WHERE is_validator
        AND (now() - last_seen) < INTERVAL '15 MINUTE'
      )
    ) AS upgraded_ratio;
```

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/rpc/_category_.json ---
{
  "position": 3,
  "label": "RPC Nodes",
  "collapsible": true,
  "collapsed": true,
  "link": {
    "type": "generated-index",
    "slug": "rpc",
    "title": "RPC Nodes"
  }
}

'''
'''--- docs/rpc/hardware-rpc.md ---
---
id: hardware-rpc
title: Hardware Requirements for RPC Node
sidebar_label: Hardware Requirements
sidebar_position: 1
description: NEAR RPC Node Hardware Requirements
---

This page covers the minimum and recommended hardware requirements for engaging with the NEAR platform as a RPC node.

For testing your RPC once the node is fully sync'd, see [this example RPC request.](https://docs.near.org/api/rpc/network#node-status)

## Recommended Hardware Specifications {#recommended-hardware-specifications}

| Hardware       | Recommended Specifications                                               |
| -------------- |--------------------------------------------------------------------------|
| CPU            | 8-Core (16-Thread) Intel i7/Xeon or equivalent with AVX support          |
| CPU Features   | CMPXCHG16B, POPCNT, SSE4.1, SSE4.2, AVX                                  |
| RAM            | 20GB DDR4                                                                 |
| Storage        | 1TB SSD (NVMe SSD is recommended. HDD will be enough for localnet only ) |

_Verify AVX support on Linux by issuing the command ```$ lscpu | grep -oh  avx```. If the output is empty, your CPU is not supported._

## Minimal Hardware Specifications {#minimal-hardware-specifications}

| Hardware       | Minimal Specifications                                                    |
| -------------- |---------------------------------------------------------------------------|
| CPU            | 8-Core (16-Thread) Intel i7/Xeon or equivalent with AVX support           |
| RAM            | 12GB DDR4                                                                 |
| Storage        | 500GB SSD (NVMe SSD is recommended. HDD will be enough for localnet only) |

_Verify AVX support on Linux by issuing the command ```$ lscpu | grep -oh  avx```. If the output is empty, your CPU is not supported._

## Cost Estimation {#cost-estimation}

Estimated monthly costs depending on operating system:

| Cloud Provider | Machine Size    | Linux                  |
| -------------- | --------------- | ---------------------- |
| AWS            | m5.2xlarge      | $330 CPU + $80 storage |
| GCP            | n2-standard-8   | $280 CPU + $80 storage |
| Azure          | Standard_F8s_v2 | $180 CPU + $40 storage |

<blockquote class="info">
<strong>Resources for Cost Estimation</strong><br /><br />

All prices reflect *reserved instances* which offer deep discounts on all platforms with a 1 year commitment

- AWS
  - cpu: https://aws.amazon.com/ec2/pricing/reserved-instances/pricing
  - storage: https://aws.amazon.com/ebs/pricing
- GCP
  - cpu: https://cloud.google.com/compute/vm-instance-pricing
  - storage: https://cloud.google.com/compute/disks-image-pricing
- Azure ‚Äî https://azure.microsoft.com/en-us/pricing/calculator

</blockquote>

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/rpc/run-rpc-node-with-nearup.md ---
---
id: run-rpc-node-with-nearup
title: Run an RPC Node (with nearup)
sidebar_label: Run a Node (with nearup)
sidebar_position: 3
description: How to run an RPC Node with nearup
---

*We encourage you to set up your node with Neard instead of Nearup as Nearup is not used on Mainnet. Please head to [Run a Node](/rpc/run-rpc-node-without-nearup) for instructions on how to setup a RPC node with Neard.*

<blockquote class="info">
<strong>Heads up</strong><br /><br />

The README for `nearup` (linked above) may be **all you need to get a node up and running** in `testnet` and `localnet`. `nearup` is exclusively used to launch NEAR `testnet` and `localnet` nodes. `nearup` is not used to launch `mainnet` nodes.

</blockquote>

## Prerequisites

- [Git](https://git-scm.com/)
- [Nearup](https://github.com/near-guildnet/nearup): Make sure [`nearup`](https://github.com/near-guildnet/nearup) is installed. You can install `nearup` by following the instructions at https://github.com/near-guildnet/nearup.

---

### Steps to Run an RPC Node using `nearup`

Running a RPC node is very similar to running a [validator node](/validator/running-a-node) as both types of node use the same `nearcore` release. The main difference for running a validator node is requiring `validator_key.json` to be used by the validator node to support its work of validating blocks and chunks on the network.

First, clone the `nearcore` repo:

```text
git clone https://github.com/near/nearcore.git
cd nearcore
```
Checkout the version you wish to build:

```bash
git checkout <version>
```

You can then run:

```bash
make neard
```

This will compile the `neard` binary for the version you have checked out, it will be available under `target/release/neard`.

Note that compilation will need over 1 GB of memory per virtual core
the machine has. If the build fails with processes being killed, you
might want to try reducing number of parallel jobs, for example:
`CARGO_BUILD_JOBS=8 make neard`.

NB. Please ensure you build releases through `make` rather than `cargo
build --release`.  The latter skips some optimizations (most notably
link-time optimisation) and thus produces a less efficient executable.

```bash
nearup run testnet --binary-path path/to/nearcore/target/release
```

You will then be prompted for an Account ID below. You should leave this empty as you are running an RPC node, not a validator node.

```text
Enter your account ID (leave empty if not going to be a validator):
```

Wait until initialization finishes, use the following command to follow logs:
```bash
  $ nearup logs --follow
```
Then run:
```bash
  $ nearup stop
```

Retrieve a copy of the latest RPC snapshot from S3:
```bash
$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/testnet/rpc/latest .
$ LATEST=$(cat latest)
$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/testnet/rpc/$LATEST ~/.near/data
```

Finally, run the following command and the node should start syncing headers:
```bash
  $ nearup run testnet
```

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/rpc/run-rpc-node-without-nearup.md ---
---
id: run-rpc-node-without-nearup
title: Run an RPC Node
sidebar_label: Run a Node üöÄ
sidebar_position: 2
description: How to run an RPC Node without nearup
---

The following instructions are applicable across localnet, testnet, and mainnet.

If you are looking to learn how to compile and run a NEAR RPC node natively for one of the following networks, this guide is for you.

- [`testnet`](/rpc/run-rpc-node-without-nearup#testnet)
- [`mainnet`](/rpc/run-rpc-node-without-nearup#mainnet)

<blockquote class="info">
<strong>Heads up</strong><br /><br />

Running a RPC node is very similar to running a [validator node](/validator/running-a-node) as both types of node use the same `nearcore` release. The main difference for running a validator node is requiring `validator_key.json` to be used by the validator node to support its work of validating blocks and chunks on the network.

</blockquote>

## Prerequisites

- [Rust](https://www.rust-lang.org/). If not already installed, please [follow these instructions](https://doc.rust-lang.org/book/ch01-01-installation.html).
- [Git](https://git-scm.com/)
- Installed developer tools:
  - MacOS
    ```bash
    $ brew install cmake protobuf clang llvm awscli
    ```
  - Linux
    ```bash
    $ apt update
    $ apt install -y git binutils-dev libcurl4-openssl-dev zlib1g-dev libdw-dev libiberty-dev cmake gcc g++ python docker.io protobuf-compiler libssl-dev pkg-config clang llvm cargo awscli
    ```
---

### Choosing your `nearcore` version

When building your NEAR node you will have two branch options to choose from depending on your desired use:

- `master` : _(**Experimental**)_
  - Use this if you want to play around with the latest code and experiment. This branch is not guaranteed to be in a fully working state and there is absolutely no guarantee it will be compatible with the current state of *mainnet* or *testnet*.
- [`Latest stable release`](https://github.com/near/nearcore/tags) : _(**Stable**)_
  - Use this if you want to run a NEAR node for *mainnet*. For *mainnet*, please use the latest stable release. This version is used by mainnet validators and other nodes and is fully compatible with the current state of *mainnet*.
- [`Latest release candidates`](https://github.com/near/nearcore/tags) : _(**Release Candidates**)_
  - Use this if you want to run a NEAR node for *tesnet*. For *testnet*, we first release a RC version and then later make that release stable. For testnet, please run the latest RC version.

## `testnet`

### 1. Clone `nearcore` project from GitHub

First, clone the [`nearcore` repository](https://github.com/near/nearcore).

```bash
$ git clone https://github.com/near/nearcore
$ cd nearcore
$ git fetch origin --tags
```

Checkout to the branch you need if not `master` (default). Latest release is recommended. Please check the [releases page on GitHub](https://github.com/near/nearcore/releases).

```bash
$ git checkout tags/1.25.0 -b mynode
```

### 2. Compile `nearcore` binary

In the `nearcore` folder run the following commands:

```bash
$ make release
```

This will start the compilation process. It will take some time
depending on your machine power (e.g. i9 8-core CPU, 32 GB RAM, SSD
takes approximately 25 minutes). Note that compilation will need over
1 GB of memory per virtual core the machine has. If the build fails
with processes being killed, you might want to try reducing number of
parallel jobs, for example: `CARGO_BUILD_JOBS=8 make release`.

If you‚Äôre familiar with Cargo, you could also run `cargo build -p neard
--release` instead, which might or might not be equivalent to `make release`. It
is equivalent at the time of writing, but we don't guarantee this. If in doubt,
consult the `Makefile`, or just stick with `make release`.

The binary path is `target/release/neard`

### 3. Initialize working directory

The NEAR node requires a working directory with a couple of configuration files. Generate the initial required working directory by running:

```bash
$ ./target/release/neard --home ~/.near init --chain-id testnet --download-genesis --download-config
```

> You can specify trusted boot nodes that you'd like to use by pass in a flag during init: `--boot-nodes ed25519:4k9csx6zMiXy4waUvRMPTkEtAS2RFKLVScocR5HwN53P@34.73.25.182:24567,ed25519:4keFArc3M4SE1debUQWi3F1jiuFZSWThgVuA2Ja2p3Jv@34.94.158.10:24567,ed25519:D2t1KTLJuwKDhbcD9tMXcXaydMNykA99Cedz7SkJkdj2@35.234.138.23:24567,ed25519:CAzhtaUPrxCuwJoFzceebiThD9wBofzqqEMCiupZ4M3E@34.94.177.51:24567`

> You can skip the `--home` argument if you are fine with the default working directory in `~/.near`. If not, pass your preferred location.

This command will create the required directory structure and will generate `config.json`, `node_key.json`, and `genesis.json` for `testnet` network.
- `config.json` - Configuration parameters which are responsive for how the node will work.
- `genesis.json` - A file with all the data the network started with at genesis. This contains initial accounts, contracts, access keys, and other records which represents the initial state of the blockchain.
- `node_key.json` -  A file which contains a public and private key for the node. Also includes an optional `account_id` parameter which is required to run a validator node (not covered in this doc).
- `data/` -  A folder in which a NEAR node will write it's state.

> **Heads up**
> The genesis file for `testnet` is big (6GB +) so this command will be running for a while and no progress will be shown.

### 4. Replacing the `config.json`

From the generated `config.json`, there two parameters to modify:
- `boot_nodes`: If you had not specify the boot nodes to use during init in Step 3, the generated `config.json` shows an empty array, so we will need to replace it with a full one specifying the boot nodes.
- `tracked_shards`: In the generated `config.json`, this field is an empty. You will have to replace it to `"tracked_shards": [0]`

To replace the `config.json`, run the following commands:

```bash
$ rm ~/.near/config.json
$ wget https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/testnet/config.json -P ~/.near/
```

### 5. Get data backup

The node is ready to be started. However, you must first sync up with the network. This means your node needs to download all the headers and blocks that other nodes in the network already have.

```bash
$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/testnet/rpc/latest .
$ LATEST=$(cat latest)
$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/testnet/rpc/$LATEST ~/.near/data
```

### 6. Run the node
To start your node simply run the following command:

```bash
$ ./target/release/neard --home ~/.near run
```

That's all. The node is running you can see log outputs in your console. It will download a bit of missing data since the last backup was performed but it shouldn't take much time.

## `mainnet`

### 1. Clone `nearcore` project from GitHub

First, clone the [`nearcore` repository](https://github.com/near/nearcore).

```bash
$ git clone https://github.com/near/nearcore
$ cd nearcore
$ git fetch origin --tags
```

Next, checkout the release branch you need (recommended) if you will not be using the default `master` branch. Please check the [releases page on GitHub](https://github.com/near/nearcore/releases) for the latest release.

For more information on choosing between `master` and latest release branch [ [click here](/validator/compile-and-run-a-node#choosing-your-nearcore-version) ].

```bash
$ git checkout tags/1.25.0 -b mynode
```

### 2. Compile `nearcore` binary

In the `nearcore` folder run the following commands:

```bash
$ make release
```

This will start the compilation process. It will take some time
depending on your machine power (e.g. i9 8-core CPU, 32 GB RAM, SSD
takes approximately 25 minutes). Note that compilation will need over
1 GB of memory per virtual core the machine has. If the build fails
with processes being killed, you might want to try reducing number of
parallel jobs, for example: `CARGO_BUILD_JOBS=8 make release`.

If you‚Äôre familiar with Cargo, you could also run `cargo build -p neard
--release` instead, which might or might not be equivalent to `make release`. It
is equivalent at the time of writing, but we don't guarantee this. If in doubt,
consult the `Makefile`, or just stick with `make release`.

The binary path is `target/release/neard`

### 3. Initialize working directory

The NEAR node requires a working directory with a couple of configuration files. Generate the initial required working directory by running:

```bash
$ ./target/release/neard --home ~/.near init --chain-id mainnet --download-genesis --download-config
```

> You can specify trusted boot nodes that you'd like to use by pass in a flag during init: `--boot-nodes ed25519:86EtEy7epneKyrcJwSWP7zsisTkfDRH5CFVszt4qiQYw@35.195.32.249:24567,ed25519:BFB78VTDBBfCY4jCP99zWxhXUcFAZqR22oSx2KEr8UM1@35.229.222.235:24567,ed25519:Cw1YyiX9cybvz3yZcbYdG7oDV6D7Eihdfc8eM1e1KKoh@35.195.27.104:24567,ed25519:33g3PZRdDvzdRpRpFRZLyscJdbMxUA3j3Rf2ktSYwwF8@34.94.132.112:24567,ed25519:CDQFcD9bHUWdc31rDfRi4ZrJczxg8derCzybcac142tK@35.196.209.192:24567`

> You can skip the `--home` argument if you are fine with the default working directory in `~/.near`. If not, pass your preferred location.

This command will create the required directory structure by generating a `config.json`, `node_key.json`, and downloads a `genesis.json` for `mainnet`.
- `config.json` - Configuration parameters which are responsive for how the node will work.
- `genesis.json` - A file with all the data the network started with at genesis. This contains initial accounts, contracts, access keys, and other records which represents the initial state of the blockchain.
- `node_key.json` -  A file which contains a public and private key for the node. Also includes an optional `account_id` parameter which is required to run a validator node (not covered in this doc).
- `data/` -  A folder in which a NEAR node will write it's state.

### 4. Replacing the `config.json`

From the generated `config.json`, there two parameters to modify:
- `boot_nodes`: If you had not specify the boot nodes to use during init in Step 3, the generated `config.json` shows an empty array, so we will need to replace it with a full one specifying the boot nodes.
- `tracked_shards`: In the generated `config.json`, this field is an empty. You will have to replace it to `"tracked_shards": [0]`

To replace the `config.json`, run the following commands:

```bash
$ rm ~/.near/config.json
$ wget https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/config.json -P ~/.near/
```

### 5. Get data backup

The node is ready to be started. However, you must first sync up with the network. This means your node needs to download all the headers and blocks that other nodes in the network already have.

```bash
$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/mainnet/rpc/latest .
$ LATEST=$(cat latest)
$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/mainnet/rpc/$LATEST ~/.near/data
```

### 6. Run the node
To start your node simply run the following command:

```bash
$ ./target/release/neard --home ~/.near run
```

That's all. The node is running and you can see log outputs in your console. It will download a bit of missing data since the last backup was performed but it shouldn't take much time.

## Running a node in `light` mode
Running a node in `light` mode allows the operator to access chain level data, not state level data. You can also use the `light` node to submit transactions or verify certain proofs. To run a node in a `light` mode that doesn't track any shards, the only change required is to update the `config.json` whereby `tracked_shards` is set to an empty array.

```
"tracked_shards": []
```

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/rpc/state-sync.md ---
---
id: state-sync
title: State Sync
sidebar_label: State Sync Configuration
sidebar_position: 4
description: State Sync Configuration
---

# Overview

See [State Sync from External Storage](https://github.com/near/nearcore/blob/master/docs/misc/state_sync_from_external_storage.md)
for a description of how to configure your node to sync State from an arbitrary
external location.

Pagoda provides state dumps for every shard of every epoch since the release of
`1.36.0-rc.1` for testnet and `1.36.0` for mainnet.

## Enable State Sync

The main option you need is `state_sync_enabled`, and then specify how to get
the state parts provided by Pagoda in the option `state_sync`.

The following snippet is included in the reference `config.json` file and
provides access to the state of every shard every epoch:

```json
"state_sync_enabled": true,
"state_sync": {
  "sync": {
    "ExternalStorage": {
      "location": {
        "GCS": {
          "bucket": "state-parts",
        }
      },
      "num_concurrent_requests": 4,
      "num_concurrent_requests_during_catchup": 4,
    }
  }
}
```

## Reference `config.json` file

Run the following command to download the reference `config.json` file:

```shell
./neard --home /tmp/ init --download-genesis --download-config --chain-id <testnet or mainnet>
```

The file will be available at `/tmp/config.json`.

## Troubleshooting

If you notice that your node runs state sync and it hasn't completed after 3 hours, please check the following:

1. Config options related to the state sync in your `config.json` file:
* `state_sync_enabled`
* `state_sync`
* `consensus.state_sync_timeout`
* `tracked_shards`
* `tracked_accounts`
* `tracked_shard_schedule`
* `archive`
* `block_fetch_horizon`

The best way to see the exact config values used is to visit a debug page of your node: `http://127.0.0.1:3030/debug/client_config`

Check whether state sync is enabled, and check whether it's configured to get state parts from the right location mentioned above.

2. Has your node ran out of available disk space?

If all seems to be configured fine, then disable state sync (set `"state_sync_enabled": false` in `config.json`) and try again.
If that doesn't help, then restart from a backup data snapshot.

## Running a Chunk-Only Producer that tracks a single shard

Enable State Sync as explained above.

And then configure the node to track no shards:

```json
"tracked_shards": [],
"tracked_accounts": [],
"tracked_shard_schedule": [],
```

It is counter-intuitive but it works. If a node stakes and is accepted as a
validator, then it will track the shard that it needs to track to fulfill its
validator role. The assignment of validators to shards is done by the consensus
of validators.

Note that in different epochs a validator may be assigned to different shards. A
node switches tracked shards by using the State Sync mechanism for a single
shard. See [catchup](https://github.com/near/nearcore/blob/master/docs/architecture/how/sync.md#catchup).

'''
'''--- docs/troubleshooting/_category_.json ---
{
  "position": 5,
  "label": "Troubleshooting Your Node",
  "collapsible": true,
  "collapsed": true,
  "link": {
    "type": "generated-index",
    "slug": "troubleshooting",
    "title": "Troubleshooting Common Errors"
  }
}

'''
'''--- docs/troubleshooting/common-errors.md ---
---
id: common-errors
title: Common Node Errors and Solutions
sidebar_label: Common Node Errors and Solutions
description: Common Node Errors and Solutions
---

***My node is looking for peers on guildnet, testnet, and mainnet. Why?***

This is a known logging issue. The node should find peers from the same chain. This prints as a warning message as the node checks for peers from the same chain.

***I don‚Äôt have the normal number of peers, and see missing blocks?***

Normally, a node should find 12 to 15 peers. If your node‚Äôs peer count is low and you see missing blocks, you may try restarting the node to reset your peers.

***My node does not have enough peers and some peers are down.***

Cause: My node has the average number of peers (12-15) and x number of peers are down (such during protocol upgrade when these nodes upgrade late and are kicked), the blocks can be missed.

Solution:
Restart your node and try to find new peers. A bad performing peer that is close to your node may cause your node to miss blocks. If a peer is malicious, you can consider using `"blacklist": ["IP"]` in the `config.json` to ban the peer.

***My node cannot find any peers or has one peer.***

Cause 1: Depending on who the first peer is and if there are other peers close to them, the node is not able to find more peers.

Solution: This can be fixed by a restart of the node.

Cause 2: The bootnodes, defined in the `config.json` can be full and are not accept more connections.

Solution: You can potentially add any node into the `config.json` and use that node as a bootnode to find more peers.

Cause 3: Connected to a node that has just connected to the network and doesn‚Äôt have up-to-date peers.

Solution: Restart your node to find a different peer. You can potentially add any node into the config and use that node to find more peers.

***My node can't sync state or stuck in a sync state loop.***

Cause: Potentially use a wrong nearcore release.

Solution: Fix the nearcore release: https://github.com/near/nearcore/releases, and please also check the details on the node setup.

***My node is stuck on a block.***

Cause: This usually occurs in the beginning of an epoch, where the block processing time may increase.

Solution: Restarting the node usually improves the situation.

***My node shows "Mailbox closed" when the node crashes.***

Cause 1: Corrupt State

Solution: There is an issue with the DB. Download the latest snapshot and resync the node, or sync from your backup node if you have a backup node.

Cause 2: Block Height Mismatch

Solution: There is an issue with peers. The node has banned all the peers for a period of time, and is related to the peers not being properly terminated: https://github.com/near/nearcore/issues/5340. For the node operator, search in the log to see there is a thread panic.  If there‚Äôs panic, then store your DB from a snapshot. If there is no panic, restart your node.

Please report all mailbox related issues using Zendesk and add your log: https://near-node.zendesk.com/hc/en-us/requests/new.

***My node shows "Mailbox closed" when the node is running.***

Cause: Unclear

Solution: Restart the node.

***My node is banning peers for block height fraud.***

Cause: It‚Äôs possible that your peer network connection is slow or unstable or that the data center has an issue. The peers don‚Äôt send you block headers faster enough.

Solution: If your node is running fine, do nothing. Unless your peers are all banned, and go to the next issue.

***All your peers are banned because of block height fraud.***

Cause: It‚Äôs possible that your peer network connection is slow or unstable or that your datacenter has an issue. If you have 0 bps frequently, this usually indicates a connectivity issue.
The peers are not sending your node block headers faster enough. Your node can start banning your peers due to your node falling behind (not being synced).

Solution: Fix your network connection. In the `config.json`, you can change the `ban_window` to 1 second to avoid banning peers.

***If your node is yet not synced, and you‚Äôve proposed and the node shows many different errors (DB not found, Mailbox closed etc).***

Cause: Your node is not synced. Please wait for the node to fully synced before proposing.

Solution: Be fully synced, Wait 2 epochs and then ping again.

***When the main node failsover to the backup node, the back node is having issues and is falling behind and missing all blocks.***

Cause: This issue happens frequently due to the config.json in the backup node isn‚Äôt set up properly.

Solution: The backup node should track all shards. The default config.json during initialization has `"tracked_shards": []`. Please update the `config.json` to include `"tracked_shards": [0]` in both the primary and backup node. You must make this update to both the primary node and backup node.

***My node sends many request and has memory usage spike.***

Cause: This is infrequently observed but sometimes happens. A node starts to send too many requests and causes memory usage spikes, then it is stuck after 10 minutes and runs out of memory.

Solution: Restart the node.

***What are the causes of a node‚Äôs corrupt state?***

- Late upgrade due to a different protocol version transition
- Incorrectly stopping the node. The node needs to write the latest updates to disk to keep DB in a consistent state.
- Bad snapshots: Please raise the issue on [Zendesk](https://near-node.zendesk.com/hc/en-us/requests/new) to alert us.
- DB migration known issue: If you stop the DB migration, the node will end up in a corrupt state.

***My node shows inconsistent DB State or DB Not Found.***

Cause: Inconsistent DB state, DB not found are usually related to corrupt state (see above).

Solution: Depending on the severity of issue, the node can be restarted to solve for an inconsistent state. If more severe, the node may have to download the latest snapshot and restart.

***My node is missed blocks in the beginning of epochs.***

Cause: Usually blocks can be missed in the beginning of epochs due to garbage collection. However, the node usually catches up during the epoch and is not kicked.

Solution: Waiting for the node to try to catch up. If you are kicked, then try to rejoin.

***What‚Äôs a typical incident recovery plan on mainnet with a primary validator node and a secondary node***

1. Copy over node_key.json to secondary node
2. Copy over validator_key.json to secondary node
3. Stop the primary node
4. Stop the secondary node
5. Restart the secondary node

***What happens in a typical validator / RPC node upgrade process?***

1. DB Migration (optional if the release contains a DB migration)
2. Finding Peers
3. Download Headers to 100%
4. State Sync
5. Download Blocks

***What happens in a typical archival node upgrade process?***

Since archival node needs all blocks, it will download blocks directly after downloading headers.

1. DB Migration (optional if the release contains a DB migration)
2. Finding Peers
3. Download Headers to 100%
4. Download Blocks

## Still seeing an issue with your node?
Please find a Bug Report on Zendesk, https://near-node.zendesk.com/hc/en-us/requests/new, to the NEAR team, and attach your logs.

'''
'''--- docs/troubleshooting/debug_pages.md ---
---
id: debug-pages
title: Debug Pages
sidebar_label: Debug Pages
description: Debug Pages
---

# Debug Pages
Debug pages is a feature that allows node maintainers to navigate detailed information about the node in a structured way

## Enable Debug Pages
To enable debug pages modify your config.json file and restart the node.
```
...
"rpc": {
    ...
    "enable_debug_rpc": true,
    ...
 }
 ...
```
By default, debug pages will become accessible on `<your node ip>:3030/debug`.  
If you modified your rpc address in config, then debug page will be accessible on `<config.rpc.addr>/debug`.

## Last blocks page
Displays 50 most recent blocks. Shows hash, as well as time and gas stats for block and every shard.  
On the left schematically displays the chain to visualize forks.

## Network info page
Displays a table of peers.
For every peer shows:
- some sync information like height and last block hash;
- id information like validator pool name (if peer is a validator), peer id;
- network information like address, traffic, route;
- node information like archival flag and tracked shards.

## TIER1 Network info page
Similar to network page, but about TIER1 network.

## Epoch info page
Displays several tables related to epochs:
- Start height and epoch hash for last 4 epochs, current epoch and next epoch;
- Validators in the current epoch;
- Validators in the next epoch;
- Validator proposals;
- Validator kickouts;
- Validator type for current validators in 6 epochs described on the page. Whether the validator is a block producer or a chunk-only producer;
- Shard sizes for 5 out of 6 epochs described on the page (because one of them didn't start yet).

## Chain & Chunk info page
Displays information about chunks requested and received by the node 

## Sync info page
Displays a page with tracked shards for this epoch and the next epoch.
Also shows status of three sync algorithms that are executed sequentially if the node is behind:
- Header sync
- State sync
- Block sync

## Validator info page
Displays information related to blocks and chunks produced by the node and approvals or skips sent by other nodes.

## Client Config page
Displays client config JSON of the node.

'''
'''--- docs/troubleshooting/resharding.md ---
---
id: resharding-troubleshooting
title: Troubleshooting Resharding
sidebar_label: Resharding
description: Advice to ensure that the node goes through resharding successfully
---

## Resharding Timeline {#timeline}

The [1.37.0 release](https://github.com/near/nearcore/releases/tag/1.37.0) contains a protocol upgrade that splits shard 3 into two shards.
When network upgrades to the protocol version 64, it will have 5 shards defined by these border accounts `vec!["aurora", "aurora-0", "kkuuue2akv_1630967379.near", "tge-lockup.sweat"]`.

Any code that has a hardcoded number of shards or mapping of an account to shard id may break.
If you are not sure if your tool will work after mainnet updates to protocol version 64, test it on testnet, as it is already running on 5 shards.

Resharding will happen in the epoch preceding protocol upgrade.
So, if the voting happens in epoch X, resharding will happen in epoch X+1, and protocol upgrade will happen in epoch X + 2.
Voting for upgrading to protocol version 64 will start on **Monday 2024-03-11 18:00:00 UTC** .
By our estimations, resharding will start on **Tuesday 2024-03-12  07:00:00 UTC**, and first epoch with 5 shards will start on **Tuesday 2024-03-12  23:00:00 UTC**.

Resharding is done as a background process of a regular node run. It takes hours to finish, and it shouldn‚Äôt be interrupted.
Failure to reshard will result in the node not being able to sync with the network.

## 1.37.0 release resharding {#1.37.0}

### General recommendations {#general 1.37}
- **Do not restart your node during the resharding epoch.**
It may result in your node not being able to finish resharding.
- **Disable state sync** until your node successfully transitions to the epoch with protocol version 64.
You should disable it before the voting date (**Monday 2024-03-11 18:00:00 UTC**).
It should be safe to enable it on **Thursday 2024-03-14**.
To disable state sync, assign `false` to the `state_sync_enabled` field in config.
- **Make sure that state snapshot compaction is disabled.**
Your node will create a state snapshot for resharding.
State snapshot compaction may lead to stack overflow.
Make sure that fields `store.state_snapshot_config.compaction_enabled` and `store.state_snapshot_compaction_enabled` are set to `false`.
- Ensure that you have additional 200Gb of free space on your `.near/data` disk.

### Before resharding {#prepare for 1.37}

#### If your node is out of sync {#out of sync 1.37}
If your node is far behind the network, consider downloading the latest DB snapshot provided by Pagoda from s3
[Node Data Snapshots](/intro/node-data-snapshots).
Your node will likely fail resharding if it is not in sync with the network for the majority of the resharding epoch.

#### If you run legacy archival node {#legacy 1.37}
We don‚Äôt expect legacy archival nodes to be able to finish resharding and stay in sync on mainnet.
We highly recommend migrating to split storage archival nodes as soon as possible.
The easiest way is to download DB snapshots provided by Pagoda from s3.
Be aware that the cold db of a mainnet split storage is about 22Tb, and it may take a long time to download it.
You can find instructions on how to migrate to split storage on [Split Storage page](/archival/split-storage-archival).

### During resharding {#run 1.37}

#### Monitoring {#monitoring 1.37}
To monitor resharding you can use metrics `near_resharding_status`, `near_resharding_batch_size`, and `near_resharding_batch_prepare_time_bucket`.
You can read more [on github](https://github.com/near/nearcore/blob/master/docs/architecture/how/resharding.md#monitoring).

If you observe problems with block production or resharding performance, you can adjust resharding throttling configuration.
This does not require a node restart, you can send a signal to the neard process to load the new config.
Read more [on github](https://github.com/near/nearcore/blob/master/docs/architecture/how/resharding.md#monitoring).

### After resharding {#after 1.37}
If your node failed to reshard or is not able to sync with the network after the protocol upgrade, you will need to download the latest DB snapshot provided by Pagoda from s3
[Node Data Snapshots](/intro/node-data-snapshots).
We will try to ensure that these snapshots are uploaded as soon as possible, but you may need to wait several hours for them to be available.

Pagoda s3 DB snapshots have a timestamp of their creation in the file path.
Check that you are downloading a snapshot that was taken after the switch to protocol version 64.

'''
'''--- docs/validator/_category_.json ---
{
  "position": 2,
  "label": "Validator Nodes",
  "collapsible": true,
  "collapsed": true,
  "link": {
    "type": "generated-index",
    "slug": "validator",
    "title": "Validator Nodes"
  }
}

'''
'''--- docs/validator/compile-and-run-a-node.md ---
---
id: compile-and-run-a-node
title: Run a Validator Node
sidebar_label: Run a Node
sidebar_position: 3
description: Compile and Run a NEAR Node without Container in localnet, testnet, and mainnet
---

*If this is the first time for you to setup a validator node, head to our [Validator Bootcamp üöÄ](/validator/validator-bootcamp).*

The following instructions are applicable across localnet, testnet, and mainnet.

If you are looking to learn how to compile and run a NEAR validator node natively (without containerization) for one of the following networks, this guide is for you.

- [`localnet`](/validator/compile-and-run-a-node#localnet)
- [`testnet`](/validator/compile-and-run-a-node#testnet)
- [`mainnet`](/validator/compile-and-run-a-node#mainnet)

## Prerequisites {#prerequisites}

- [Rust](https://www.rust-lang.org/). If not already installed, please [follow these instructions](https://docs.near.org/docs/tutorials/contracts/intro-to-rust#3-step-rust-installation).
- [Git](https://git-scm.com/)
- Installed developer tools:
  - MacOS
    ```bash
    $ brew install cmake protobuf llvm awscli
    ```
  - Linux
    ```bash
    $ apt update
    $ apt install -y git binutils-dev libcurl4-openssl-dev zlib1g-dev libdw-dev libiberty-dev cmake gcc g++ python docker.io protobuf-compiler libssl-dev pkg-config clang llvm cargo awscli
    ```

## How to use this document {#how-to-use-this-document}

This document is separated into sections by network ID. Although all of the sections have almost the exact same steps/text, we found it more helpful to create individual sections so you can easily copy-paste commands to quickly get your node running.

### Choosing your `nearcore` version {#choosing-your-nearcore-version}

When building your NEAR node you will have two branch options to choose from depending on your desired use:

- `master` : _(**Experimental**)_
  - Use this if you want to play around with the latest code and experiment. This branch is not guaranteed to be in a fully working state and there is absolutely no guarantee it will be compatible with the current state of *mainnet* or *testnet*.
- [`Latest stable release`](https://github.com/near/nearcore/tags) : _(**Stable**)_
  - Use this if you want to run a NEAR node for *mainnet*. For *mainnet*, please use the latest stable release. This version is used by mainnet validators and other nodes and is fully compatible with the current state of *mainnet*.
- [`Latest release candidates`](https://github.com/near/nearcore/tags) : _(**Release Candidates**)_
  - Use this if you want to run a NEAR node for *tesnet*. For *testnet*, we first release a RC version and then later make that release stable. For testnet, please run the latest RC version.

#### (Optional) Enable debug logging {#optional-enable-debug-logging}

> **Note:** Feel free to skip this step unless you need more information to debug an issue.

To enable debug logging, run `neard` like this:

```bash
$ RUST_LOG=debug,actix_web=info ./target/release/neard --home ~/.near run
```

## `localnet` {#localnet}

### 1. Clone `nearcore` project from GitHub {#clone-nearcore-project-from-github}

First, clone the [`nearcore` repository](https://github.com/near/nearcore).

```bash
$ git clone https://github.com/near/nearcore
```

Next, checkout the release branch you need if you will not be using the default `master` branch. [ [More info](/validator/compile-and-run-a-node#choosing-your-nearcore-version) ]

```bash
$ git checkout master
```

### 2. Compile `nearcore` binary {#compile-nearcore-binary}

In the repository run the following commands:

```bash
$ make neard
```

This will start the compilation process. It will take some time
depending on your machine power (e.g. i9 8-core CPU, 32 GB RAM, SSD
takes approximately 25 minutes). Note that compilation will need over
1 GB of memory per virtual core the machine has. If the build fails
with processes being killed, you might want to try reducing number of
parallel jobs, for example: `CARGO_BUILD_JOBS=8 make neard`.

By the way, if you‚Äôre familiar with Cargo, you could wonder why not
run `cargo build -p neard --release` instead.  While this will produce
a binary, the result will be a less optimized version.  On technical
level, this is because building via `make neard` enables link-time
optimisation which is disabled by default. The binary path is `target/release/neard`.

For `localnet`, you also have the option to build in nightly mode (which is experimental and is used for cutting-edge testing). When you compile, use the following command:
```bash
$ cargo build --package neard --features nightly_protocol,nightly_protocol_features --release
```

### 3. Initialize working directory {#initialize-working-directory}

The NEAR node requires a working directory with a couple of configuration files. Generate the initial required working directory by running:

```bash
$ ./target/release/neard --home ~/.near init --chain-id localnet
```

> You can skip the `--home` argument if you are fine with the default working directory in `~/.near`. If not, pass your preferred location.

This command will create the required directory structure and will generate `config.json`, `node_key.json`, `validator_key.json`, and `genesis.json` files for `localnet` network.
- `config.json` - Neard node configuration parameters.
- `genesis.json` - A file with all the data the network started with at genesis. This contains initial accounts, contracts, access keys, and other records which represents the initial state of the blockchain.
- `node_key.json` -  A file which contains a public and private key for the node. Also includes an optional `account_id` parameter.
- `data/` -  A folder in which a NEAR node will write its state.
- `validator_key.json` - A file which contains a public and private key for local `test.near` account which belongs to the only local network validator.

### 4. Run the node {#run-the-node}

To run your node, simply run the following command:

```bash
$ ./target/release/neard --home ~/.near run
```

That's all. The node is running you can see log outputs in your console.

## `testnet` {#testnet}

### 1. Clone `nearcore` project from GitHub {#clone-nearcore-project-from-github-1}

First, clone the [`nearcore` repository](https://github.com/near/nearcore).

```bash
$ git clone https://github.com/near/nearcore
$ cd nearcore
$ git fetch origin --tags
```

Checkout to the branch you need if not `master` (default). Latest release is recommended. Please check the [releases page on GitHub](https://github.com/near/nearcore/releases).

```bash
$ git checkout tags/1.35.0 -b mynode
```

### 2. Compile `nearcore` binary {#compile-nearcore-binary-1}

In the `nearcore` folder run the following commands:

```bash
$ make neard
```

This will start the compilation process. It will take some time
depending on your machine power (e.g. i9 8-core CPU, 32 GB RAM, SSD
takes approximately 25 minutes). Note that compilation will need over
1 GB of memory per virtual core the machine has. If the build fails
with processes being killed, you might want to try reducing number of
parallel jobs, for example: `CARGO_BUILD_JOBS=8 make neard`.

By the way, if you‚Äôre familiar with Cargo, you could wonder why not
run `cargo build -p neard --release` instead.  While this will produce
a binary, the result will be a less optimized version.  On technical
level, this is because building via `make neard` enables link-time
optimisation which is disabled by default.

The binary path is `target/release/neard`

### 3. Initialize working directory {#initialize-working-directory-1}

The NEAR node requires a working directory with a couple of configuration files. Generate the initial required working directory by running:

```bash
$ ./target/release/neard --home ~/.near init --chain-id testnet --download-genesis --download-config
```

> You can skip the `--home` argument if you are fine with the default working directory in `~/.near`. If not, pass your preferred location.

This command will create the required directory structure and will generate `config.json`, `node_key.json`, and `genesis.json` files for `testnet` network.
- `config.json` - Neard node configuration parameters.
- `genesis.json` - A file with all the data the network started with at genesis. This contains initial accounts, contracts, access keys, and other records which represents the initial state of the blockchain.
- `node_key.json` -  A file which contains a public and private key for the node. Also includes an optional `account_id` parameter.
- `data/` -  A folder in which a NEAR node will write it's state.

> **Heads up**
> The genesis file for `testnet` is big (6GB +) so this command will be running for a while and no progress will be shown.

### 4. Get data backup {#get-data-backup}

The node is ready to be started.  When started as-is, it will establish
connection to the network and start downloading latest state.  This
may take a while so an alternative is to download [Node Data Snapshots](/intro/node-data-snapshots)
which will speed up the syncing.  The short of it is to install AWS
CLI and run:

```bash
$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/testnet/rpc/latest .
$ latest=$(cat latest)
$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/testnet/rpc/$latest ~/.near/data
```

> **Heads up**
> An RPC node stores around 500GB of data on disk.  Furthermore, it
> requires SSD to be able to keep up with network.  Make sure that you
> have enough free space on a fast-enough disk.

Note that you don‚Äôt have to perform this step if you prefer a fully
decentralized experience when the node downloads data from the NEAR
network.

### 5. Run the node {#run-the-node}
To start your node simply run the following command:

```bash
$ ./target/release/neard --home ~/.near run
```

That's all. The node is running you can see log outputs in your console. It will download a bit of missing data since the last backup was performed but it shouldn't take much time.

### 6. Prepare to become a validator {#prepare-validator-1}
To start validating we need to prepare by installing nodejs. Check [Nodesource repository](https://github.com/nodesource/distributions) for details on how to install nodejs on your distro. For Ubuntu, this will be done as follows:

```bash
$ sudo apt-get update
$ sudo apt-get install -y ca-certificates curl gnupg
$ sudo mkdir -p /etc/apt/keyrings
$ curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg

$ echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_20.x nodistro main" | sudo tee /etc/apt/sources.list.d/nodesource.list

$ sudo apt-get update
$ sudo apt-get install nodejs -y
$ sudo apt-get install npm -y
$ sudo npm install -g near-cli
```

### 7. Install and check near-cli 
Next we'll need to install near-cli with npm:

```bash
$ sudo npm install -g near-cli
$ export NEAR_ENV=testnet
$ near validators current
```

You should see a list of current validator for the network.

To make the NEAR_ENV persistent, add it to your bashrc:

```bash
$ echo 'export NEAR_ENV=testnet' >> ~/.bashrc
```

#### 8. Create a wallet {#create-wallet}
- TestNet: https://wallet.testnet.near.org/
>Node: this wallet is deprecated in favor of other wallets (i.e https://app.mynearwallet.com/) and near-cli will be updated soon to reflect this.

#### 9. Authorize Wallet Locally
A full access key needs to be installed locally to be able transactions via NEAR-CLI.

* You need to run this command:

```bash
$ near login
```

> Note: This command launches a web browser allowing for the authorization of a full access key to be copied locally.

1 ‚Äì Copy the link in your browser

![img](/images/1.png)

2 ‚Äì Grant Access to Near CLI

![img](/images/3.png)

3 ‚Äì After Grant, you will see a page like this, go back to console

![img](/images/4.png)

4 ‚Äì Enter your wallet and press Enter

![img](/images/5.png)

>Node: this wallet.testnet.near.org is deprecated in favor of other wallets (i.e https://app.mynearwallet.com/) and near-cli will be updated soon to reflect this.

### 10. Prepare validator key

When step #8 is completed, near-cli will create a key in your ~/.near-credentials/mainnet/ directory. We should use this for our validator. As such we move it to .near directory, add pool factory to accound it and change private_key to secret_key:

```bash 
$ cp ~/.near-credentials/testnet/<accountId>.testnet.json ~/.near/validator_key.json
$ sed -i -e "s/<accountId>.testnet/<accountId>.pool.f863973.m0/g"  ~/.near/validator_key.json
$ sed -i -e 's/private_key/secret_key/g' ~/.near/validator_key.json
```

### 11. Deploy a staking pool

To create a staking pool on the network, we need to call the create_staking_pool contract with required parameters and deploy it to the indicated accountId:

```bash
$ near call pool.f863973.m0 create_staking_pool '{"staking_pool_id": "<pool_name>", "owner_id": "<pool_owner_accountId>", "stake_public_key": "<public_key>", "reward_fee_fraction": {"numerator": <fee>, "denominator": 100}}' --accountId="<accountId>" --amount=30 --gas=300000000000000
```

From the command above, you need to replace:

* **Pool Name**: Staking pool name, the factory automatically adds its name to this parameter, creating {pool_name}.{staking_pool_factory}
Examples:   

  - `myamazingpool.pool.f863973.m0` 
  - `futureisnearyes.pool.f863973.m0` 
  
* **Pool Owner ID**: The NEAR account that will manage the staking pool. Usually your main NEAR account.
* **Public Key**: The public key from your **validator_key.json** file. 
* **Fee**: The fee the pool will charge in percents in 0-100 range.
* **Account Id**: The NEAR account deploying the staking pool. This needs to be a named account initialized within near-cli (be present in ~/.near-credentials/mainnet/ directory and exist on the network). It can be the same account as the pool owner id

> Be sure to have at least 30 NEAR available, it is the minimum required for storage.

You will see something like this:

![img](/images/pool.png)

If there is a ‚ÄúTrue‚Äù at the End. Your pool is created.

To change the pool parameters, such as changing the amount of commission charged to 1% in the example below, use this command:
```
$ near call <pool_name> update_reward_fee_fraction '{"reward_fee_fraction": {"numerator": 1, "denominator": 100}}' --accountId <account_id> --gas=300000000000000
```

### 12. Propose to start validating
> NOTE: Validator must be fully synced before issuing a proposal or depositing funds. Check the neard logs to see if syncing is completed.

In order to get a validator seat you must first submit a proposal with an appropriate amount of stake. Proposals are sent for epoch +2. Meaning if you send a proposal now, if approved, you would get the seat in 3 epochs. You should submit a proposal every epoch to ensure your seat. To send a proposal we use the ping command. A proposal is also sent if a stake or unstake command is sent to the staking pool contract.

To note, a ping also updates the staking balances for your delegators. A ping should be issued each epoch to keep reported rewards current on the pool contract.

#### Deposit and Stake NEAR

Deposit token to a pool (can be done using any account, not necessary the one created/used in steps above):
```bash
$ near call <staking_pool_id> deposit_and_stake --amount <amount> --accountId <accountId> --gas=300000000000000
```

#### Ping
A ping issues a new proposal and updates the staking balances for your delegators. A ping should be issued each epoch to keep reported rewards current.

Command:
```bash
$ near call <staking_pool_id> ping '{}' --accountId <accountId> --gas=300000000000000
```

Once above is completed, verify your validator proposal status:

```bash
$ near proposals
```
Your validator pool should have **"Proposal(Accepted)"** status

## `mainnet` {#mainnet}

### 1. Clone `nearcore` project from GitHub {#clone-nearcore-project-from-github-2}

First, clone the [`nearcore` repository](https://github.com/near/nearcore).

```bash
$ git clone https://github.com/near/nearcore
$ cd nearcore
$ git fetch origin --tags
```

Next, checkout the release branch you need you will not be using the
default `master` branch.  Please check the [releases page on
GitHub](https://github.com/near/nearcore/releases) for the latest
release.

For more information on choosing between `master` and latest release branch [ [click here](/validator/compile-and-run-a-node#choosing-your-nearcore-version) ].

```bash
$ git checkout tags/1.26.1 -b mynode
```

### 2. Compile `nearcore` binary {#compile-nearcore-binary-2}

In the `nearcore` folder run the following commands:

```bash
$ make neard
```

This will start the compilation process. It will take some time
depending on your machine power (e.g. i9 8-core CPU, 32 GB RAM, SSD
takes approximately 25 minutes). Note that compilation will need over
1 GB of memory per virtual core the machine has. If the build fails
with processes being killed, you might want to try reducing number of
parallel jobs, for example: `CARGO_BUILD_JOBS=8 make neard`.

By the way, if you‚Äôre familiar with Cargo, you could wonder why not
run `cargo build -p neard --release` instead.  While this will produce
a binary, the result will be a less optimized version.  On technical
level, this is because building via `make neard` enables link-time
optimisation which is disabled by default.

The binary path is `target/release/neard`

### 3. Initialize working directory {#initialize-working-directory-2}

In order to work NEAR node requires to have working directory and a couple of configuration files. Generate the initial required working directory by running:

```bash
$ ./target/release/neard --home ~/.near init --chain-id mainnet --download-config
```

> You can skip the `--home` argument if you are fine with the default working directory in `~/.near`. If not, pass your preferred location.

This command will create the required directory structure by generating a `config.json`, `node_key.json`, and downloads a `genesis.json` for `mainnet`.
- `config.json` - Neard node configuration parameters.
- `genesis.json` - A file with all the data the network started with at genesis. This contains initial accounts, contracts, access keys, and other records which represents the initial state of the blockchain.
- `node_key.json` -  A file which contains a public and private key for the node. Also includes an optional `account_id` parameter which is required to run a validator node (not covered in this doc).
- `data/` -  A folder in which a NEAR node will write it's state.

### 4. Get data backup {#get-data-backup-1}

The node is ready to be started. When started as-is, it will establish
connection to the network and start downloading latest state.  This
may take a while so an alternative is to download [Node Data Snapshots](/intro/node-data-snapshots)
which will speed up the syncing.  The short of it is to install AWS
CLI and run:

```bash
$ aws s3 --no-sign-request cp s3://near-protocol-public/backups/mainnet/rpc/latest .
$ latest=$(cat latest)
$ aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/mainnet/rpc/$latest ~/.near/data
```

> **Heads up**
> An RPC node stores around 500GB of data on disk.  Furthermore, it
> requires SSD to be able to keep up with network.  Make sure that you
> have enough free space on a fast-enough disk.

Note that you don‚Äôt have to perform this step if you prefer a fully
decentralized experience when the node downloads data from the NEAR
network.

### 5. Run the node {#run-the-node-1}
To start your node simply run the following command:

```bash
$ ./target/release/neard --home ~/.near run
```

The node is running and you can see log outputs in your console. It will download the missing data since the last snapshot was performed but it shouldn't take much time.

### 6. Prepare to become a validator {#prepare-validator-1}
To start validating we need to prepare by installing nodejs. Check [Nodesource repository](https://github.com/nodesource/distributions) for details on how to install nodejs on your distro. For Ubuntu, this will be done as follows:

```bash
$ sudo apt-get update
$ sudo apt-get install -y ca-certificates curl gnupg
$ sudo mkdir -p /etc/apt/keyrings
$ curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg

$ echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_20.x nodistro main" | sudo tee /etc/apt/sources.list.d/nodesource.list

$ sudo apt-get update
$ sudo apt-get install nodejs -y
$ sudo apt-get install npm -y
$ sudo npm install -g near-cli
```

### 7. Install and check near-cli 
Next we'll need to install near-cli with npm:

```bash
$ sudo npm install -g near-cli
$ export NEAR_ENV=mainnet
$ near validators current
```

You should see a list of current validator for the network.

To make the NEAR_ENV persistent, add it to your bashrc:

```bash
echo 'export NEAR_ENV=mainnet' >> ~/.bashrc
```

#### 8. Create a wallet {#create-wallet}
- MainNet: https://wallet.near.org/
>Node: this wallet.testnet.near.org is deprecated in favor of other wallets (i.e https://app.mynearwallet.com/) and near-cli will be updated soon to reflect this.

#### 9. Authorize Wallet Locally
A full access key needs to be installed locally to be able transactions via NEAR-CLI.

* You need to run this command:

```
near login
```

> Note: This command launches a web browser allowing for the authorization of a full access key to be copied locally.

1 ‚Äì Copy the link in your browser

![img](/images/1.png)

2 ‚Äì Grant Access to Near CLI

![img](/images/3.png)

3 ‚Äì After Grant, you will see a page like this, go back to console

![img](/images/4.png)

4 ‚Äì Enter your wallet and press Enter

![img](/images/5.png)

>Node: this wallet.testnet.near.org is deprecated in favor of other wallets (i.e https://app.mynearwallet.com/) and near-cli will be updated soon to reflect this.

### 10. Prepare validator key

When step #8 is completed, near-cli will create a key in your ~/.near-credentials/mainnet/ directory. We should use this for our validator. As such we move it to .near directory, add pool factory to accound it and change private_key to secret_key:

```bash 
$ cp ~/.near-credentials/testnet/<accountId>.mainnet.json ~/.near/validator_key.json
$ sed -i -e "s/<accountId>.mainnet/<accountId>.poolv1.near/g"  ~/.near/validator_key.json
$ sed -i -e 's/private_key/secret_key/g' ~/.near/validator_key.json
```

### 11. Deploy a staking pool

To create a staking pool on the network, we need to call the create_staking_pool contract with required parameters and deploy it to the indicated accountId:

```bash
$ near call poolv1.near create_staking_pool '{"staking_pool_id": "<pool_name>", "owner_id": "<pool_owner_accountId>", "stake_public_key": "<public_key>", "reward_fee_fraction": {"numerator": <fee>, "denominator": 100}}' --accountId="<accountId>" --amount=30 --gas=300000000000000
```

From the command above, you need to replace:

* **Pool Name**: Staking pool name, the factory automatically adds its name to this parameter, creating {pool_name}.{staking_pool_factory}
Examples:   

  - `myamazingpool.poolv1.near` 
  - `futureisnearyes.poolv1.near` 
  
* **Pool Owner ID**: The NEAR account that will manage the staking pool. Usually your main NEAR account.
* **Public Key**: The public key from your **validator_key.json** file. 
* **Fee**: The fee the pool will charge in percents in 0-100 range.
* **Account Id**: The NEAR account deploying the staking pool. This needs to be a named account initialized within near-cli (be present in ~/.near-credentials/mainnet/ directory and exist on the network). It can be the same account as the pool owner id

> Be sure to have at least 30 NEAR available, it is the minimum required for storage.

You will see something like this:

![img](/images/pool.png)

If there is a ‚ÄúTrue‚Äù at the End. Your pool is created.

To change the pool parameters, such as changing the amount of commission charged to 1% in the example below, use this command:
```
$ near call <pool_name> update_reward_fee_fraction '{"reward_fee_fraction": {"numerator": 1, "denominator": 100}}' --accountId <account_id> --gas=300000000000000
```

### 12. Propose to start validating
> NOTE: Validator must be fully synced before issuing a proposal or depositing funds. Check the neard logs to see if syncing is completed.

In order to get a validator seat you must first submit a proposal with an appropriate amount of stake. Proposals are sent for epoch +2. Meaning if you send a proposal now, if approved, you would get the seat in 3 epochs. You should submit a proposal every epoch to ensure your seat. To send a proposal we use the ping command. A proposal is also sent if a stake or unstake command is sent to the staking pool contract.

To note, a ping also updates the staking balances for your delegators. A ping should be issued each epoch to keep reported rewards current on the pool contract.

#### Deposit and Stake NEAR

Deposit token to a pool (can be done using any account, not necessary the one created/used in steps above):
```
$ near call <staking_pool_id> deposit_and_stake --amount <amount> --accountId <accountId> --gas=300000000000000
```

#### Ping
A ping issues a new proposal and updates the staking balances for your delegators. A ping should be issued each epoch to keep reported rewards current.

Command:
```bash
$ near call <staking_pool_id> ping '{}' --accountId <accountId> --gas=300000000000000
```

Once above is completed, verify your validator proposal status:

```bash
$ near proposals
```
Your validator pool should have **"Proposal(Accepted)"** status

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/validator/debug-rpc-and-debug-pages.md ---
---
id: debug-rpc-and-debug-pages
title: Debug RPC and Debug Pages
sidebar_label: Debug RPC and Debug Pages
sidebar_position: 9
---

Recently, we‚Äôve added a set of debug pages, that allow you to see more details about how your node works.

## Enabling debug page

Debug support must be enabled in the `config.json` (auto-generated by `neard` with `init` command)

```
cd ~/path_to_nearcore/nearcore
cargo run --package neard -- init # generates config.json on ~/.near/config.json
vim ~/.near/config.json # update "enable_debug_rpc" 
```

The file should be generated on the path `~/.near/config.json` with these default values.

```
"rpc": {
   ...
  "enable_debug_rpc": true
}
```

And restarting your node.

After this, you can go to `"/debug"` page to see links to all the sub-pages.

> Important: If you‚Äôre a mainnet validator, we‚Äôd suggest you to firewall-protect access to debug pages & APIs. Some debug API calls are quite expensive and if someone spams them, they can overload the system and impact your block production speed.

## Information on debug pages

Most of the debug pages should be self-explanatory, but here‚Äôs a quick overview of what they offer:

### Last blocks:

* quick overview of the most recent blocks - including their gas usage, time spent, who was responsible for producing the block/chunk etc.

![](/images/debug_last_blocks.png)

### Network info

* Shows you information about the currently reachable validators, about the state of your peers, and the routing of messages that are sent towards the validator

![](/images/debug_network.png)

### Epoch info

* shows you information about current (and past) epochs - when did they start, how many validators etc

* information about validator stakes, upcoming proposals & kickouts

* the history of validators in the previous epochs

* and shard sizes

![](/images/debug_epoch_info.png)

## Chain & chunk info page

* shows you information about the recent blocks & chunks: 

* * when chunks were requested, what parts are we waiting for, how long did download take etc etc.

![](/images/debug_chain_chunk.png)

### Sync page

![](/images/debug_sync.png)

shows the status of the sync (header sync, block sync etc) - and how many blocks are remaining

it also show the status of the catchup - when you‚Äôre requesting to track a new shard

### Validator page

* this page is the most complex one - as it shows the consensus layer:

* * when your node sent approvals

* * when your node is about to produce a block - it shows received approvals, chunk headers

![](/images/debug_validator.png)

Thanks to this page, you can debug why a given block wasn‚Äôt produced, or why it didn‚Äôt contain a chunk.

In the image above, the block 3253009 didn‚Äôt contain the chunk for shard 3, let‚Äôs understand why:

* This node was a block producer for this block (otherwise this row would be empty) - at at some time "F", it received a first approval from one of the other validators.

* Then more approvals and chunks started coming (for example munris.factory has sent chunk0 at time `F + 62ms` and `boot2.node` sent the approval at time `F + 528 ms`

* At one moment, this node received the 2/3 of the approvals needed ‚Äì this happened exactly at `F + 617 ms` - which we‚Äôd call the time "T".

* At this time, it was still missing chunk from shard 3 - so it decided to wait a little.

* 600ms later (so at time T + 643 ms) - it got tired of waiting and it produced the block WITHOUT chunk3

* In this example, we can see that verse2 was able to deliver the chunk eventually ‚Äì but that was far too late (as it arrived more than 1.3 seconds after time T).

For the block 3253014 - the situation was similar, but producer of chunk 4, was able to deliver it before the 600 ms cutoff (block arrived at `T + 430ms`) - which allowed this block producer to create the block 1 ms later (as all chunks were present).

### Approval history:

At the bottom of the validator page, you can see ‚Äúapproval history‚Äù table:

![](/images/debug_approval.png)

This shows all the approvals that your node has sent.

When everything is running fine, you‚Äôll see that your node is regularly sending approvals for the next blocks (from block X to block X+1).

Once there are some missing blocks etc, the node might decide to start sending ‚Äòskip‚Äô requests (basically saying - please ignore the blocks in the middle and build a new block Y on top of block X )

This table becomes very useful during debugging reasons why blocks weren‚Äôt produced - as sometimes the block producer might not get the approvals. And using this page, we can check whether approval was generated and at what time.

'''
'''--- docs/validator/deploy-on-mainnet.md ---
---
id: deploy-on-mainnet
title: Deploy Mainnet Staking Pool
sidebar_label: Deploy Mainnet Staking Pool
sidebar_position: 5
---

Deploying a node on `mainnet` is similar to deploying one on `testnet`
and requires the following steps:

1. Create `mainnet` wallet.
2. Build `mainnet` validator node daemon.
3. Initialize the node.
4. Deploy `mainnet` staking pool.
5. Run the validator node.

### 1. Create `mainnet` wallet {#create-wallet}

If you don‚Äôt have a NEAR account, first go to [NEAR
Wallet](https://wallet.near.org/) and create one.

### 2. Build `mainnet` validator node daemon {#build-node}

To build the validator first clone the [`nearcore`
repository](https://github.com/near/nearcore):

```bash
git clone https://github.com/near/nearcore.git
```

Once that‚Äôs done, figure out [the most recent stable
release](https://github.com/near/nearcore/releases).  Stable releases
are ones without `-rc.<number>` suffix (‚Äòrc‚Äô stands for ‚Äòrelease
candidate‚Äô).  This can be done automatically as follows:

```bash
NEAR_RELEASE_VERSION=$(curl -s https://github.com/near/nearcore/releases/latest |
                       tr '/" ' '\n' | grep "[0-9]\.[0-9]*\.[0-9]" | head -n 1)
```

Now, go to the cloned repository‚Äôs root directory and checkout the
code corresponding to the latest stable release:

```bash
cd nearcore
git checkout "refs/heads/${NEAR_RELEASE_VERSION:?}"
```

Finally, build the executable using `make`.  Note that building with
`cargo build --release` command *is not* sufficient to create fully
optimized executable:

```bash
make neard
```

### 3. Initialize the node {#init-node}

Once the daemon executable is built it‚Äôs time to initialize the node.

```bash
./target/release/neard init --chain-id=mainnet \
                            --account-id="<POOL_ID>.poolv1.near"
```

`<POOL_ID>` is the name you want to use for your staking pool.  Note
that at this point the `<POOL_ID>.poolv1.near` account doesn‚Äôt yet
exist.  We‚Äôre going to create it in the next step.

This command will create a `~/.near/validator_key.json` file which
will contain validator‚Äôs private key.  It‚Äôs a good idea to back this
file up in a secure location.  For now, read the validator‚Äôs public
key from this file:

```bash
grep public_key ~/.near/validator_key.json
```

### 4. Deploy `mainnet` Staking Pool {#deploy-staking-pool}

You can deploy the staking pool with [near-cli](https://github.com/near/near-cli),
using the `near call` command:

```bash
near call poolv1.near create_staking_pool '{
    "staking_pool_id": "<POOL_ID>",
    "owner_id": "<OWNER_ID>",
    "stake_public_key": "<VALIDATOR_KEY>",
    "reward_fee_fraction": {"numerator": <X>, "denominator": <Y>}
}' --account_id <OWNER_ID> --amount 30 --gas 300000000000000
```

It will invoke the `staking-pool-factory` method from [NEAR Core
Contracts](https://github.com/near/core-contracts), passing the
following parameters:

- `poolv1.near` is the staking pool factory,
- `<POOL_ID>` is the name of your validator (and the staking pool
  associated with it),
- `<OWNER_ID>` is the wallet that controls the pool (see [owner-only
  methods](https://github.com/near/core-contracts/tree/master/staking-pool#owner-only-methods)
  for more information),
- `<VALIDATOR_KEY>` is the validator node public key read in the
  previous step from the `~/.near/validator_key.json` file,
- `{"numerator": <X>, "denominator": <Y>}` sets the validator fees
  (for example`X=10` and `Y=100` means 10%),
- `--amount 30` attaches 30 $NEAR to the transaction to pay the
  contract storage,
- `--gas 300000000000000` specifies the amount of gas for the
  transaction (optional).

Note that if your `<POOL_ID>` is ‚Äòbuildlinks‚Äô, the staking pool
factory will deploy a contract called ‚Äòbuildlinks.poolv1.near‚Äô, and
your node will appear in the Explorer as ‚Äòbuildlinks.poolv1.near‚Äô.
This corresponds to the account identifier used in the previous step.

### 5. Run the validator node {#run-the-node}

Once the daemon is built, node is initialized and staking pool
created, the validator can be started.  To make sure the node has been
set up correctly, check that the configuration file located at
`~/.near/config.json` is the same as [this mainnet
config.json](https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/config.json):

```bash
sha1sum <~/.near/config.json
curl -s https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/config.json | sha1sum
```

If everything is in order, start your node with the following command:

```
./target/release/neard run
```

You can start your node without the JSON RPC endpoint by running the
above command with an additional `--disable-rpc` flag.  This reduces
resource use and attack vector by closing a listening port.

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/validator/exposing-validators-metrics-to-pagoda.md ---
---
id: exposing-validators-metrics-to-pagoda
title: Exposing Validators' Metrics to Pagoda
sidebar_label: Exposing Validators' Metrics to Pagoda
sidebar_position: 8
---

## Exposing Validator Metrics[^1]

The following instructions are applicable for mainnet validator nodes.

We kindly asking you to expose port 3030 to our scrapper, which is running from following addresses:

35.204.219.60

34.90.9.220

It's highly recommended to deny traffic from other sources.

The following instructions are applicable for mainnet validator nodes. 

> Note: We take security seriously, so we put a lot of effort into doing things right on this front. Also, as we appreciate your eventual concerns, we are happy to disclose architecture on our end, so you can put your mind at ease.

Please make sure that metrics are working - by looking at localhost:3030/metrics - if it doesn‚Äôt work  - please see the instructions below on configuring neard.

### How are we going to use the data?

The collected data will be used to monitor the health and performance of the network in general. We will use the data to look into performance of low-level details of running details, both in aggregate and of individual nodes.

However, note that we are not planning to investigate performance issues or missing blocks of individual nodes. We are only interested in the issues affecting the chain in general.

### Share you public IP with us
Please fill-in this form Sharing Validator Metrics with Pagoda - https://forms.gle/rQwwe9q4PKuUmGAx9

### Prerequisites
- *Linux* node [running validator](https://near-nodes.io/validator/compile-and-run-a-node#mainnet)
- Up to date distribution
- Root access to box (to configure firewall)
- Public IPv4 address

If you haven't done it yet, please [install jq](https://stedolan.github.io/jq/download/).

Debian based systems
```shell
sudo apt install jq
```

[Redhat/Centos](https://www.cyberithub.com/how-to-install-jq-json-processor-on-rhel-centos-7-8/)
```shell
sudo yum install jq -y
```

### 1. Configure firewall

We kindly asking you to expose port 3030 to our scrapper, which is running from following addresses:

- **35.204.219.60**
- **34.90.9.220**

It's highly recommended to deny traffic from other sources.
Based on your current setup, you can follow step for iptables or nftables configuration.
Please don't forget to make this change persistent, though particular steps are not in scope of this short document.

#### 1.1 iptables

```shell
# Define chain to allow particular source addresses
iptables -N trusted-pagoda-scrappers
iptables -A trusted-pagoda-scrappers -s 35.204.219.60 -j ACCEPT
iptables -A trusted-pagoda-scrappers -s 34.90.9.220 -j ACCEPT
iptables -A trusted-pagoda-scrappers -j DROP

# Accept incoming packets for neard only from trusted sources
iptables -A INPUT ! -i lo -p tcp --dport 3030 -j trusted-pagoda-scrappers
```

#### 1.2 nftables

```shell
# Define chain to allow particular source addresses
nft 'add chain ip filter trusted-pagoda-scrappers'
nft 'add rule ip filter trusted-pagoda-scrappers ip saddr 35.204.219.60 accept'
nft 'add rule ip filter trusted-pagoda-scrappers ip saddr 34.90.9.220 accept'
nft 'add rule ip filter trusted-pagoda-scrappers drop'

# Accept incoming packets for neard only from trusted sources
nft 'add rule ip filter INPUT iifname != "lo" tcp dport 3030 jump trusted-pagoda-scrappers'
```

### 2. Configure neard 

Rpc needs to listen on port **3030**, and we also like the debug page to be enabled.

```shell
T=$(mktemp) &&\
jq '.rpc.addr = "0.0.0.0:3030" | .rpc.enable_debug_rpc = true' \
~/.near/config.json > $T &&\
cat $T > ~/.near/config.json && rm $T
```

If you don't have `jq`, you can always edit configuration file manually

### 3. Restart neard

Perhaps you have systemd unit, then simply do
```shell
sudo systemctl restart neard
```

If you started neard manually, you can use something like following (assuming bash)
```bash
PID=$(pgrep neard)
WORKDIR=$(readlink "/proc/$PID/cwd")
mapfile -d '' -t COMMAND < "/proc/${PID}/cmdline"
kill $PID && cd "$WORKDIR" && eval "${COMMAND[@]}"
```

### 4. DNAT

If your validator is not running on public IP, please configure DNAT to forward port 3030.

### 5. Share you public IP with us

TBD

### 6. Enjoy aggregated metrics

TBD

### 7. Can I volunteer to have my metrics scraped?

Yes, ping us using TBD method and follow the same instructions in this doc.

## Overall architecture

As promised, here's a description of the network layout at our end, including some security measures.

![](/images/network_layout.svg)

First of all, there's a dedicated GCP project. That's where we have created VPC with a private subnet, and the instance running Prometheus scraper.
This instance is based on Ubuntu 22.04.LTS and is kept up to date, including all security updates.
On top of that, it is running in a very restricted environment. The firewall grants only egress HTTP to port 3030 on your end and denies all other incoming traffic. 
The only exception is the ssh port for maintenance. That is, however, allowed only through the GCP IAP tunnel.
To allow populating the Grafana dashboard, we also allowed HTTPS egress to a specific Grafana host.

On the Grafana side, all metrics are anonymized, the Dashboard is read-only, and it's accessible only to Authorized Users. Therefore there is no way to de-anonymise data and use them for anything nasty.

[^1]: This document has [published version](https://pagodaplatform.atlassian.net/wiki/spaces/DOCS/pages/149979169/Exposing+validators+metrics+to+Pagoda) which lives by its own life now.

'''
'''--- docs/validator/hardware.md ---
---
id: hardware
title: Hardware Requirements for Validator Node
sidebar_label: Hardware Requirements
sidebar_position: 1
description: NEAR Validator Node Hardware Requirements
---

This page covers the minimum and recommended hardware requirements for engaging with the NEAR platform as a validator node.

## Recommended Hardware Specifications {#recommended-hardware-specifications}

| Hardware       |  Recommended Specifications                                                  |
| -------------- | ---------------------------------------------------------------              |
| CPU            | x86_64 (Intel, AMD) processor with at least 8 physical cores                 |
| CPU Features   | CMPXCHG16B, POPCNT, SSE4.1, SSE4.2, AVX                                      |
| RAM            | 24GB DDR4                                                                    |
| Storage        | 2TB SSD (NVMe SSD is recommended. HDD will be enough for localnet only)      |

Verify CPU feature support by running the following command on Linux:

```
lscpu | grep -P '(?=.*avx )(?=.*sse4.2 )(?=.*cx16 )(?=.*popcnt )' > /dev/null \
  && echo "Supported" \
  || echo "Not supported"
```

## Minimal Hardware Specifications {#minimal-hardware-specifications}

| Hardware       |  Minimal Specifications                                                     |
| -------------- | ---------------------------------------------------------------             |
| CPU            | x86_64 (Intel, AMD) processor with at least 8 physical cores                |
| CPU Features   | CMPXCHG16B, POPCNT, SSE4.1, SSE4.2, AVX                                     |
| RAM            | 16GB DDR4                                                                    |
| Storage        | 1TB SSD (NVMe SSD is recommended. HDD will be enough for localnet only)   |

Verify CPU feature support by running the following command on Linux:

```
lscpu | grep -P '(?=.*avx )(?=.*sse4.2 )(?=.*cx16 )(?=.*popcnt )' > /dev/null \
  && echo "Supported" \
  || echo "Not supported"
```

## Cost Estimation {#cost-estimation}

Estimated monthly costs depending on operating system:

| Cloud Provider | Machine Size    | Linux                  |
| -------------- | --------------- | ---------------------- |
| AWS            | m5.2xlarge      | $330 CPU + $80 storage |
| GCP            | n2-standard-8   | $280 CPU + $80 storage |
| Azure          | Standard_F8s_v2 | $180 CPU + $40 storage |

<blockquote class="info">
<strong>Resources for Cost Estimation</strong><br /><br />

All prices reflect *reserved instances* which offer deep discounts on all platforms with a 1 year commitment

- AWS
  - cpu: https://aws.amazon.com/ec2/pricing/reserved-instances/pricing
  - storage: https://aws.amazon.com/ebs/pricing
- GCP
  - cpu: https://cloud.google.com/compute/vm-instance-pricing
  - storage: https://cloud.google.com/compute/disks-image-pricing
- Azure ‚Äî https://azure.microsoft.com/en-us/pricing/calculator

</blockquote>

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/validator/running-a-node-macos-linux.md ---
---
id: running-a-node
title: Run a Node on Linux and MacOS
sidebar_label: Run a Node (Linux and MacOS)
sidebar_position: 3
description: How to run a NEAR node using nearup on Linux and MacOS, with or without using Docker
---

*If this is the first time for you to setup a validator node, head to our [Validator Bootcamp üöÄ](/validator/validator-bootcamp). We encourage you to set up your node with Neard instead of Nearup as Nearup is not used on Mainnet. Please head to [Run a node](/validator/compile-and-run-a-node) for instructions on how to setup a RPC node with Neard.*

This doc is written for developers, sysadmins, DevOps, or curious people who want to know how to run a NEAR node using `nearup` on Linux and MacOS, with or without using Docker.

## `nearup` Installation {#nearup-installation}
You can install `nearup` by following the instructions at https://github.com/near-guildnet/nearup.

<blockquote class="info">
<strong>Heads up</strong><br /><br />

The README for `nearup` (linked above) may be **all you need to get a node up and running** in `testnet` and `localnet`. `nearup` is exclusively used to launch NEAR `testnet` and `localnet` nodes. `nearup` is not used to launch `mainnet` nodes.  See [Deploy Node on Mainnet](deploy-on-mainnet.md) for running a node on `mainnet`.

</blockquote>

The steps in the rest of this document will require `nearup`

## Running a Node using Docker {#running-a-node-using-docker}

### Install Docker {#install-docker}

By default we use Docker to run the client.

Follow these instructions to install Docker on your machine:

* [MacOS](https://docs.docker.com/docker-for-mac/install/)
* [Ubuntu](https://docs.docker.com/install/linux/docker-ce/ubuntu/)

### Running `nearup` with Docker {#running-nearup-with-docker}

<blockquote class="warning">
Note: `nearup` and `neard` are running inside the container. You have to mount the ~/.near folder to ensure you don't lose your data which should live on the host.
</blockquote>

Once `nearup` and Docker are installed (by following instructions in previous section), run:

```sh
docker run -v $HOME/.near:/root/.near -p 3030:3030 --name nearup nearup/nearprotocol run testnet
```

_(If you prefer to use `localnet` then just replace `testnet` with `localnet` in the command above)_

You might be asked for a validator ID; if you do not want to validate, simply press enter. For validation, please follow the [Validator Bootcamp](/validator/validator-bootcamp).

```text
Enter your account ID (leave empty if not going to be a validator):
```

#### Running in detached mode {#running-in-detached-mode}

To run `nearup` in docker's detached (non-blocking) mode, you can add `-d` to the `docker run` command,

```
docker run -v $HOME/.near:/root/.near -p 3030:3030 -d --name nearup nearup/nearprotocol run testnet
```

#### Execute `nearup` commands in container {#execute-nearup-commands-in-container}

To execute other `nearup` commands like `logs`, `stop`, `run`, you can use `docker exec`,

```
docker exec nearup nearup logs
docker exec nearup nearup stop
docker exec nearup nearup run {testnet/localnet}
```

(The container is running in a busy wait loop, so the container won't die.)

#### `nearup` logs {#nearup-logs}

To get the `neard` logs run:

```
docker exec nearup nearup logs
```

or,

```
docker exec nearup nearup logs --follow
```

To get the `nearup` logs run:

```
docker logs -f nearup
```

![text-alt](/images/docker-logs.png)

| Legend   |                                                            |
| :------- | :--------------------------------------------------------- |
| `# 7153` | BlockHeight                                                |
| `V/1`    | `V` (validator) or  `‚Äî`  (regular node) / Total Validators |
| `0/0/40` | connected peers / up to date peers / max peers             |

## Compiling and Running a Node without Docker {#compiling-and-running-a-node-without-docker}

Alternatively, you can build and run a node without Docker by compiling `neard` locally and pointing `nearup` to the compiled binaries. Steps in this section provide details of how to do this.

If [Rust](https://www.rust-lang.org/) isn't already installed, please [follow these instructions](https://docs.near.org/docs/tutorials/contracts/intro-to-rust#3-step-rust-installation).

For Mac OS, make sure you have developer tools installed and then use `brew` to install extra tools:

```text
brew install cmake protobuf clang llvm
```

For Linux, install these dependencies:

```text
sudo apt update
sudo apt install -y git binutils-dev libcurl4-openssl-dev zlib1g-dev libdw-dev libiberty-dev cmake gcc g++ python docker.io protobuf-compiler libssl-dev pkg-config clang llvm
```

Then clone the repo:

```text
git clone https://github.com/near/nearcore.git
cd nearcore
```
Checkout the version you wish to build:

```bash
git checkout <version>
```

You can then run:

```bash
make neard
```

This will compile the `neard` binary for the version you have checked out, it will be available under `target/release/neard`.

Note that compilation will need over 1 GB of memory per virtual core
the machine has. If the build fails with processes being killed, you
might want to try reducing number of parallel jobs, for example:
`CARGO_BUILD_JOBS=8 make neard`.

NB. Please ensure you build releases through `make` rather than `cargo
build --release`.  The latter skips some optimisations (most notably
link-time optimisation) and thus produces a less efficient executable.

If your machine is behind a firewall or NAT, make sure port 24567 is
open and forwarded to the machine where the node is going to be
running.

Finally, execute:

```bash
nearup run testnet --binary-path path/to/nearcore/target/release
```

If you want to run `localnet` instead of `testnet`, then replace
`testnet` with `localnet` in the command above.  (If you‚Äôre running
`localnet` you don‚Äôt need to open port 24567).

You might be asked for a validator ID; if you do not want to validate, simply press enter. For validation, please follow the [Validator Bootcamp](/validator/validator-bootcamp).

```text
Enter your account ID (leave empty if not going to be a validator):
```

## Running a Node on the Cloud {#running-a-node-on-the-cloud}

Create a new instance following the [Hardware
requirements](hardware.md).

Add firewall rules to allow traffic to port 24567 from all IPs
(0.0.0.0/0).

SSH into the machine.  Depending on your cloud provider this may
require different commands.  Often simple `ssh hosts-external-ip`
should work.  Cloud providers may offer custom command to help with
connecting to the instances: GCP offers [`gcloud compute
ssh`](https://cloud.google.com/sdk/gcloud/reference/compute/ssh), AWS
offers [`aws emr
ssh`](https://docs.aws.amazon.com/cli/latest/reference/emr/ssh.html)
and Azure offers [`az
ssh`](https://docs.microsoft.com/en-gb/cli/azure/ssh?view=azure-cli-latest).

Once connected to the instance, follow [the steps listed
above](#compiling-and-running-a-node-without-docker).

## Success Message {#success-message}

Once you have followed the steps for running a node with Docker or of Compiling without Docker, you should see messages similar to as shown below:

```text
Using local binary at path/to/nearcore/target/release
Our genesis version is up to date
Starting NEAR client...
Node is running!
To check logs call: `nearup logs` or `nearup logs --follow`
```

or

```text
Using local binary at path/to/nearcore/target/release
Our genesis version is up to date
Stake for user 'stakingpool.youraccount.testnet' with 'ed25519:6ftve9gm5dKL7xnFNbKDNxZXkiYL2cheTQtcEmmLLaW'
Starting NEAR client...
Node is running!
To check logs call: `nearup logs` or `nearup logs --follow`
```

## Starting a node from backup {#starting-a-node-from-backup}
Using data backups allows you to sync your node quickly by using public tar backup files. There are two types of backups for available for both `testnet` and `mainnet`:
- regular
- archival

### Archive links {#archive-links}

Download the latest snapshots from [Node Data Snapshots](/intro/node-data-snapshots).

Starting node using `neard` backup data

```bash
./neard init --chain-id <chain-id> --download-genesis
mkdir ~/.near/data
wget -c <link-above> -O - | tar -xC ~/.near/data
./neard run
```

Starting node using `nearup` backup data:

```bash
nearup run <chain-id> && sleep 30 && nearup stop
dir=$HOME/.near/<chain-id>/data
rm -r -- "$dir"  # clean up old DB files to avoid corruption
mkdir -- "$dir"
wget -c <link-above> -O - | tar -xC "$dir"
nearup run <chain-id>
```

In both examples, `<chain-id>` corresponds to `testnet` or `mainnet`.

**Note:** Default location for `neard` data is `~/.near/data`. `nearup` stores data by default in `~/.near/<chain-id>/data.`

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/validator/running-a-node-windows.md ---
---
id: running-a-node-windows
title: Run a Node on Windows
sidebar_label: Run a Node (Windows)
sidebar_position: 4
description: How to run a NEAR node using `nearup` on Windows
---

*If this is the first time for you to setup a validator node, head to our [Validator Bootcamp üöÄ](/validator/validator-bootcamp). We encourage you to set up your node with Neard instead of Nearup as Nearup is not used on Mainnet. Please head to [Run a node](/validator/compile-and-run-a-node) for instructions on how to setup a RPC node with Neard.*

This doc is written for developers, sysadmins, DevOps, or curious people who want to know how to run a NEAR node using `nearup` on Windows.

<blockquote class="warning">
<strong>Heads up</strong><br /><br />
This documentation may require additional edits. Please keep this in mind while running the following commands.
</blockquote>

## `nearup` Installation {#nearup-installation}
You can install `nearup` by following the instructions at https://github.com/near-guildnet/nearup.

<blockquote class="info">
<strong>Heads up</strong><br /><br />

The README for `nearup` (linked above) may be **all you need to get a node up and running** in `testnet` and `localnet`. `nearup` is exclusively used to launch NEAR `testnet` and `localnet` nodes. `nearup` is not used to launch `mainnet` nodes. See [Deploy Node on Mainnet](deploy-on-mainnet.md) for running a node on `mainnet`.

</blockquote>

1.  If Windows Subsystem for Linux is not enabled, open PowerShell as administrator and run:
    ```sh
    Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
    ```
    Then restart your computer.
2. Go to your Microsoft Store and look for Ubuntu; this is the Ubuntu Terminal instance. Install and launch it.
3. Now you might be asked for username and password, do not use admin as username.
4. Your Ubuntu Instance need initial before next steps
    ```sh
    sudo apt-get update
    sudo apt-get upgrade
    sudo apt-get install build-essential pkg-config libssl-dev
    ```
5. You need to install OpenSSL, which you will need to run the node. To download OpenSSL, please run the following commands in the Ubuntu Terminal:
    ```sh
    cd /tmp
    wget https://www.openssl.org/source/openssl-1.1.1.tar.gz
    tar xvf openssl-1.1.1.tar.gz
    ```
6. After it finished downloading OpenSSL, run the following commands to install:
    ```sh
    cd openssl-1.1.1
    sudo ./config -Wl,--enable-new-dtags,-rpath,'$(LIBRPATH)'
    sudo make
    sudo make install
    ```
    The files will be under the following directory: /usr/local/ssl.
7. Once this is finished, you have to ensure that Ubuntu is going to use the right version of OpenSSL. Now update the path for man pages and binaries. Run the following command:
    ```sh
    cd ../..
    sudo nano /etc/manpath.config
    ```
8. A text file will open, add the following line:
    ```sh
    MANPATH_MAP     /usr/local/ssl/bin      /usr/local/ssl/man
    ```
    Once this is done press ctrl + o . It will ask you to save the file, just press enter. Now press ctrl + x to exit.
9. To make sure that OpenSSL is installed run:
    ```sh
    openssl version -v
    ```
    This should show you the installed version. More info on this can be found here. (https://manpages.ubuntu.com/manpages/bionic/man1/version.1ssl.html)
10. Now you have to run the following commands to install all nessesary software and dependencies:
    ```sh
    sudo apt-get update
    sudo apt-get upgrade
    sudo apt-get install -y git jq binutils-dev libcurl4-openssl-dev zlib1g-dev libdw-dev libiberty-dev cmake gcc g++ protobuf-compiler python3 python3-pip llvm clang
    ```
    Install Rustup
    ```sh
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
    source $HOME/.cargo/env
    rustup default nightly
    ```
    Great! All set to get the node up and running!
11. Clone the github nearcore

    First we need to check a version which is currently working in `testnet`:
    ```sh
    curl -s https://rpc.testnet.near.org/status | jq .version
    ```
    You‚Äôll get something like this: "1.13.0-rc.2". "1.13.0" is a branch which we need to clone to build our node for `testnet`.

    ```sh
    git clone --branch 1.13.0 https://github.com/near/nearcore.git
    ```
12. This created a nearcore directory, change into that one and build a noce:
    ```sh
    cd nearcore
    make neard
    ```
13. Install nearup
    ```sh
    pip3 install --user nearup
    export PATH="$HOME/.local/bin:$PATH"
    ```
14. Final: And now run the `testnet`:
    ```sh
    nearup run testnet --binary-path ~/nearcore/target/release/neard
    ```
    To be sure node is running you can check logs
    ```sh
    nearup logs --follow
    ```

You might be asked for a validator ID; if you do not want to validate, simply press enter. For validation, please follow the [Validator Bootcamp](/validator/validator-bootcamp).

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/validator/staking-and-delegation.md ---
---
id: staking-and-delegation
title: Staking and Delegation
sidebar_label: Staking and Delegation
sidebar_position: 6
---

#  Staking on NEAR

Staking is a process of sending `StakeTransaction` that informs the network that a given node intends to become a validator in upcoming epochs. This particular type of transaction must provide a public key and staking amount. After the transaction is sent, a node that has a private key associated with the public key in the staking transaction must wait until two epochs to become a validator.

## What is a minimum amount to stake as a validator?
A node can become a NEAR validator only if the amount in the staking transaction is above [the seat price defined by the protocol](https://docs.near.org/concepts/basics/validators#intro-to-validators). The seat price for becoming a validator on the NEAR blockchain can fluctuate based on several factors, including the total number of tokens staked on the network and the number of validators.

The current seat price for validator is available here: [nearblocks.io/node-explorer](https://nearblocks.io/node-explorer)

## Smart Contract Based Staking

Delegation on NEAR is not implemented on the protocol level, which allows each validator to create or customize their own contract that they use to attract delegators. If validators want to accept delegated stake, they must deploy a staking pool contract, which defines commission fees and reward distribution split, and advertise that contract as the destination to delegate.

Unlike other PoS networks, NEAR uses a staking pool factory with a whitelisted staking smart contract to ensure delegators‚Äô funds are safe. Therefore, in order to run a validator node on NEAR, a staking pool must be deployed to a NEAR account and integrated into a NEAR validator node.

Each validator may decide their own commission fees and how reward distribution works.

## Stake with the NEAR CLI

For validators, there is an option to staking without deploying a staking pool smart contract. However, in choosing this option to stake directly without deploying a staking pool, you will prevent other delegators from delegating to you and will reduce your potential commission. If this is the approach you'd like to take:
- Please install the [near-cli](https://github.com/near/near-cli)
- The following commands may help you stake and unstake your NEAR.

### To Stake NEAR Directly Without a Staking Pool
```
near stake <accountId> <publicKey> --amount <amount>
```

### To Unstake NEAR Directly Without a Staking Pool
The unstaking command is simply changing the staking command to have a staking amount of 0.
```
near stake <accountId> <publicKey> --amount 0
```

---

# Delegation on NEAR

## How does delegating staking work?

NEAR token holders are encouraged to earn rewards by delegating their tokens. By staking your NEAR tokens, you help to secure the network and earn rewards. When you delegate your tokens, you are depositing and staking your token with a specific staking pool that has been deployed by a validator.

## How to choose your validator(s)?
A list of available pools for delegation (one per validator) is available on the [Explorer Validator](https://explorer.near.org/nodes/validators) page. Delegators should review validators' performance and commission charged to decide how best to delegate.

Delegators may use the [NEAR wallet](https://wallet.near.org/) or the [NEAR CLI](https://github.com/near/near-cli) to delegate to existing staking pools.

## Delegate with the NEAR Wallet

For delegators, who would like to delegate using the NEAR wallet, please create your `mainnet` wallet:
- Go to [wallet.near.org](https://wallet.near.org/) and create an account.
- Navigate to the [staking](https://app.mynearwallet.com/staking) tab to select an available staking pool to delegate your tokens.

## Delegate with the NEAR CLI

For delegators, who would like to delegate using the command line:
- Please install the [near-cli](https://github.com/near/near-cli)
- The following commands may help you stake, unstake, and withdraw your NEAR.

### To Deposit and Stake NEAR

```
near call <stakingPoolId> deposit_and_stake --amount <amount> --accountId <accountId> --gas=300000000000000
```

### Unstake All
Unstaking takes 2-3 epochs to complete. After the unstaking period, you may withdraw your NEAR from staking pool.
```
near call <stakingPoolId> unstake_all --accountId <accountId> --gas=300000000000000
```

### Unstake a Specified Amount
Please note the amount in yoctoNEAR. NB: Unstaking takes 2-3 epochs to complete. After the unstaking period, you may withdraw your NEAR from staking pool.

```
near call <stakingPoolId> unstake '{"amount": "<amount yoctoNEAR>"}' --accountId <accountId> --gas=300000000000000
```

### Withdraw All
```
near call <stakingPoolId> withdraw_all --accountId <accountId> --gas=300000000000000
```

### Withdraw a Specified Amount
Please note the amount in yoctoNEAR.
```
near call <stakingPoolId> withdraw '{"amount": "<amount yoctoNEAR>"}' --accountId <accountId> --gas=300000000000000
```

### See Updated Balance
If a staking pool hasn't had an action applied to it recently, it may show an old balance on all staked accounts. To see an updated balance, you can ping the pool.
```
near call <stakingPoolId> ping '{}' --accountId <accountId> --gas=300000000000000
```

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/validator/staking-pool-migration.md ---
---
id: staking-pool-migration
title: Upgradeable Staking Pool
sidebar_label: Upgradeable Staking Pool
sidebar_position: 7
---

#  Upgradeable Staking Pool

NEAR Protocol is launch an upgradeable staking pool contract with features include:
- Upgradeability
- Stake farming

In the future, this upgradeable staking pool contract will also support action to stake to Chunk-Only Producers. The upgradeable staking contract's name on Testnet is `factory01.littlefarm.testnet`. The contract name on Mainnet is `pool.near`.

### Deploy a New Staking Pool Contract
Calls the staking pool factory, creates a new staking pool with the specified name, and deploys it to the indicated accountId.

For Testnet: (This call will not work as the `code_hash` has not been added to the factory. Please stay tuned for announcement when this contract is ready.)

```
near call factory01.littlefarm.testnet  create_staking_pool '{"staking_pool_id": "<poolId>", "owner_id": "<accountId>", "stake_public_key": "<public key in validator.json>", "reward_fee_fraction": {"numerator": 5, "denominator": 100}, "code_hash": "GGfKUF9TuAFN4AzbecPonNGuRTuVqx8UPXmViogN8pRm"}' --accountId="<accountId>" --amount=4 --gas=300000000000000
```

For Mainnet:

```
near call pool.near create_staking_pool '{"staking_pool_id": "<poolId>", "owner_id": "<accountId>", "stake_public_key": "<public key>", "reward_fee_fraction": {"numerator": 5, "denominator": 100}}' --accountId="<accountId>" --amount=4 --gas=300000000000000
```

In the example above, you need to replace:

* **Pool ID**: Staking pool name, the factory automatically adds its name to this parameter, creating {pool_id}.{staking_pool_factory}. Let's take `aurora` as an example:   
   - `aurora.factory01.littlefarm.testnet` for testnet
   - `aurora.pool.near` for mainnet
* **Owner ID**: The NEAR account that will manage the staking pool. Usually your main NEAR account.
* **Public Key**: The public key in your **validator_key.json** file.
* **5**: The fee that the pool will charge (e.g. in this case 5 over 100 is 5% of fees).
* **Account Id**: The NEAR account deploying the staking pool.

> Be sure to have at least 4 NEAR available, it is the minimum required for storage in the new pool contract.

Once a new staking pool is deployed and associated now with the new node, you can start the stake migration to the new pool. To migrate stake, take a look at the [Stake and Delegation page](/validator/staking-and-delegation).

### Submit a Proposal
In order to have a validator seat, you must submit a proposal with a ping. A ping issues a new proposal and updates the staking balances for your delegators. A ping should be issued each epoch to keep reported rewards current.

Command:
```
near call <staking_pool_id> ping '{}' --accountId <accountId> --gas=300000000000000
```

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- docs/validator/validator-bootcamp.md ---
---
id: validator-bootcamp
title: NEAR Validator Bootcamp
sidebar_label: NEAR Validator Bootcamp üöÄ
sidebar_position: 2
description: NEAR Validator Bootcamp
---

# NEAR Validator Bootcamp üöÄ
---

### Validator Onboarding FAQ's

***What‚Äôs the current protocol upgrade that will increase the number of validators on Mainnet?***

The next upgrade to increase the number of mainnet validators will introduce Chunk-Only Producers, and is currently slated for Q3 2022. 

***How do I join NEAR as a validator on the Mainnet? What steps do I need to take?***

1. Find out more about how to become a validator, head to https://near.org/validators/
2. Join the [Open Shards Alliance Server](https://discord.com/invite/t9Kgbvf) to find out more on how to run nodes and participate on the guildnet.

***What are the future plans for NEAR Protocol?***

Learn about the protocol roadmap here https://near.org/blog/near-launches-simple-nightshade-the-first-step-towards-a-sharded-blockchain/.

---

## LESSON 1 - OVERVIEW OF NEAR

#### Blockchain Technology

Blockchain is a new technology originally developed by Bitcoin. The term most often used to describe blockchain technology is a ‚Äúpublic ledger‚Äù. An easy way to describe it, is that it‚Äôs similar to your banking statement that keeps track of balances, debits, and credits, with several key differences:

- Limitless ‚Äì Transactions can be added as long as the network is up and running
- Unchangeable ‚Äì Immutable once written (validated), it can not be modified
- Decentralized ‚Äì Maintained by individual nodes called validators worldwide
- Verifiable ‚Äì Transactions are verified via consensus by decentralized validators via a Proof of Stake (POS) or Proof of Work (POW) algorithm

#### Smart Contracts
Not all blockchains are equal. While some only allow the processing of transactions (balances, debits, and credits), blockchains like NEAR and Ethereum offer another layer of functionality that enables programs to run on the blockchain known as smart contracts.

An easy way to think about it is that ‚Äúsmart contract‚Äù enabled blockchains are like supercomputers. They allow for users and developers to pay a fee to use CPU/Memory (resources), and Disk (storage) on a global scale.

However, it does not make sense to store everything on the blockchain as it would be too expensive. Web front-ends (HTML, CSS, and JS) are served from web hosting, Github, or Skynet, and images are often stored on InterPlanetary File Systems (IPFS) like Filecoin or Arweave.

#### Sharding
As the founding blockchains, Bitcoin and Ethereum, began to grow, limitations presented themselves. They could only manage to process a specific number of transactions in a block/space of time. This created severe bottlenecks with processing, wait times,  and also significantly increased the transaction fee required to have transactions processed.

Sharding is a technological advancement that allows blockchains to scale and to provide more throughput, while decreasing wait times and keeping transaction fees low. It accomplishes this by creating additional shards as the use of the network grows.

#### About NEAR
NEAR Protocol was designed with a best-of-breed approach in mind. It focuses on fixing the bottlenecks of the earlier blockchains while also enhancing the user experience to enable broader adoption of blockchain technology by existing Web2 users and developers. NEAR is a sharded Proof of Stake (POS) blockchain.

#### Key Features
- Award-Winning Team ‚Äì Top Programmers in the world
- Proof of Stake (POS)
- Unlimited Shards
- User Experience (UX)
- Developer Experience (DX)
- Rainbow Bridge to ETH ‚Äì Bridge assets to and from ETH
- Aurora ‚Äì Run native ETH apps built-in solidity

#### Technology Stack
- Rust ‚Äì Primary Smart Contract Language
- Assembly Script ‚Äì Alternant Smart Contract Language (similar to TypeScript)
- NodeJS ‚Äì Tooling
- Javascript / React / Angular ‚Äì Frontends

---

## LESSON 2 - NEAR-CLI
NEAR-CLI is a command-line interface that communicates with the NEAR blockchain via remote procedure calls (RPC):

* Setup and Installation NEAR CLI
* View Validator Stats

> Note: For security reasons, it is recommended that NEAR-CLI be installed on a different computer than your validator node and that no full access keys be kept on your validator node.

### Setup NEAR-CLI

First, let's make sure the Debian machine is up-to-date.
```
sudo apt update && sudo apt upgrade -y
```

#### Install developer tools, Node.js, and npm
First, we will start with installing `Node.js` and `npm`:
```
curl -sL https://deb.nodesource.com/setup_17.x | sudo -E bash -  
sudo apt install build-essential nodejs
PATH="$PATH"
```

Check `Node.js` and `npm` version:
```
node -v
```
> v17.x.x

```
npm -v
```
> 8.x.x

#### Install NEAR-CLI
Here's the Github Repository for NEAR CLI.: https://github.com/near/near-cli. To install NEAR-CLI, unless you are logged in as root, which is not recommended you will need to use `sudo` to install NEAR-CLI so that the near binary is saved to /usr/local/bin

```
sudo npm install -g near-cli
```
### Validator Stats

Now that NEAR-CLI is installed, let's test out the CLI and use the following commands to interact with the blockchain as well as to view validator stats. There are three reports used to monitor validator status:

##### Environment
The environment will need to be set each time a new shell is launched to select the correct network.

Networks:
- GuildNet
- TestNet
- MainNet

Command:
```
export NEAR_ENV=<network> (use guildnet / testnet / mainnet)
```

##### Proposals
A proposal by a validator indicates they would like to enter the validator set, in order for a proposal to be accepted it must meet the minimum seat price.

Command:
```
near proposals
```

##### Validators Current
This shows a list of active validators in the current epoch, the number of blocks produced, number of blocks expected, and online rate. Used to monitor if a validator is having issues.

Command:
```
near validators current
```

##### Validators Next
This shows validators whose proposal was accepted one epoch ago, and that will enter the validator set in the next epoch.

Command:
```
near validators next
```

---

## LESSON 3 - SETUP UP A VALIDATOR
In this lesson you will learn about:
* Setting up a Node
* Difference between MainNet and TestNet
* Compiling Nearcore for MainNet
* Genesis file (genesis.json)
* Config file (config.json)

### Server Requirements
For Block Producing Validators, please refer to the [`Validator Hardware`](/validator/hardware)
For Chunk-Only Producers (an upcoming role on NEAR), please see the hardware requirement below:

| Hardware       | Chunk-Only Producer  Specifications                                   |
| -------------- | ---------------------------------------------------------------       |
| CPU            | 4-Core CPU with AVX support                                           |
| RAM            | 8GB DDR4                                                              |
| Storage        | 500GB SSD                                                             |

### Install required software & set the configuration

#### Prerequisites:
Before you start, you may want to confirm that your machine has the right CPU features. For more hardware specific information, please take a look of the [Hardware requirement](/validator/hardware).

```
lscpu | grep -P '(?=.*avx )(?=.*sse4.2 )(?=.*cx16 )(?=.*popcnt )' > /dev/null \
  && echo "Supported" \
  || echo "Not supported"
```
> Supported

Next, let's make sure the Debian machine is up-to-date.
```
sudo apt update && sudo apt upgrade -y
```

#### Install developer tools:
```
sudo apt install -y git binutils-dev libcurl4-openssl-dev zlib1g-dev libdw-dev libiberty-dev cmake gcc g++ python docker.io protobuf-compiler libssl-dev pkg-config clang llvm cargo
```
####  Install Python pip:

```
sudo apt install python3-pip
```
#### Set the configuration:

```
USER_BASE_BIN=$(python3 -m site --user-base)/bin
export PATH="$USER_BASE_BIN:$PATH"
```

#### Install Building env
```
sudo apt install clang build-essential make
```

#### Install Rust & Cargo
```
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

You will see the following:

![img](/images/rust.png)

Press 1 and press enter.

#### Source the environment
```
source $HOME/.cargo/env
```

### Clone `nearcore` project from GitHub
First, clone the [`nearcore` repository](https://github.com/near/nearcore).

```
git clone https://github.com/near/nearcore
cd nearcore
git fetch origin --tags
```

Checkout to the branch you need. Latest unstable release is recommended if you are running on testnet and latest stable version is recommended if you are running on mainnet. Please check the [releases page on GitHub](https://github.com/near/nearcore/releases).

```
git checkout tags/<version> -b mynode
```

### Compile `nearcore` binary
In the `nearcore` folder run the following commands:

```
make neard
```
The binary path is `target/release/neard`. If you are seeing issues, it is possible that cargo command is not found. Make sure `sudo apt install cargo`. Compiling `nearcore` binary may take a little while.

### Initialize working directory

In order to work properly, the NEAR node requires a working directory and a couple of configuration files. Generate the initial required working directory by running:

```
./target/release/neard --home ~/.near init --chain-id <network> --download-genesis
```

![img](/images/initialize.png)

This command will create the directory structure and will generate `config.json`, `node_key.json`, and `genesis.json` on the network you have passed. The genesis file for `testnet` is big (6GB +) so this command will be running for a while and no progress will be shown.

- `config.json` - Configuration parameters which are responsive for how the node will work. The config.json contains needed information for a node to run on the network, how to communicate with peers, and how to reach consensus. Although some options are configurable. In general validators have opted to use the default config.json provided.
- `genesis.json` - A file with all the data the network started with at genesis. This contains initial accounts, contracts, access keys, and other records which represents the initial state of the blockchain. The genesis.json file is a snapshot of the network state at a point in time. In contacts accounts, balances, active validators, and other information about the network. On MainNet, it is the state of what the network looked like at launch. On testnet or guildnet, it can include a more intermediate state if the network was hard-forked at one point.
- `node_key.json` -  A file which contains a public and private key for the node. Also includes an optional `account_id` parameter which is required to run a validator node (not covered in this doc).
- `data/` -  A folder in which a NEAR node will write it's state.

### Replace the `config.json`

From the generated `config.json`, there two parameters to modify:
- `boot_nodes`: If you had not specify the boot nodes to use during init in Step 3, the generated `config.json` shows an empty array, so we will need to replace it with a full one specifying the boot nodes.
- `tracked_shards`: In the generated `config.json`, this field is an empty empty. You will have to replace it to `"tracked_shards": [0]`

```
rm ~/.near/config.json
wget -O ~/.near/config.json https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/<network>/config.json
```

### Get data backup

The node is ready to be started. However, you must first sync up with the network. This means your node needs to download all the headers and blocks that other nodes in the network already have.

First, please install AWS CLI:
```
sudo apt-get install awscli -y
```

Then, download the snapshot using the AWS CLI:
```
aws s3 --no-sign-request cp s3://near-protocol-public/backups/<testnet|mainnet>/rpc/latest .
LATEST=$(cat latest)
aws s3 --no-sign-request cp --no-sign-request --recursive s3://near-protocol-public/backups/<testnet|mainnet>/rpc/$LATEST ~/.near/data
```

NOTE: The .tar file is around 147GB (and will grow) so make sure you have enough disk space to unpack inside the data folder.

### Run the node
To start your node simply run the following command:

```
cd nearcore
./target/release/neard --home ~/.near run
```

![img](/images/download.png)
The node is now running you can see log outputs in your console. Your node should be find peers, download headers to 100%, and then download blocks.

----

#### Using NearUp

You can set up a node using neard on Mainnet and Testnet. On Guildnet, you have the option to use NearUp to set the node. However, NearUp is not recommended or supported for Mainnet. We recommend that you use neard consistently on Guildnet, Testnet, and Mainnet.

However, if you choose to use NearUp, NearUp will download the necessary binaries and files to get up and running. You just need to provide the network to run and the staking pool id.

* Install NearUp:

```
pip3 install --user nearup
```
* Install latest NearUp Version:

```
pip3 install --user --upgrade nearup
```

####  Create a wallet
- MainNet: https://wallet.near.org/
- TestNet: https://wallet.testnet.near.org/
- GuildNet: `https://wallet.openshards.io/`

#### Authorize Wallet Locally
A full access key needs to be installed locally to be able transactions via NEAR-CLI.

For Guildnet
```
export NEAR_ENV=testnet
```

* You need to run this command:

```
near login
```

> Note: This command launches a web browser allowing for the authorization of a full access key to be copied locally.

1 ‚Äì Copy the link in your browser

![img](/images/1.png)

2 ‚Äì Grant Access to Near CLI

![img](/images/3.png)

3 ‚Äì After Grant, you will see a page like this, go back to console

![img](/images/4.png)

4 ‚Äì Enter your wallet and press Enter

![img](/images/5.png)

For Guildnet

* Download the latest genesis and config files:

```
cd ~/.near/guildnet
wget -c https://s3.us-east-2.amazonaws.com/build.openshards.io/nearcore-deploy/guildnet/config.json
wget -c https://s3.us-east-2.amazonaws.com/build.openshards.io/nearcore-deploy/guildnet/genesis.json
```
* Launch this command so set the Near guildnet Environment:

```
export NEAR_ENV=guildnet
```
You can also run this command to set the Near guildnet Environment persistent:
```
echo 'export NEAR_ENV=guildnet' >> ~/.bashrc
```

* Running command is:

```
nearup run $NEAR_ENV --account-id <staking pool id>
```
Where AccountId is xx.stake.guildnet, xx is your pool name for example bootcamp.stake.guildnet

For Testnet

* Download the latest genesis, config files:

```
cd ~/.near/testnet
wget -c https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/testnet/config.json
wget -c https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/testnet/genesis.json
```

* Download the latest snapshot:

```
mkdir ~/.near/testnet/data
cd ~/.near/testnet
wget -c https://near-protocol-public.s3.amazonaws.com/backups/testnet/rpc/data.tar -O - | tar -xf -
```

* Launch this command so set the Near testnet Environment:

```
export NEAR_ENV=testnet
```
* You can also run this command to set the Near testnet Environment persistent:

```
echo 'export NEAR_ENV=testnet' >> ~/.bashrc
```
* Running command is:

```
nearup run $NEAR_ENV --account-id <staking pool id>
```
Where AccountId is xx.pool.f863973.m0, xx is your pool name for example bootcamp.pool.f863973.m0

On the first run, NEARUp will ask you to enter a staking pool id, provide the staking pool id set up previously in the form {pool id}.{staking pool factory}

> **Note: This is the Chicken and the Egg.
> You have not created the staking pool, but need to provide the name.**

####  Check the validator_key.json
* Run the following command:

For Guildnet
```
cat ~/.near/guildnet/validator_key.json
```

For Testnet
```
cat ~/.near/testnet/validator_key.json
```

> Note: If a validator_key.json is not present, follow these steps to create one

Create a validator_key.json for Guildnet

*   Generate the Key file:

```
near generate-key <pool_id>
```
* Copy the file generated to Guildnet folder:

Make sure to replace YOUR_WALLET by your accountId
```
cp ~/.near-credentials/guildnet/<YOUR_WALLET>.json ~/.near/guildnet/validator_key.json
```
* Edit ‚Äúaccount_id‚Äù => `xx.stake.guildnet`, where xx is your PoolName

* Change `private_key` to `secret_key`

> Note: The account_id must match the staking pool contract name or you will not be able to sign blocks.\

File content must be in the following pattern:
```
{
  "account_id": "xx.stake.guildnet",
  "public_key": "ed25519:HeaBJ3xLgvZacQWmEctTeUqyfSU4SDEnEwckWxd92W2G",
  "secret_key": "ed25519:****"
}
```

Create a `validator_key.json` for Testnet

*   Generate the Key file:

```
near generate-key <pool_id>
```
* Copy the file generated to Testnet folder:
Make sure to replace YOUR_WALLET by your accountId
```
cp ~/.near-credentials/testnet/YOUR_WALLET.json ~/.near/testnet/validator_key.json
```
* Edit ‚Äúaccount_id‚Äù => xx.pool.f863973.m0, where xx is your PoolName
* Change `private_key` to `secret_key`

> Note: The account_id must match the staking pool contract name or you will not be able to sign blocks.\

File content must be in the following pattern:
```
{
  "account_id": "xx.stake.guildnet",
  "public_key": "ed25519:HeaBJ3xLgvZacQWmEctTeUqyfSU4SDEnEwckWxd92W2G",
  "secret_key": "ed25519:****"
}
```

#### Step 8 ‚Äì Check all files were generated

Command for Guildnet
```
ls ~/.near/guildnet
```

Command for Testnet
```
ls ~/.near/testnet
```

You should have: **validator_key.json  node_key.json  config.json  data  genesis.json**

# Setup using NEARCore (MainNet)
RECOMMENDED FOR MAINNET
#### Step 1 ‚Äì Installation required software & set the configuration

* Before you start, you might want to ensure your system is up to date.
```
sudo apt update && sudo apt upgrade -y
```
* Install Python
```
sudo apt install python3 git curl
```
* Install Building env
```
sudo apt install clang build-essential make
```
* Install Rust & Cargo
```
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```
Press 1 and press enter
![img](/images/rust.png)

* Source the environment
```
source $HOME/.cargo/env
```
* Clone the NEARCore Repo
```
git clone https://github.com/nearprotocol/nearcore.git
```
* Set environment to the latest release tag. For the latest release tag, please check here: https://github.com/near/nearcore/releases.  Note: RC tags are for Testnet only.
```
export NEAR_RELEASE_VERSION=1.26.1
```
```
cd nearcore
git checkout $NEAR_RELEASE_VERSION
make release
```
* Install Nodejs and NPM
```
curl -sL https://deb.nodesource.com/setup_17.x | sudo -E bash -
sudo apt install build-essential nodejs
PATH="$PATH"
```
* Install Near CLI

Once NodeJs and NPM are installed you can now install NEAR-Cli.

Unless you are logged in as root, which is not recommended you will need to use `sudo` to install NEAR-Cli so that the near binary to /usr/local/bin
```
sudo npm install -g near-cli
```
* Launch this command so set the Near Mainnet Environment:
```
export NEAR_ENV=mainnet
```
* You can also run this command to set the Near testnet Environment persistent:
```
echo 'export NEAR_ENV=mainnet' >> ~/.bashrc
```
#### Step 2 ‚Äì Create a wallet
MainNet: https://wallet.near.org/

#### Step 3 ‚Äì Authorize Wallet Locally
A full access key needs to be installed locally to be able transactions via NEAR-Cli.

* You need to run this command:
```
near login
```
> Note: This command launches a web browser allowing for the authorization of a full access key to be copied locally.

1 ‚Äì Copy the link in your browser

![img](/images/1.png)

2 ‚Äì Grant Access to Near CLI

![img](/images/3.png)

3 ‚Äì After Grant, you will see a page like this, go back to console

![img](/images/4.png)

4 ‚Äì Enter your wallet and press Enter

![img](/images/5.png)

#### Step 4 ‚Äì Initialize & Start the Node
* Download the latest genesis, config files:
```
mkdir ~/.near
cd ~/.near
wget -c https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/genesis.json
wget -c https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/config.json
```
* Download the latest snapshot from [the snapshot page](/intro/node-data-snapshots).

* Initialize NEAR:
```
target/release/neard init --chain-id="mainnet" --account-id=<staking pool id>
```
##### Create `validator_key.json`
* Generate the Key file:
```
near generate-key <pool_id>
```
* Copy the file generated to Mainnet folder.Make sure to replace YOUR_WALLET by your accountId
```
cp ~/.near-credentials/YOUR_WALLET.json ~/.near/mainnet/validator_key.json
```
* Edit ‚Äúaccount_id‚Äù => xx.poolv1.near, where xx is your PoolName
* Change ‚Äúprivate_key‚Äù to ‚Äúsecret_key‚Äù
> Note: The account_id must match the staking pool contract name or you will not be able to sign blocks.
> File content must be something like :
> {
>   "account_id": "xx.poolv1.near",
>   "public_key": "ed25519:HeaBJ3xLgvZacQWmEctTeUqyfSU4SDEnEwckWxd92W2G",
>   "secret_key": "ed25519:****"
> }
```
near generate-key <your_accountId>
vi ~/.near/{your_accountId}.json
```
Rename "private_key" to "secret_key", then move the file to ~/.near.

```
mv the file to ~/.near
```
Update "account_id" to be the staking_pool_id

> Note: The account_id must match the staking pool contract name or you will not be able to sign blocks.

* Start the Node
```
target/release/neard run
```
* Setup Systemd
Command:

```
sudo vi /etc/systemd/system/neard.service
```
Paste:

```[Unit]
Description=NEARd Daemon Service

[Service]
Type=simple
User=<USER>
#Group=near
WorkingDirectory=/home/<USER>/.near
ExecStart=/home/<USER>/nearcore/target/release/neard run
StandardOutput=file:/home/<USER>/.near/neard.log
StandardError=file:/home/<USER>/.near/nearderror.log
Restart=on-failure
RestartSec=30
KillSignal=SIGINT
TimeoutStopSec=45
KillMode=mixed

[Install]
WantedBy=multi-user.target
```

> Note: Change USER to your paths

Command:

```
sudo systemctl enable neard
```
Command:

```
sudo systemctl start neard
```
If you need to make a change to service because of an error in the file. It has to be reloaded:

```
sudo systemctl reload neard
```
##### Watch logs
Command:

```
journalctl -n 100 -f -u neard
```
Make log output in pretty print

Command:

```
sudo apt install ccze
```
View Logs with color

Command:

```
journalctl -n 100 -f -u neard | ccze -A
```
### Becoming a Validator
In order to become a validator and enter the validator set, a minimum set of success criteria must be met.

* The node must be fully synced
* The `validator_key.json` must be in place
* The contract must be initialized with the public_key in `validator_key.json`
* The account_id must be set to the staking pool contract id
* There must be enough delegations to meet the minimum seat price. See the seat price [here](https://explorer.testnet.near.org/nodes/validators).
* A proposal must be submitted by pinging the contract
* Once a proposal is accepted a validator must wait 2-3 epoch to enter the validator set
* Once in the validator set the validator must produce great than 90% of assigned blocks

Check running status of validator node. If ‚ÄúValidator‚Äù is showing up, your pool is selected in the current validators list.

### Submitting Pool Information (Mainnet Only)
Adding pool information helps delegators and also helps with outreach for upgrades and other important announcements: https://github.com/zavodil/near-pool-details.
The available fields to add are: https://github.com/zavodil/near-pool-details/blob/master/FIELDS.md.

The identifying information that we ask the validators:to provide are:
- Name
- Description
- URL
- Country and country code
- Email (for support)
- Telegram, Discord, or Twitter

Command:

```
near call name.near update_field '{"pool_id": "<pool_id>.poolv1.near", "name": "url", "value": "https://yoururl.com"}' --accountId=<accountId>.near  --gas=200000000000000
```
```
near call name.near update_field '{"pool_id": "<pool_id>.poolv1.near", "name": "twitter", "value": "<twitter>"}' --accountId=<account id>.near  --gas=200000000000000
```
```
near view name.near get_all_fields '{"from_index": 0, "limit": 3}'
```
```
near view name.near get_fields_by_pool '{"pool_id": "<pool_id>.poolv1.near"}'
```
---

## LESSON 4 - STAKING POOLS
NEAR uses a staking pool factory with a whitelisted staking contract to ensure delegators‚Äô funds are safe. In order to run a validator on NEAR, a staking pool must be deployed to a NEAR account and integrated into a NEAR validator node. Delegators must use a UI or the command line to stake to the pool. A staking pool is a smart contract that is deployed to a NEAR account.

### Deploy a Staking Pool Contract
#### Deploy a Staking Pool
Calls the staking pool factory, creates a new staking pool with the specified name, and deploys it to the indicated accountId.

For Guildnet
```
near call stake.guildnet create_staking_pool '{"staking_pool_id": "<pool id>", "owner_id": "<accountId>", "stake_public_key": "<public key>", "reward_fee_fraction": {"numerator": 5, "denominator": 100}}' --accountId="<accountId>" --amount=30 --gas=300000000000000
```

For Testnet
```
near call pool.f863973.m0 create_staking_pool '{"staking_pool_id": "<pool id>", "owner_id": "<accountId>", "stake_public_key": "<public key>", "reward_fee_fraction": {"numerator": 5, "denominator": 100}}' --accountId="<accountId>" --amount=30 --gas=300000000000000
```

For Mainnet
```
near call poolv1.near create_staking_pool '{"staking_pool_id": "<pool id>", "owner_id": "<accountId>", "stake_public_key": "<public key>", "reward_fee_fraction": {"numerator": 5, "denominator": 100}}' --accountId="<accountId>" --amount=30 --gas=300000000000000
```

From the example above, you need to replace:

* **Pool ID**: Staking pool name, the factory automatically adds its name to this parameter, creating {pool_id}.{staking_pool_factory}
Examples:   

- `nearkat.stake.guildnet` for guildnet
- `nearkat.pool.f863973.m0` for testnet
- `nearkat.poolv1.near` for mainnet

* **Owner ID**: The NEAR account that will manage the staking pool. Usually your main NEAR account.
* **Public Key**: The public key in your **validator_key.json** file.
* **5**: The fee the pool will charge (e.g. in this case 5 over 100 is 5% of fees).
* **Account Id**: The NEAR account deploying the staking pool.

> Be sure to have at least 30 NEAR available, it is the minimum required for storage.

To change the pool parameters, such as changing the amount of commission charged to 1% in the example below, use this command:
```
near call <pool_name> update_reward_fee_fraction '{"reward_fee_fraction": {"numerator": 1, "denominator": 100}}' --accountId <account_id> --gas=300000000000000
```

You will see something like this:

![img](/images/pool.png)

If there is a ‚ÄúTrue‚Äù at the End. Your pool is created.

**You have now configure your Staking pool.**

For Guildnet & Testnet
You can go to OSA Discord to ask for some guildnet or testnet token to be a validator,
https://discord.gg/GrBqK3ZJ2T

#### Configure your staking pool contract
Replace:

* Pool Name ‚Äì pool_id.staking_pool_factory
* Owner Id
* Public Key
* Reward Fraction
* Account Id
```
near call <pool name> new '{"owner_id": "<owner id>", "<public key>": "<public key>", "reward_fee_fraction": {"numerator": <reward fraction>, "denominator": 100}}' --accountId <accountId>
```
#### Manage your staking pool contract
> HINT: Copy/Paste everything after this line into a text editor and use search and replace. Once your pool is deployed, you can issue the commands below:

##### Retrieve the owner ID of the staking pool

Command:

```
near view {pool_id}.{staking_pool_factory} get_owner_id '{}'
```
##### Issue this command to retrieve the public key the network has for your validator
Command:

```
near view {pool_id}.{staking_pool_factory} get_staking_key '{}'
```
##### If the public key does not match you can update the staking key like this (replace the pubkey below with the key in your validator.json file)

```
near call {pool_id}.{staking_pool_factory} update_staking_key '{"stake_public_key": "<public key>"}' --accountId <accountId>
```

### Working with Staking Pools
> NOTE: Your validator must be fully synced before issuing a proposal or depositing funds.

### Proposals

In order to get a validator seat you must first submit a proposal with an appropriate amount of stake. Proposals are sent for epoch +2. Meaning if you send a proposal now, if approved, you would get the seat in 3 epochs. You should submit a proposal every epoch to ensure your seat. To send a proposal we use the ping command. A proposal is also sent if a stake or unstake command is sent to the staking pool contract.

To note, a ping also updates the staking balances for your delegators. A ping should be issued each epoch to keep reported rewards current on the pool contract. You could set up a ping using a cron job or use [Cron Cat](https://cron.cat/).

Staking Pools Factories for each network:
* **GuildNet**: stake.guildnet
* **TestNet**: pool.f863973.m0
* **MainNet**: poolv1.near

### Transactions
#### Deposit and Stake NEAR

Command:
```
near call <staking_pool_id> deposit_and_stake --amount <amount> --accountId <accountId> --gas=300000000000000
```
#### Unstake NEAR
Amount in yoctoNEAR.

Run the following command to unstake:
```
near call <staking_pool_id> unstake '{"amount": "<amount yoctoNEAR>"}' --accountId <accountId> --gas=300000000000000
```
To unstake all you can run this one:
```
near call <staking_pool_id> unstake_all --accountId <accountId> --gas=300000000000000
```
#### Withdraw

Unstaking takes 2-3 epochs to complete, after that period you can withdraw in YoctoNEAR from pool.

Command:
```
near call <staking_pool_id> withdraw '{"amount": "<amount yoctoNEAR>"}' --accountId <accountId> --gas=300000000000000
```
Command to withdraw all:
```
near call <staking_pool_id> withdraw_all --accountId <accountId> --gas=300000000000000
```

#### Ping
A ping issues a new proposal and updates the staking balances for your delegators. A ping should be issued each epoch to keep reported rewards current.

Command:
```
near call <staking_pool_id> ping '{}' --accountId <accountId> --gas=300000000000000
```
Balances
Total Balance
Command:
```
near view <staking_pool_id> get_account_total_balance '{"account_id": "<accountId>"}' --gas=300000000000000
```
#### Staked Balance
Command:
```
near view <staking_pool_id> get_account_staked_balance '{"account_id": "<accountId>"}'
```
#### Unstaked Balance
Command:
```
near view <staking_pool_id> get_account_unstaked_balance '{"account_id": "<accountId>"}'
```
#### Available for Withdrawal
You can only withdraw funds from a contract if they are unlocked.

Command:
```
near view <staking_pool_id> is_account_unstaked_balance_available '{"account_id": "<accountId>"}'
```
#### Pause / Resume Staking
##### Pause
Command:
```
near call <staking_pool_id> pause_staking '{}' --accountId <accountId>
```
##### Resume
Command:
```
near call <staking_pool_id> resume_staking '{}' --accountId <accountId>
```

---

## LESSON 5 - MONITORING
### Log Files
The log file is stored either in the ~/.nearup/logs directory or in systemd depending on your setup.

NEARUp Command:
```
nearup logs --follow
```

Systemd Command:
```
journalctl -n 100 -f -u neard | ccze -A
```

**Log file sample:**

Validator | 1 validator

```
INFO stats: #85079829 H1GUabkB7TW2K2yhZqZ7G47gnpS7ESqicDMNyb9EE6tf Validator 73 validators 30 peers ‚¨á 506.1kiB/s ‚¨Ü 428.3kiB/s 1.20 bps 62.08 Tgas/s CPU: 23%, Mem: 7.4 GiB
```

* **Validator**: A ‚ÄúValidator‚Äù will indicate you are an active validator
* **73 validators**: Total 73 validators on the network
* **30 peers**: You current have 30 peers. You need at least 3 peers to reach consensus and start validating
* **#46199418**: block ‚Äì Look to ensure blocks are moving

### RPC
Any node within the network offers RPC services on port 3030 as long as the port is open in the nodes firewall. The NEAR-CLI uses RPC calls behind the scenes. Common uses for RPC are to check on validator stats, node version and to see delegator stake, although it can be used to interact with the blockchain, accounts and contracts overall.

Find many commands and how to use them in more detail here:

- https://docs.near.org/api/rpc/introduction

Command:
```
sudo apt install curl jq
```
##### Common Commands:
###### Check your node version:
Command:
```
curl -s http://127.0.0.1:3030/status | jq .version
```
###### Check Delegators and Stake
Command:
```
near view <your pool>.stake.guildnet get_accounts '{"from_index": 0, "limit": 10}' --accountId <accountId>.guildnet
```
###### Check Reason Validator Kicked
Command:
```
curl -s -d '{"jsonrpc": "2.0", "method": "validators", "id": "dontcare", "params": [null]}' -H 'Content-Type: application/json' https://rpc.openshards.io | jq -c ".result.prev_epoch_kickout[] | select(.account_id | contains ("<POOL_ID>"))" | jq .reason
```
###### Check Blocks Produced / Expected
Command:
```
curl -s -d '{"jsonrpc": "2.0", "method": "validators", "id": "dontcare", "params": [null]}' -H 'Content-Type: application/json' http://localhost:3030/ | jq -c ".result.current_validators[] | select(.account_id | contains ("POOL_ID"))"
```
### Prometheus
Monitoring disk, CPU, memory, network io, missed blocks, and peers is critically important to a healthy node. Prometheus and Grafana combined provide monitoring and visual reporting tools. Please note that Prometheus is best set up on another machine due the storage requirement for logs.

#### Installation
Command:
```
sudo apt-get update
```
Command:
```
sudo apt-get install prometheus prometheus-node-exporter prometheus-pushgateway
prometheus-alertmanager
```
Check that Prometheus was installed and is in your path.
```
prometheus --version
```
#### Start Services
Command:
```
sudo systemctl status prometheus
```
Command:
```
sudo systemctl status prometheus-node-exporter
```
Command:
```
sudo vi /etc/prometheus/prometheus.yml
```
#### Update the targets and save
targets: [‚Äòlocalhost:9093‚Äô, ‚Äòlocalhost:3030‚Äô]

#### Reference the rules file
Load rules once and periodically evaluate them according to the global 'evaluation_interval'.

```
rule_files:

- "rules.yml"
```
#### Setup Postfix email
Command:
```
sudo apt-get install mailutils
```
#### Setup Responses
* internet site
* enter a domain name (Used for the from email address)

Command
```
sudo vi /etc/postfix/main.cf
```
#### Update and save the config file
* inet_interfaces = all to inet_interfaces = localhost
* inet_protocols = all to inet_protocols = ipv4

#### Restart postfix
Command:
```
sudo service postfix restart
```
#### Add the hostname used with Postfix
Command:
```
sudo vi /etc/hostname
```
Command
```
sudo nano /etc/hosts
```
#### Send a test email
```
echo "This is the body of the email" | mail -s "This is the subject line" user@example.com
```
#### Update rules.yml
Command:
```
sudo vi /etc/prometheus/rules.yml
```
```
groups:
  - name: near
    rules:
      - alert: InstanceDown
        expr: up == 0
        for: 1m
        labels:
          severity: "critical"
        annotations:
          summary: "Endpoint {{ $labels.instance }} down"
          description: "{{ $labels.instance }} of job {{ $labels.job }} "
      - alert: NearVersionBuildNotMatched
        expr: near_version_build{instance="yournode.io", job="near"} != near_dev_version_build{instance="yournode.io", job="near"}
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "Near Node Version needs updated."
          description: "Your version is out of date and you risk getting kicked."
      - alert: StakeBelowSeatPrice
        expr: abs((near_current_stake / near_seat_price) * 100) < 100
        for: 2m
        labels:
          severity: critical
        annotations:
          description: 'Pool is below the current seat price'
```
#### Restart services
Command:
```
sudo systemctl restart prometheus
```
Command:
```
sudo systemctl status prometheus
```
```
sudo systemctl status prometheus
```
### Grafana
#### Download and add the package
Command:
```
wget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -
```
Command:
```
sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
```
Command:
```
sudo apt-get install grafana
```
#### Setup Rules
Command:
```
sudo vi /etc/prometheus/rules.yml
```
```
- job_name: validator
  - static_configs:
    - targets: ['localhost:9093']
```
#### Update alert manager
Command:
```
sudo vi /etc/init.d/prometheus-alertmanager
```
```
NAME=prometheus-alertmanager
```
#### Set the command-line arguments
Command:
```
sudo vi /etc/default/prometheus-alertmanager
```
```
ARGS="--cluster.listen-address="
```
#### Start & Reload services
Command:
```
sudo systemctl daemon-reload
```
```
sudo systemctl enable grafana-server.service
```
```
sudo systemctl start grafana-server
```
```
sudo service grafana-server status
```
#### Install additional plugins
```
sudo grafana-cli plugins install simpod-json-datasource
```
```
sudo grafana-cli plugins install ryantxu-ajax-panel
```
#### Restart service and update password
```
service grafana-server restart
```
```
sudo grafana-cli admin reset-admin-password admin
```
#### Open Ports to specific IP
Command:
```
sudo iptables -L
```
Command:
```
sudo iptables -A INPUT -p tcp --dport 3000 -s 66.73.0.194 -j ACCEPT
```
```
sudo netfilter-persistent save
```
```
sudo netfilter-persistent reload
```
#### Create Dashboard
* Add datasource Prometheus
* Add Notification channel email
* Config grafana email

Command
```
sudo vi /etc/grafana/grafana.ini
```
```
enabled = true
host = localhost:25
skip_verify = true
from_address = moinitor@yournode.com
from_name = Validator
```
#### Restart service
```
service grafana-server restart
```
#### Watch logs
```
sudo tail -f /var/log/grafana/grafana.log
```
#### Install Prometheus Exporter

Command:
```
sudo apt install golang-go
git clone https://github.com/masknetgoal634/near-prometheus-exporter.git
cd near-prometheus-exporter/
go build -a -installsuffix cgo -ldflags="-w -s" -o main .
```
#### Start exporter
Command:
```
./main -accountId <contract account id>
netstat -an | grep 9333
```
#### Update Prometheus

Command:
```
sudo vi /etc/prometheus/prometheus.yml
```

```
- job_name: near-node
scrape_interval: 15s
static_configs:
- targets: ['<NODE_IP_ADDRESS>:3030']
```
#### Update AlertManager
```
sudo vi /etc/prometheus/alertmanager.yml
```
```
postqueue -p
```
```
amtool alert
```
```
promtool check rules /etc/prometheus/rules.yml
```
```
promtool check config /etc/prometheus/prometheus.yml
```
```
amtool check-config /etc/prometheus/alertmanager.yml
```
```
cd near-prometheus-exporter/
```
```
mv main near-exporter
```
```
sudo vi /lib/systemd/system/near-exporter.service
```

```
[Unit]

Description=NEAR Prometheus Exporter

[Service]

Restart=always

User=prometheus

EnvironmentFile=/etc/default/near-exporter

ExecStart=/opt/near-prometheus-exporter/near-exporter $ARGS

ExecReload=/bin/kill -HUP $MAINPID

TimeoutStopSec=20s

SendSIGKILL=no

[Install]

WantedBy=multi-user.target
```
#### Update exporter
Command:
```
sudo vi /etc/default/near-exporter

# Set the command-line arguments to pass to the server.

# Set you contract name

ARGS="-accountId yournode"
```
#### Copy config and start service
Command:
```
sudo cp /lib/systemd/system/near-exporter.service /etc/systemd/system/near-exporter.service
```
```
sudo chmod 644 /etc/systemd/system/near-exporter.service
```
```
sudo systemctl start near-exporter
```
```
sudo systemctl status near-exporter
```
```
ps -elf | grep near-exporter
```
```
netstat -an | grep 9333
```
```
sudo systemctl enable near-exporter
```
---

## LESSON 6 - TROUBLESHOOTING
In this lesson you will learn about:

* Keys
* Common Errors

### Keys
NEAR uses cryptographic keys to secure accounts and validators, each key has a public and matching private key pair.

Find more detailed information about NEAR and keys:
https://docs.near.org/concepts/basics/account#access-keys

#### Validator Keys:
To manage and sign transactions a node_key and validator_key.

##### Node Key:

Used to communicate with other peers and is primarily responsible for syncing the blockchain.
```
~/.near/<network>/node_key.json
```
Common Issue:

In a failure situation, both the node_key and validator_key must be copied over

##### Validator Key:

Used to sign and validate blocks.
```
~/.near/<network>/validator_key.json
```
Common Issues:

1. The validator key used to initialize the staking contract is not the one listed in validator_key.json
2. The account Id submitted when NEARUp was initialized is not the same as the one in validator_key.json

### Common Errors & Solutions
#### Submitting a proposal before the validator is synced
A validator must be fully synced before submitting a proposal to enter the validator set. If you are not fully synced and you entered the validator set your log will be filled with errors.

**Resolution**
Wait until 4 epochs until you have been kicked from the validator set. Delete the data directory and resync. Be sure to be fully synced before staking actions or pings go to your pool.
```
1. Stop the node
2. rm -Rf ~/.near/<NETWORK_ID>/data
3. Start the node
```
#### Starting the node when another instance is running
On occasion, a process will get disconnected from the shell or NEARUp. The common error seen when trying to start the node will be:
```
Err value: Os { code: 98, kind: AddrInUse, message: "Address already in use" }',
```
**Resolution**
Find the pid of the running process
```
ps -elf | grep neard
```
Kill the hung pid
```
kill -9 <PID>
```
#### Running out of Disk space
If you find no space left on device errors in the validator log files then you likely ran out of disk space.
```
1. Stop the node
2. Failover to a backup node
3. Cleanup files or resize disk
4. Fail back over.
```
#### Not enough stake to obtain a validator seat
You can check that your validator proposal was accepted by checking
```
near proposals
```
#### Not producing blocks
Your validator is producing zero blocks in near validators current.

This is due the staking pool contract and the validator_key.json have different public keys or the account_id in validator_key.json not being the staking pool contract id.

**Get the staking pool key**
```
near view <POOL_ID> get_staking_key '{}'
```
**Get the key in validator_key.json**
```
cat ~/.near/<network>/validator_key.json | grep public_key
```
> Note: Both keys must match. If they do not update the staking pool key and wait 2 epochs before pinging.

**Update staking pool key**
```
near call <POOL_ID> update_staking_key '{"stake_public_key": "<PUBLIC_KEY>"}' --accountId <ACCOUNT_ID>
```
**Check the account_id is set to the staking pool contract**
```
vi ~/.near/<network>/validator_key.json
```
```
"account_id" = <staking pool id>
```
> Note: if it does now match the staking pool id upate it and restart your node.

#### Not producing enough blocks or chunks
Missing blocks or chunks is the primary reason a validator is kicked from the validator pool. You can check the number of blocks expected/missed via NEAR-Cli and RPC.

**NEAR-CLI**

```
near validators current | grep <pool id>
```
**RPC**
```
curl -s -d '{"jsonrpc": "2.0", "method": "validators", "id": "dontcare", "params": [null]}' -H 'Content-Type: application/json' http://localhost:3030/ | jq -c ".result.current_validators[] | select(.account_id | contains ("<POOL_ID>"))"
```
**Check the reason kicked**
```
curl -s -d '{"jsonrpc": "2.0", "method": "validators", "id": "dontcare", "params": [null]}' -H 'Content-Type: application/json' https://rpc.openshards.io | jq -c ".result.prev_epoch_kickout[] | select(.account_id | contains ("<POOL_ID>"))" | jq .reason
```
#### Not exporting the correct environment
Be sure that you are using the correct environment each time you run NEAR-Cli

```
export NEAR_ENV=<mainnet,testnet,guildnet>
```
#### Incompatible CPU without AVX support
One cause of missed blocks and nodes falling out of sync is running on a CPU without AVX support. AVX support is required, but not always used depending on the complexity of the transaction.

#### Not running on SSD drives
NEAR Requires a 1 second block time and HDD disks are just not fast enough. SDD drives are required and SSD NVME drives are recommended.

#### Inconsistent Internet connection
NEAR requires a 1 second block time, so any latency from your internet provider can cause you to miss blocks.

#### Inability to gain enough peers for consensus
If you are unable to gain any peers a restart can help. In some rare cases the boot_nodes in config.json can be empty.

Logs like that :
```
INFO stats: #42376888 Waiting for peers 0/0/40 peers ‚¨á 0 B/s ‚¨Ü 0 B/s 0.00 bps 0 gas/s CPU: 2%, Mem: 91.3 MiB
```

**Resolution**
Download the latest config.json file and restart:
- For Testnet: `https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/testnet/config.json`
- For Mainnet: `https://s3-us-west-1.amazonaws.com/build.nearprotocol.com/nearcore-deploy/mainnet/config.json`

## LESSON 7 - NODE FAILOVER
It is an unspoken requirement to maintain a secondary node in a different location in the event of a hardware or network failure on your primary node.

You will need to set up a standard node (without a validator key) and a different node_key. The node will be set up using the normal process see Setup a Validator Node.

Note: The backup node must track the same shard in the config.json as the primary node, to be used as a failover node. Please confirm the backp node has the the same `config.json` as the primary node.

```
"tracked_shards":[0],
```

### Failing Over
To failover you must copy the node_key.json and the validatory_key.json to the secondary node and restart.
```
1. Copy over node_key.json
2. Copy over validator_key.json
4. Stop the node primary node
3. Stop the secondary node
4. Restart the secondary node
```
When failing back over to the primary simply move the secondary node_key.json into place and restart the services in reverse order.

>Got a question?
<a href="https://stackoverflow.com/questions/tagged/nearprotocol">
  <h8>Ask it on StackOverflow!</h8></a>

'''
'''--- website/README.md ---
# Website

This website is built using [Docusaurus 2](https://docusaurus.io/), a modern static website generator.

### Installation

```
$ yarn
```

### Local Development

```
$ yarn start
```

This command starts a local development server and opens up a browser window. Most changes are reflected live without having to restart the server.

### Build

```
$ yarn build
```

This command generates static content into the `build` directory and can be served using any static contents hosting service.

### Deployment

Using SSH:

```
$ USE_SSH=true yarn deploy
```

Not using SSH:

```
$ GIT_USER=<Your GitHub username> yarn deploy
```

If you are using GitHub pages for hosting, this command is a convenient way to build the website and push to the `gh-pages` branch.

'''
'''--- website/babel.config.js ---
module.exports = {
  presets: [require.resolve('@docusaurus/core/lib/babel/preset')],
};

'''
'''--- website/docusaurus.config.js ---
// @ts-check
// Note: type annotations allow type checking and IDEs autocompletion

const math = require('remark-math');
const katex = require('rehype-katex');

/** @type {import('@docusaurus/types').Config} */
const config = {
  title: 'NEAR Nodes',
  tagline: 'NEAR Node Documentation',
  url: 'https://near-nodes.io',
  baseUrl: '/',
  onBrokenLinks: 'throw',
  onBrokenMarkdownLinks: 'warn',
  favicon: 'img/favicon.ico',
  organizationName: 'near', // Usually your GitHub org/user name.
  projectName: 'node-docs', // Usually your repo name.
  scripts: [
    "https://use.fontawesome.com/releases/v5.15.4/js/all.js",
  ],
  themes: ["@saucelabs/theme-github-codeblock",
    [
      require.resolve("@easyops-cn/docusaurus-search-local"),
      {
        hashed: true,
        indexPages: false,
        indexBlog: false,
        docsRouteBasePath: ['/'],
        docsDir: ["../docs"],
        language: ["en"],
      },
    ],
  ],
  stylesheets: [
    "https://fonts.googleapis.com/css2?family=Manrope:wght@500;600;700&display=swap",
    "https://cdn.statically.io/gh/nearprotocol/near-global-footer/main/footer.css",
    {
      href: 'https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css',
      type: 'text/css',
      integrity: 'sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM',
      crossorigin: 'anonymous',
    },
  ],
  presets: [
    [
      'classic',
      /** @type {import('@docusaurus/preset-classic').Options} */
      ({
        docs: {
          sidebarPath: require.resolve('./sidebars.js'),
          // Please change this to your repo.
          "editUrl": "https://github.com/near/node-docs/edit/main/website",
          remarkPlugins: [math],
          rehypePlugins: [katex],
          "showLastUpdateAuthor": true,
          "showLastUpdateTime": true,
          "path": "../docs",
          "routeBasePath": '/',
        },
        theme: {
          customCss: require.resolve('./src/css/custom.css'),
        },
        sitemap: {
          changefreq: 'weekly',
          priority: 0.5,
        },
        gtag: {
          trackingID: 'G-SCPT56S1DQ',
          anonymizeIP: true,
        },
      }),
    ],
  ],

  themeConfig:
    /** @type {import('@docusaurus/preset-classic').ThemeConfig} */
    ({
      colorMode: {
        defaultMode: "light",
        disableSwitch: true,
      },
      navbar: {
        title: 'Node Docs',
        logo: {
          alt: 'NEAR Logo',
          src: 'img/near_logo.svg',
        },
        items: [
          {
            to: '/',
            label: 'Nodes',
            position: 'left'
          },
          {
            href: 'https://nomicon.io/',
            label: 'Protocol Specs',
            position: 'left',
          },
          {
            href: 'https://docs.near.org/',
            label: 'Dev Docs',
            position: 'left',
          },
          {
            href: 'https://wiki.near.org/',
            label: 'Wiki',
            position: 'left',
          },
          {
            href: 'https://github.com/near/node-docs',
            label: 'GitHub',
            position: 'right',
          },
        ],
      },
      prism: {
        "additionalLanguages": [
          "rust", "java", "python", "ruby", "go", "toml"
        ]
      },
    }),
};

module.exports = config;

'''
'''--- website/mlc_config.json ---
{
  "ignorePatterns": [
    {
      "pattern": "^https://near-node.zendesk.com"
    },
    {
      "pattern": "^https://twitter.com"
    },
    {
      "pattern": "^https://rpc.betanet.near.org"
    }
  ],
  "replacementPatterns": [
    {
      "pattern": "^/",
      "replacement": "https://near-nodes.io/"
    }
  ],
  "timeout": "20s",
  "retryOn429": true,
  "retryCount": 5,
  "fallbackRetryDelay": "30s",
  "aliveStatusCodes": [200, 206]
}

'''
'''--- website/package.json ---
{
  "name": "website",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "docusaurus": "docusaurus",
    "start": "docusaurus start",
    "build": "docusaurus build",
    "swizzle": "docusaurus swizzle",
    "deploy": "docusaurus deploy",
    "clear": "docusaurus clear",
    "serve": "docusaurus serve",
    "write-translations": "docusaurus write-translations",
    "write-heading-ids": "docusaurus write-heading-ids"
  },
  "dependencies": {
    "@algolia/client-search": "^4.9.1",
    "@docusaurus/core": "^2.0.0-beta.15",
    "@docusaurus/plugin-sitemap": "^2.0.0-beta.15",
    "@docusaurus/preset-classic": "^2.0.0-beta.15",
    "@easyops-cn/docusaurus-search-local": "^0.26.0",
    "@mdx-js/react": "^1.6.21",
    "@saucelabs/theme-github-codeblock": "^0.1.1",
    "clsx": "^1.1.1",
    "gleap": "^7.0.29",
    "hast-util-is-element": "1.1.0",
    "prism-react-renderer": "^1.2.1",
    "react": "^17.0.1",
    "react-dom": "^17.0.1",
    "rehype-katex": "5",
    "rehype-mathjax": "^4.0.2",
    "remark-math": "3",
    "url": "^0.11.0"
  },
  "browserslist": {
    "production": [
      ">0.5%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}

'''
'''--- website/sidebars.js ---
/**
 * Creating a sidebar enables you to:
 - create an ordered group of docs
 - render a sidebar for each doc of that group
 - provide next/previous navigation

 The sidebars can be generated from the filesystem, or explicitly defined here.

 Create as many sidebars as you want.
 */

// @ts-check

/** @type {import('@docusaurus/plugin-content-docs').SidebarsConfig} */
const sidebars = {
  // By default, Docusaurus generates a sidebar from the docs folder structure
  tutorialSidebar: [{type: 'autogenerated', dirName: '.'}],

  // But you can create a sidebar manually
  /*
  tutorialSidebar: [
    {
      type: 'category',
      label: 'Tutorial',
      items: ['hello'],
    },
  ],
   */
};

module.exports = sidebars;

'''
'''--- website/src/css/custom.css ---
/* ------------------------------------------- */
/* VARIABLE OVERRIDES */
/* ------------------------------------------- */

:root {
  --ifm-color-scheme: light;

  --ifm-color-primary: #5f8afa;
  --ifm-color-secondary: #f8f8f8;
  --ifm-color-success: #aad055;
  --ifm-color-info: #4fd1d9;
  --ifm-color-warning: #e3935b;
  --ifm-color-danger: #db5555;

  --ifm-color-primary-dark: #3e72f9;
  --ifm-color-primary-darker: #2d65f8;
  --ifm-color-primary-darkest: #0746ea;
  --ifm-color-primary-light: #80a2fb;
  --ifm-color-primary-lighter: #91affc;
  --ifm-color-primary-lightest: #c3d3fd;
  --ifm-color-primary-contrast-background: var(--ifm-color-secondary);
  --ifm-color-primary-contrast-foreground: var(--ifm-heading-color);

  --ifm-color-secondary-dark: #dfdfdf;
  --ifm-color-secondary-darker: #d3d3d3;
  --ifm-color-secondary-darkest: #aeaeae;
  --ifm-color-secondary-light: #ffffff;
  --ifm-color-secondary-lighter: #ffffff;
  --ifm-color-secondary-lightest: #ffffff;
  --ifm-color-secondary-contrast-background: var(--ifm-color-secondary);
  --ifm-color-secondary-contrast-foreground: var(--ifm-heading-color);

  --ifm-color-success-dark: #9fca3e;
  --ifm-color-success-darker: #97c336;
  --ifm-color-success-darkest: #7da12c;
  --ifm-color-success-light: #b5d66c;
  --ifm-color-success-lighter: #bbda77;
  --ifm-color-success-lightest: #cce39a;
  --ifm-color-success-contrast-background: var(--ifm-color-secondary);
  --ifm-color-success-contrast-foreground: var(--ifm-heading-color);

  --ifm-color-info-dark: #37cbd4;
  --ifm-color-info-darker: #2dc6cf;
  --ifm-color-info-darkest: #25a3aa;
  --ifm-color-info-light: #67d7de;
  --ifm-color-info-lighter: #74dbe1;
  --ifm-color-info-lightest: #98e4e9;
  --ifm-color-info-contrast-background: var(--ifm-color-secondary);
  --ifm-color-info-contrast-foreground: var(--ifm-heading-color);

  --ifm-color-warning-dark: #de8140;
  --ifm-color-warning-darker: #dc7832;
  --ifm-color-warning-darkest: #be6120;
  --ifm-color-warning-light: #e8a576;
  --ifm-color-warning-lighter: #eaae84;
  --ifm-color-warning-lightest: #f1c9ac;
  --ifm-color-warning-contrast-background: var(--ifm-color-secondary);
  --ifm-color-warning-contrast-foreground: var(--ifm-heading-color);

  --ifm-color-danger-dark: #d63c3c;
  --ifm-color-danger-darker: #d32f2f;
  --ifm-color-danger-darkest: #b02525;
  --ifm-color-danger-light: #e06e6e;
  --ifm-color-danger-lighter: #e37b7b;
  --ifm-color-danger-lightest: #eba0a0;
  --ifm-color-danger-contrast-background: var(--ifm-color-secondary);
  --ifm-color-danger-contrast-foreground: var(--ifm-heading-color);

  --ifm-color-white: #fff;
  --ifm-color-black: #000;

  --ifm-color-gray-0: var(--ifm-color-white);
  --ifm-color-gray-100: #f5f6f7;
  --ifm-color-gray-200: #e5e5e5;
  --ifm-color-gray-300: #d1d1d1;
  --ifm-color-gray-500: #a7a7a7;
  --ifm-color-gray-700: #676767;
  --ifm-color-gray-800: #3f4246;
  --ifm-color-gray-900: #262626;
  --ifm-color-gray-1000: var(--ifm-color-black);

  --ifm-color-emphasis-0: var(--ifm-color-gray-0);
  --ifm-color-emphasis-100: var(--ifm-color-gray-100);
  --ifm-color-emphasis-200: var(--ifm-color-gray-200);
  --ifm-color-emphasis-300: var(--ifm-color-gray-300);
  --ifm-color-emphasis-500: var(--ifm-color-gray-500);
  --ifm-color-emphasis-700: var(--ifm-color-gray-700);
  --ifm-color-emphasis-800: var(--ifm-color-gray-800);
  --ifm-color-emphasis-900: var(--ifm-color-gray-900);
  --ifm-color-emphasis-1000: var(--ifm-color-gray-1000);

  --ifm-color-content: var(--ifm-color-emphasis-800);
  --ifm-color-content-inverse: var(--ifm-color-emphasis-0);
  --ifm-color-content-secondary: var(--ifm-color-gray-700);

  --ifm-global-border-width: 1px;
  --ifm-global-radius: 0;

  --ifm-hover-overlay: transparent;

  --ifm-font-family-base: Manrope, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  --ifm-font-family-monospace: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  --ifm-font-size-base: .875rem;

  --ifm-font-weight-normal: 500;
  --ifm-font-weight-semibold: 600;
  --ifm-font-weight-bold: 700;

  --ifm-line-height-base: 1.6;

  --ifm-global-shadow-lw: 0 .125rem 1rem rgba(95, 138, 250, .125);
  --ifm-global-shadow-md: 0 .25rem 2rem rgba(95, 138, 250, .25);
  --ifm-global-shadow-tl: 0 .25rem 2rem rgba(95, 138, 250, .25);

  --ifm-pre-line-height: 1.4;
  --ifm-pre-padding: var(--ifm-leading);

  --ifm-heading-color: var(--ifm-color-emphasis-900);
  --ifm-heading-font-weight: var(--ifm-font-weight-normal);

  --ifm-h1-font-size: 2.5rem;
  --ifm-h2-font-size: 1.875rem;
  --ifm-h3-font-size: 1.25rem;
  --ifm-h4-font-size: 1.125rem;
  --ifm-h5-font-size: 1rem;
  --ifm-h6-font-size: 1rem;

  --ifm-leading-desktop: 1;
  --ifm-leading: calc(var(--ifm-leading-desktop) * 1.5rem);
  --ifm-list-left-padding: 2rem;

  --ifm-table-stripe-background: none;
  --ifm-table-border-width: var(--ifm-global-border-width);
  --ifm-table-border-color: var(--ifm-color-emphasis-200);
  --ifm-table-head-font-weight: var(--ifm-font-weight-semibold);

  --ifm-blockquote-font-size: inherit;
  --ifm-blockquote-border-left-width: var(--ifm-global-border-width);
  --ifm-blockquote-border-color: var(--ifm-color-emphasis-200);

  --ifm-hr-border-color: var(--ifm-color-emphasis-200);
  --ifm-hr-border-width: var(--ifm-global-border-width);

  --ifm-alert-border-left-width: var(--ifm-global-border-width);
  --ifm-alert-shadow: 'none';

  --ifm-toc-border-color: var(--ifm-color-emphasis-200);
  --ifm-toc-padding-vertical: 0;

  --ifm-menu-link-padding-horizontal: .5rem;
  --ifm-menu-link-padding-vertical: .25rem;
  --ifm-menu-link-sublist-icon: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16.4146 12.7121C16.1317 13.0515 15.6273 13.0974 15.2879 12.8146L9.92806 8.34804C9.85389 8.28623 9.74615 8.28624 9.67198 8.34804L4.31217 12.8146C3.97275 13.0974 3.46829 13.0515 3.18544 12.7121C2.90259 12.3727 2.94845 11.8683 3.28787 11.5854L8.64769 7.11889C9.31521 6.56262 10.2848 6.56262 10.9524 7.11889L16.3122 11.5854C16.6516 11.8683 16.6974 12.3727 16.4146 12.7121Z' fill='%235F8AFA'/%3E%3C/svg%3E%0A");

  --ifm-navbar-height: 4.5rem;
  --ifm-navbar-item-padding-horizontal: 1rem;
  --ifm-navbar-item-padding-vertical: .5rem;
  --ifm-navbar-padding-horizontal: 1.5rem;
  --ifm-navbar-padding-vertical: 1rem;
  --ifm-navbar-shadow: none;

  --ifm-tabs-color: var(--ifm-heading-color);
  --ifm-tabs-color-active: var(--ifm-color-primary);
  --ifm-tabs-color-active-border: var(--ifm-tabs-color-active);
  --ifm-tabs-padding-horizontal: 1rem;
  --ifm-tabs-padding-vertical: .5rem;
}

/* ------------------------------------------- */
/* BASE */
/* ------------------------------------------- */

html {
  font-weight: var(--ifm-font-weight-normal);
  -webkit-font-smoothing: auto;
  font-size: 1rem;
}

body {
  font-size: var(--ifm-font-size-base);
}

table {
  display: table;
  margin-bottom: var(--ifm-leading);
  width: 100%;
  text-align: left;
}

table thead {
  font-size: .75rem;
  text-transform: uppercase;
  letter-spacing: .1em;
  color: var(--ifm-color-emphasis-700);
}

table thead tr {
  border-bottom-width: 0;
}

hr {
  border-top: 0;
}

/* ------------------------------------------- */
/* NAVBAR */
/* ------------------------------------------- */

.navbar {
  border-bottom: 1px solid var(--ifm-toc-border-color)
}

.navbar__brand {
  margin-right: 1.5rem;
}

.navbar__logo {
  height: 1.25rem;
}

.navbar__title {
  position: relative;
  top: 1px;
  font-size: 1rem;
  color: var(--ifm-color-success);
  background-image: -webkit-linear-gradient(var(--ifm-color-success) 20%, var(--ifm-color-info) 80%);
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.navbar__link {
  font-weight: var(--ifm-font-weight-normal);
}

@media (min-width: 997px) {
  body [class*='searchBox_'] {
      padding: 0;
  }
}

/* ------------------------------------------- */
/* GRID */
/* ------------------------------------------- */

body .container {
  padding-top: 2rem !important;
  padding-bottom: 2rem !important;
  max-width: 64rem;
}

.row {
  margin: 0;
}

.row .col {
  padding: 0;
}

/* ------------------------------------------- */
/* MENU */
/* ------------------------------------------- */

.theme-doc-sidebar-item-link-level-1>.menu__link,
.menu__list-item-collapsible>.menu__link,
.menu__link--sublist {
  font-weight: var(--ifm-font-weight-semibold);
  color: var(--ifm-heading-color);
}

.theme-doc-sidebar-item-link-level-1>.menu__link,
.theme-doc-sidebar-menu>.menu__list-item>.menu__list-item-collapsible>.menu__link {
  font-size: 1.125rem;
}

.menu__link:hover,
.menu__caret:hover {
  color: var(--ifm-menu-color-active);
}

.menu__list {
  font-weight: var(--ifm-font-weight-normal);
}

.menu__list .menu__list {
  padding-left: 0;
}

.menu__caret::before,
.menu__link--sublist:after {
  background-size: auto;
}

.menu__list-item--collapsed>.menu__list-item-collapsible>.menu__caret::before,
.menu__list-item--collapsed>.menu__list-item-collapsible>.menu__link--sublist:after {
  opacity: .5;
  filter: grayscale(1);
}

.theme-doc-sidebar-menu>.menu__list-item:not(:first-child) {
  margin-top: 1rem
}

@media (min-width: 997px) {
  body .menu {
      padding: 1rem;
  }
}

@media (min-width: 997px) and (max-width: 1100px) {
  .navbar__brand {
      margin-right: 1rem;
  }

  .navbar__item {
      padding: .5rem;
  }
}

/* ------------------------------------------- */
/* MARKDOWN CONTENT */
/* ------------------------------------------- */

.markdown {
  --ifm-h1-vertical-rhythm-top: 1.6;
  --ifm-h2-vertical-rhythm-top: 1.4;
  --ifm-h3-vertical-rhythm-top: 1.3;
  --ifm-heading-vertical-rhythm-top: 1.2;

  --ifm-h1-vertical-rhythm-bottom: 1;
  --ifm-heading-vertical-rhythm-bottom: 1;
}

.markdown h1:first-child {
  --ifm-h1-font-size: 2.5rem;
}

.markdown>h2 {
  --ifm-h2-font-size: 1.5rem;
}

.markdown>h3 {
  --ifm-h3-font-size: 1.25rem;
}

@media (min-width: 997px) {
  body .col[class*='docItemCol_'] {
      padding-right: 4rem;
  }
}

/* ------------------------------------------- */
/* ALERTS / BLOCKQUOTES / ADMONITIONS */
/* ------------------------------------------- */

blockquote,
.alert {
  margin-bottom: var(--ifm-leading);
  --ifm-blockquote-border-color: var(--ifm-color-info);
  padding: var(--ifm-leading);
  background-color: var(--ifm-color-info-contrast-background);
  color: var(--ifm-color-info-contrast-foreground);
}

blockquote::before,
.alert::before {
  position: absolute;
  content: '';
  width: 1.5rem;
  height: 1.5rem;
  background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='12' r='11' stroke='%234fd1d9' stroke-width='2'/%3E%3Ccircle cx='12' cy='8' r='2' fill='%234fd1d9'/%3E%3Crect x='11' y='12' width='2' height='6' opacity='0.5' fill='%234fd1d9'/%3E%3C/svg%3E%0A");
}

details.alert {
  border-width: 0 0 0 var(--ifm-global-border-width);
}

details.alert summary {
  padding-left: 3.25rem;
}

details.alert summary::before {
  top: .35rem;
  left: 2.25rem;
}

body [class*='collapsibleContent_'] {
  margin-top: var(--ifm-leading);
  padding-top: var(--ifm-leading);
  border-top-color: var(--ifm-color-emphasis-200);
}

blockquote.danger .alert--danger {
  --ifm-blockquote-border-color: var(--ifm-color-danger);
  background-color: var(--ifm-color-danger-contrast-background);
  color: var(--ifm-color-danger-contrast-foreground);
}

blockquote.danger::before,
.alert--danger::before {
  background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' transform='rotate(180)' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='12' r='11' stroke='%23db5555' stroke-width='2'/%3E%3Ccircle cx='12' cy='8' r='2' fill='%23db5555'/%3E%3Crect x='11' y='12' width='2' height='6' opacity='0.5' fill='%23db5555'/%3E%3C/svg%3E%0A");
}

blockquote.lesson,
.alert--lesson {
  --ifm-blockquote-border-color: var(--ifm-color-primary);
  background-color: var(--ifm-color-primary-contrast-background);
  color: var(--ifm-color-primary-contrast-foreground);
}

blockquote.lesson::before,
.alert--lesson::before {
  background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='12' r='11' stroke='%235f8afa' stroke-width='2'/%3E%3Ccircle cx='12' cy='8' r='2' fill='%235f8afa'/%3E%3Crect x='11' y='12' width='2' height='6' opacity='0.5' fill='%235f8afa'/%3E%3C/svg%3E%0A");
}

blockquote.success,
.alert--success {
  --ifm-blockquote-border-color: var(--ifm-color-success);
  background-color: var(--ifm-color-success-contrast-background);
  color: var(--ifm-color-success-contrast-foreground);
}

blockquote.success::before,
.alert--success::before {
  background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='12' r='11' stroke='%23aad055' stroke-width='2'/%3E%3Ccircle cx='12' cy='8' r='2' fill='%23aad055'/%3E%3Crect x='11' y='12' width='2' height='6' opacity='0.5' fill='%23aad055'/%3E%3C/svg%3E%0A");
}

blockquote.warning,
.alert--warning {
  --ifm-blockquote-border-color: var(--ifm-color-warning);
  background-color: var(--ifm-color-warning-contrast-background);
  color: var(--ifm-color-warning-contrast-foreground);
}

blockquote.warning::before,
.alert--warning::before {
  background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' transform='rotate(180)' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='12' r='11' stroke='%23e3935b' stroke-width='2'/%3E%3Ccircle cx='12' cy='8' r='2' fill='%23e3935b'/%3E%3Crect x='11' y='12' width='2' height='6' opacity='0.5' fill='%23e3935b'/%3E%3C/svg%3E%0A");
}

.admonition-icon {
  display: none;
}

blockquote>*:first-child,
.admonition-heading h5 {
  padding-left: 2.25rem;
}

blockquote>strong:first-child,
blockquote>p:first-child>strong:only-child,
.admonition-heading h5 {
  font-size: .875rem;
  letter-spacing: .1em;
  line-height: 1.5rem;
  margin-bottom: 1rem;
  text-transform: uppercase;
  font-weight: var(--ifm-font-weight-semibold);
}

blockquote ul:first-child,
blockquote ol:first-child,
.alert ul:first-child,
.alert ol:first-child {
  padding-left: 3.75rem;
}

blockquote ul>li>p:first-child,
blockquote ol>li>p:first-child,
.alert ul>li>p:first-child,
.alert ol>li>p:first-child {
  margin-top: 0;
}

blockquote ul>li>p:last-child,
blockquote ol>li>p:last-child,
.alert ul>li>p:last-child,
.alert ol>li>p:last-child {
  margin-bottom: 0;
}

/* ------------------------------------------- */
/* CARDS */
/* ------------------------------------------- */

body [class*='cardContainer_'] {
  padding: var(--ifm-leading) !important;
  box-shadow: none !important;
  border: none;
  background-color: var(--ifm-color-secondary);
}

body .row[class*='list_'] {
  gap: var(--ifm-leading);
}

body .row[class*='list_'] .col {
  flex: 1 0;
  margin-bottom: 0 !important;
}

/* ------------------------------------------- */
/* TABS */
/* ------------------------------------------- */

.tabs-container {
  margin-bottom: var(--ifm-leading);
}

.tabs {
  font-size: .75rem;
  font-weight: var(--ifm-font-weight-normal);
  background-color: var(--ifm-color-secondary);
}

.tabs-container .margin-vert--md {
  margin: 0 !important;
}

.tabs__item {
  border-style: solid;
  border-width: 1px 0;
  border-color: transparent;
}

.tabs__item--active {
  border-top-color: var(--ifm-tabs-color-active-border);
}

/* ------------------------------------------- */
/* TABLE OF CONTENTS */
/* ------------------------------------------- */

.table-of-contents__link {
  padding-top: .25rem;
  padding-bottom: .25rem;
  display: block;
}

/* ------------------------------------------- */
/* EDIT */
/* ------------------------------------------- */

.theme-doc-footer-edit-meta-row {
  align-items: center;
}

.theme-edit-this-page {
  display: inline-block;
  vertical-align: top;
  padding-left: 2.25rem;
  line-height: 1.5rem;
  background: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle opacity='0.5' cx='12' cy='12' r='11' stroke='%235F8AFA' stroke-width='2'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8.46446 12.7071L11.2929 15.5355L18.364 8.46446L15.5355 5.63603L8.46446 12.7071ZM9.87868 12.7071L11.2929 14.1213L16.9497 8.46446L15.5355 7.05025L9.87868 12.7071Z' fill='%235F8AFA'/%3E%3Cpath d='M7.75735 13.4142L6.34314 17.6569L10.5858 16.2426L7.75735 13.4142Z' fill='%235F8AFA'/%3E%3C/svg%3E%0A") no-repeat;
}

.theme-edit-this-page svg {
  display: none;
}

.theme-doc-footer-edit-meta-row .col:last-child {
  margin-top: 0;
  font-style: normal;
}

.theme-last-updated {
  color: var(--ifm-color-emphasis-700);
}

.theme-last-updated b {
  font-weight: inherit;
  color: var(--ifm-heading-color);
}

/* ------------------------------------------- */
/* PAGINATION */
/* ------------------------------------------- */

nav.pagination-nav {
  margin-top: 2rem;
  padding-top: 2rem;
  border-top: solid 1px var(--ifm-color-emphasis-200);
}

.pagination-nav__sublabel {
  margin-bottom: .5rem;
  font-size: .75rem;
  letter-spacing: .1em;
  text-transform: uppercase;
}

.pagination-nav__link {
  border: 0;
  padding: 0;
}

.pagination-nav__label {
  font-weight: var(--ifm-font-weight-semibold);
  font-size: 1.125rem;
  color: var(--ifm-heading-color);
}

/* ------------------------------------------- */
/* FOOTER FIXES */
/* ------------------------------------------- */

.near-global-footer a:hover {
  text-decoration: none;
}
'''
'''--- website/src/theme/Footer/index.js ---
import React, { useState, useEffect } from 'react';

function Footer() {
    const [error, setError] = useState(null);
    const [markup, setMarkup] = useState([]);

    useEffect(() => {
        fetch('https://cdn.statically.io/gh/nearprotocol/near-global-footer/main/footer.txt')
            .then(res => res.text())
            .then(
                html => {
                    setMarkup(html);
                },
                error => {
                    setError(error);
                }
            )
    }, [])

    if (error) {
        return null
    } else {
        return (
            <div>
                <div dangerouslySetInnerHTML={{ __html: markup }} />
            </div>
        );
    }
}

export default Footer;
'''
'''--- website/src/theme/Root.js ---
// https://docusaurus.io/docs/swizzling#wrapper-your-site-with-root

import React from 'react';
import useIsBrowser from '@docusaurus/useIsBrowser'; // https://docusaurus.io/docs/advanced/ssg#useisbrowser
import Gleap from "gleap"; // See https://gleap.io/docs/javascript/ and https://app.gleap.io/projects/62697858a4f6850036ae2e6a/widget

const GLEAP_API_KEY = 'K2v3kvAJ5XtPzNYSgk4Ulpe5ptgBkIMv';

// Default implementation, that you can customize
export default function Root({ children }) {
    const isBrowser = useIsBrowser();
    if (isBrowser) {
        Gleap.initialize(GLEAP_API_KEY);
    }
    return <>{children}</>;
}

'''
'''--- website/static/images/network_layout.svg ---
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:lucid="lucid" width="1720" height="680"><g transform="translate(-40 -80)" lucid:page-tab-id="0_0"><path d="M60 106a6 6 0 0 1 6-6h908a6 6 0 0 1 6 6v628a6 6 0 0 1-6 6H66a6 6 0 0 1-6-6z" stroke="#248814" fill="#fff" fill-opacity="0"/><path d="M60 100h56v56H60v-56z" stroke="#fff" stroke-opacity="0" fill="#248814"/><path d="M91.76 128.3h-1.18v-1.1c-.12-1.73-1.48-3.07-3.2-3.2-1.9-.13-3.54 1.3-3.67 3.2v1.07h-1.17c-.44 0-.8.36-.8.8v6.13c0 .44.36.8.8.8h9.23c.44 0 .8-.36.8-.8v-6.1c0-.44-.36-.8-.8-.8zm-6.4-1.06c.1-1.02 1-1.77 2-1.67.9.08 1.58.77 1.67 1.67v1.06H85.3zm5.65 7.08h-7.67v-4.42h7.63z" stroke="#fff" stroke-opacity="0" fill="#fff"/><path d="M102.27 125.74c-.08-2.44-1.58-4.47-3.87-5.3-1.58-.46-3.16-.13-4.4.9-.68-1.44-1.47-2.6-2.6-3.75-3.24-3.36-7.94-4.3-12.18-2.4-4.04 1.9-6.4 5.63-6.54 10.05v.7c-3.4.98-5.66 4.08-5.5 7.65v.63c.4 4.28 3.92 7.52 8.2 7.47h26s7.42-.63 7.42-8.1c.04-3.9-2.66-7.2-6.53-7.86zm-.96 14.4H75.4c-3.47.05-6.3-2.53-6.6-5.97v-.52c-.15-3.05 1.93-5.7 4.92-6.3.38-.12.63-.48.6-.9-.06-.4-.06-.73 0-1.14.07-3.78 2.1-6.94 5.52-8.6 1.25-.56 2.4-.8 3.83-.84 2.62.08 4.87 1.04 6.7 2.94 1.25 1.3 2.04 2.6 2.62 4.3.03.15.1.28.24.37.37.27.87.2 1.12-.17.83-1.18 2.25-1.67 3.62-1.3 1.8.72 2.87 2.4 2.83 4.32-.07.4.22.82.64.9 3.57.36 6.2 3.55 5.82 7.12-.3 3.13-2.7 5.52-5.82 5.85z" stroke="#fff" stroke-opacity="0" fill="#fff"/><use xlink:href="#a" transform="matrix(1,0,0,1,131,120) translate(0 14.4)"/><use xlink:href="#b" transform="matrix(1,0,0,1,131,120) translate(55.5 14.4)"/><use xlink:href="#c" transform="matrix(1,0,0,1,131,120) translate(116.4 14.4)"/><path d="M120 206a6 6 0 0 1 6-6h268a6 6 0 0 1 6 6v348a6 6 0 0 1-6 6H126a6 6 0 0 1-6-6z" fill="#147eba" fill-opacity=".13"/><path d="M120 200h56v56h-56v-56z" stroke="#fff" stroke-opacity="0" fill="#147eba"/><path d="M163.38 222.18c-.15-.17-.34-.25-.56-.25h-5.15v-5.58c-.03-2.54-.96-4.7-2.84-6.4-1.9-1.84-4.15-2.75-6.77-2.75-2.65 0-4.9.83-6.8 2.62-1.9 1.7-2.87 3.87-2.9 6.4v5.66h-5.15c-.24 0-.43.1-.58.25-.16.17-.22.34-.22.6V248c0 .43.34.8.8.8h29.6c.46 0 .8-.37.8-.8v-25.28c0-.2-.06-.38-.22-.54zm-23.46-5.9c.03-2.13.8-3.88 2.37-5.3 1.6-1.5 3.52-2.2 5.73-2.2 2.22 0 4.12.75 5.7 2.25 1.54 1.4 2.32 3.2 2.32 5.32v5.58H139.9zm22.1 30.94h-28.03v-23.7h28z" stroke="#fff" stroke-opacity="0" fill="#fff"/><path d="M147.2 237.3v6.25h1.6v-6.23c2.13-.4 3.62-2.2 3.63-4.35 0-2.43-1.97-4.4-4.4-4.43-2.2-.03-4.06 1.5-4.44 3.68-.42 2.4 1.2 4.68 3.6 5.1zm.82-7.15c.78 0 1.44.27 2 .82.54.56.82 1.22.8 2 .03 1.55-1.2 2.8-2.74 2.82h-.06c-1.56.1-2.92-1.06-3.04-2.62-.12-1.56 1.05-2.93 2.6-3.03.16-.02.28-.02.44 0z" stroke="#fff" stroke-opacity="0" fill="#fff"/><use xlink:href="#d" transform="matrix(1,0,0,1,191,220) translate(0 14.4)"/><use xlink:href="#e" transform="matrix(1,0,0,1,191,220) translate(60.9 14.4)"/><path d="M700.5 431.22v20.1c0 .63-.55 1.17-1.25 1.17H662.7c-.65 0-1.2-.55-1.2-1.2v-36.6c0-.65.55-1.2 1.2-1.2h20.08c.7 0 1.24-.53 1.24-1.18v-5.13c0-.66-.54-1.2-1.24-1.2h-27.6c-.64 0-1.18.54-1.18 1.2v51.6c0 .66.54 1.2 1.2 1.2h51.6c.66 0 1.2-.54 1.2-1.2v-27.58c0-.7-.54-1.24-1.2-1.24h-5.12c-.65 0-1.2.54-1.2 1.24z" stroke="#000" stroke-opacity="0" fill="#669df6"/><path d="M690 401.2v21.6c0 .67.53 1.2 1.2 1.2h21.6c.67 0 1.2-.53 1.2-1.2v-21.6c0-.67-.53-1.2-1.2-1.2h-21.6c-.67 0-1.2.53-1.2 1.2zm16.8 12.3h-5.14c-.64 0-1.2-.54-1.2-1.2v-5.1c0-.67.56-1.2 1.2-1.2h5.14c.67 0 1.2.53 1.2 1.2v5.1c0 .66-.53 1.2-1.2 1.2z" stroke="#000" stroke-opacity="0" fill="#4285f4"/><path d="M654 406v54h54v-54z" stroke="#000" stroke-opacity="0" fill-opacity="0"/><use xlink:href="#f" transform="matrix(1,0,0,1,654,465) translate(-40.987654320987644 17.77777777777778)"/><use xlink:href="#g" transform="matrix(1,0,0,1,654,465) translate(20.154320987654323 44.44444444444444)"/><use xlink:href="#h" transform="matrix(1,0,0,1,654,465) translate(-28.64197530864198 71.11111111111111)"/><g transform="matrix(1,0,0,1,654,465)"><a xlink:href="http://35.204.219.60" target="_blank"><path class="lucid-link lucid-hotspot lucid-overlay-hotspot" fill-opacity="0" d="M-41 0h142v26.67H-41z"/></a><a xlink:href="http://34.90.9.220" target="_blank"><path class="lucid-link lucid-hotspot lucid-overlay-hotspot" fill-opacity="0" d="M-28.64 53.33H88.64V80H-28.64z"/></a></g><path d="M1060 312.9h56.96v14.2H1060v-14.2zM1060 426.7h56.96v14.2H1060v-14.2zM1060 369.85h56.96v14.2H1060v-14.2zM1131.04 312.9H1188v14.2h-56.96v-14.2zM1131.04 426.7H1188v14.2h-56.96v-14.2zM1131.04 369.85H1188v14.2h-56.96v-14.2zM1095.58 341.3h56.96v14.22h-56.96v-14.2zM1095.58 398.14h56.96v14.2h-56.96v-14.2zM1060 341.3h21.38v14.22H1060v-14.2zM1060 398.14h21.38v14.2H1060v-14.2zM1166.62 341.3h21.25v14.22h-21.25v-14.2zM1166.62 398.14h21.25v14.2h-21.25v-14.2z" stroke="#000" stroke-opacity="0" fill="#4285f4"/><path d="M1061.28 314.17V439.6h125.44V314.2z" stroke="#000" stroke-opacity="0" fill-opacity="0"/><use xlink:href="#i" transform="matrix(1,0,0,1,1060,445.895) translate(35.04938271604939 17.77777777777778)"/><use xlink:href="#j" transform="matrix(1,0,0,1,1060,445.895) translate(25.913580246913583 44.44444444444444)"/><path d="M525.12 371.52V382.14h28.8v-10.62zM490.26 337.73H472v10.68h25.1c-2.04-3.97-4.08-7.17-6.84-10.67zM497.6 405.3h-21.76V416h14.67c2.84-3.52 4.97-6.7 7.1-10.7zM503.9 376.83c.15-1.87.15-3.44 0-5.3H456v10.6h47.9c.15-1.86.15-3.43 0-5.3z" stroke="#000" stroke-opacity="0" fill="#4285f4"/><path d="M450.75 379.9c-1.7.03-3.1-1.32-3.14-3 0-1.7 1.34-3.1 3.02-3.15 1.7-.02 3.1 1.33 3.15 3.02v.06c0 1.67-1.35 3.04-3.02 3.08zm0-13.76h-.06c-5.9 0-10.7 4.8-10.7 10.7 0 5.9 4.8 10.68 10.7 10.68 5.9 0 10.68-4.8 10.68-10.7 0-5.87-4.75-10.63-10.63-10.68zM466.75 413.64c-1.7.02-3.1-1.33-3.14-3.02 0-1.7 1.34-3.1 3.02-3.14 1.7-.02 3.1 1.33 3.15 3v.08c.02 1.67-1.3 3.03-2.95 3.08h-.07zm0-13.7h-.13c-5.9.04-10.66 4.85-10.62 10.75.04 5.9 4.85 10.65 10.75 10.6 5.9-.03 10.67-4.84 10.63-10.74-.05-5.86-4.77-10.58-10.63-10.63zM466.75 346.2c-1.7.05-3.1-1.3-3.14-3-.03-1.7 1.32-3.1 3.03-3.13 1.68-.05 3.1 1.3 3.12 3v.14c0 1.66-1.35 3-3 3zm0-13.68c-.57-.06-1.1-.06-1.66 0-5.9.45-10.3 5.58-9.83 11.48.45 5.88 5.58 10.28 11.48 9.8 5.3-.4 9.4-4.5 9.82-9.8.47-5.9-3.94-11.03-9.82-11.48z" stroke="#000" stroke-opacity="0" fill="#669df6"/><path d="M546.75 392.9v-32l21.25 16-21.25 16zM488.05 440.9l-5.48-9.6c17.48-13.45 26.74-32.26 26.78-54.4-.23-22.02-9.45-40.84-26.85-54.4l5.55-9.6c20.8 15.6 31.9 37.88 31.95 64 .04 26.1-11.1 48.38-31.95 64z" stroke="#000" stroke-opacity="0" fill="#4285f4"/><path d="M440 312.9v128h128v-128z" stroke="#000" stroke-opacity="0" fill-opacity="0"/><use xlink:href="#k" transform="matrix(1,0,0,1,440,445.895) translate(10.635802469135811 17.77777777777778)"/><use xlink:href="#l" transform="matrix(1,0,0,1,440,445.895) translate(74.70987654320987 17.77777777777778)"/><path d="M908.8 389.7v19.2l-32-32 32-32v19.2H928v25.6zm-89.6-25.6H800v25.6h19.2v19.2l32-32-32-32zm57.6 44.8v-19.2h-25.6v19.2H832l32 32 32-32zm0-64v19.2h-25.6v-19.2H832l32-32 32 32z" stroke="#000" stroke-opacity="0" fill="#4285f4"/><path d="M822.4 344.9v64h83.2v-64z" fill-opacity="0"/><use xlink:href="#i" transform="matrix(1,0,0,1,800,445.895) translate(35.04938271604939 17.77777777777778)"/><use xlink:href="#m" transform="matrix(1,0,0,1,800,445.895) translate(30.728395061728392 44.44444444444444)"/><path d="M306.46 371.1l-26.36-45.3c-2.05-3.64-5.64-5.7-9.86-5.8h-52.48c-4.22.1-7.8 2.16-9.86 5.8l-26.36 45.18c-2.05 3.53-2.05 7.62 0 11.26l26.36 45.52c2.05 3.75 5.5 5.92 9.86 6.03h52.48c4.22-.12 7.8-2.3 9.86-6.04l26.36-45.18c2.05-3.75 2.05-7.85 0-11.5z" stroke="#000" stroke-opacity="0" fill="#4285f4"/><path d="M298.87 395.47l-43.25-42.83-3.1 6.66-6.75-6.66-3.1 6.66-6.66-6.66-1.65 8.03-5.96.98-1.2 5.2-7.7 1.86 6.9 6.82-6.82 2.92 6.83 6.73-6.9 3 46.12 45.6h4.68c4.2-.17 7.78-2.28 9.84-6z" stroke="#000" stroke-opacity="0" fill-opacity=".07"/><path d="M249.82 370.05h-11.4c-.67 0-1.2.54-1.2 1.2v11.3c0 .65.53 1.2 1.2 1.2h11.4c.66-.03 1.17-.57 1.17-1.2v-11.3c0-.66-.55-1.2-1.22-1.2" stroke="#000" stroke-opacity="0" fill="#fff"/><path d="M267.88 369.13c.6 0 1.1-.45 1.1-1.1v-1.7c0-.6-.5-1.1-1.1-1.1h-5.56v-5.15c0-.7-.55-1.23-1.2-1.23h-5.2v-5.46c0-.6-.5-1.1-1.1-1.1H253c-.6 0-1.04.5-1.04 1.1v5.5h-5.86v-5.5c-.05-.6-.55-1.1-1.15-1.1h-1.73c-.6 0-1.1.5-1.1 1.1v5.5h-5.86v-5.5c0-.6-.5-1.1-1.1-1.1h-1.73c-.65 0-1.1.5-1.1 1.1v5.5h-5.22c-.64 0-1.2.5-1.2 1.18v5.1h-5.55c-.6 0-1.1.5-1.1 1.1v1.76c0 .6.5 1.1 1.1 1.1h5.56v5.74h-5.56c-.6 0-1.1.5-1.1 1.08v1.82c0 .6.5 1.08 1.1 1.08h5.56v5.8h-5.56c-.6 0-1.1.5-1.1 1.1v1.76c0 .6.5 1.03 1.1 1.03h5.56v5.16c0 .65.5 1.2 1.2 1.2h5.2v5.5c0 .6.46 1.08 1.1 1.08h1.74c.6 0 1.1-.5 1.1-1.08v-5.5h5.86v5.5c0 .6.5 1.08 1.1 1.08h1.73c.6 0 1.1-.5 1.1-1.08v-5.5h5.9v5.5c0 .6.5 1.08 1.1 1.08h1.8c.6 0 1.1-.5 1.1-1.08v-5.5h5.2c.65-.06 1.15-.55 1.15-1.2v-5.15h5.56c.6 0 1.1-.5 1.1-1.08v-1.72c0-.64-.5-1.1-1.1-1.1h-5.56v-5.8h5.56c.6 0 1.1-.48 1.1-1.07V376v-.04c0-.6-.5-1.08-1.1-1.08h-5.56v-5.75h5.56zm-9.64 21.78h-28.22v-27.97h28.22z" stroke="#000" stroke-opacity="0" fill="#fff"/><use xlink:href="#n" transform="matrix(1,0,0,1,180,438.79) translate(4.185185185185176 17.77777777777778)"/><use xlink:href="#o" transform="matrix(1,0,0,1,180,438.79) translate(19 44.44444444444444)"/><path d="M309.46 376.9h109.92" stroke="#1071e5" stroke-width="3" fill="none"/><path d="M309.5 378.4h-1.7l.2-1.87-.18-1.13h1.68z" stroke="#1071e5" stroke-width=".05" fill="#1071e5"/><path d="M435.15 376.9l-14.27 4.63v-9.27z" stroke="#1071e5" stroke-width="3" fill="#1071e5"/><path d="M569.5 376.9h209.88" stroke="#1071e5" stroke-width="3" fill="none"/><path d="M569.54 378.4H568v-3h1.54z" stroke="#1071e5" stroke-width=".05" fill="#1071e5"/><path d="M795.15 376.9l-14.27 4.63v-9.27z" stroke="#1071e5" stroke-width="3" fill="#1071e5"/><use xlink:href="#p" transform="matrix(1,0,0,1,620.9876543209876,351.56166666666667) translate(0 14.222222222222223)"/><use xlink:href="#q" transform="matrix(1,0,0,1,620.9876543209876,351.56166666666667) translate(53.23456790123457 14.222222222222223)"/><path d="M929.5 376.9h111.16" stroke="#1071e5" stroke-width="3" fill="none"/><path d="M929.54 378.4H928v-3h1.54z" stroke="#1071e5" stroke-width=".05" fill="#1071e5"/><path d="M1056.43 376.9l-14.27 4.63v-9.27z" stroke="#1071e5" stroke-width="3" fill="#1071e5"/><path d="M1520 480h164v164h-164z" fill="url(#r)"/><path d="M1189.5 376.9H1354a6 6 0 0 1 6 6V556a6 6 0 0 0 6 6h153.88" stroke="#1071e5" stroke-width="3" fill="none"/><path d="M1186.72 378.4H1185v-3h1.72zm2.82 0H1188v-3h1.54z" stroke="#1071e5" stroke-width=".05" fill="#1071e5"/><path d="M1535.65 562l-14.27 4.64v-9.28z" stroke="#1071e5" stroke-width="3" fill="#1071e5"/><path d="M1500 650a6 6 0 0 1 6-6h228a6 6 0 0 1 6 6v48a6 6 0 0 1-6 6h-228a6 6 0 0 1-6-6z" stroke="#000" stroke-opacity="0" fill="#fff" fill-opacity="0"/><use xlink:href="#s" transform="matrix(1,0,0,1,1505,649) translate(19.413580246913597 30.27777777777778)"/><path d="M1692.8 133.7v165.5h-159.6V133.7h159.6zM1706 120h-186v192.9h186V120z" stroke="#c3f7c8" fill="#008a0e"/><path d="M1646.3 181.92V299.2h-113.1V181.92h113.1zm13.2-13.7H1520V312.9h139.5V168.2z" stroke="#c3f7c8" fill="#008a0e"/><path d="M1599.8 230.14v69.06h-66.6v-69.06h66.6zm13.2-13.7h-93v96.45h93v-96.45z" stroke="#c3f7c8" fill="#008a0e"/><path d="M1189.5 376.9H1354a6 6 0 0 0 6-6V222.44a6 6 0 0 1 6-6h132.88" stroke="#1071e5" stroke-width="3" fill="none"/><path d="M1186.72 378.4H1185v-3h1.72zm2.82 0H1188v-3h1.54z" stroke="#1071e5" stroke-width=".05" fill="#1071e5"/><path d="M1514.65 216.45l-14.27 4.63v-9.27z" stroke="#1071e5" stroke-width="3" fill="#1071e5"/><path d="M1500 324.33a6 6 0 0 1 6-6h228a6 6 0 0 1 6 6v51.34a6 6 0 0 1-6 6h-228a6 6 0 0 1-6-6z" stroke="#000" stroke-opacity="0" fill="#fff" fill-opacity="0"/><g><use xlink:href="#t" transform="matrix(1,0,0,1,1505,323.3333333333333) translate(50.27777777777777 17.77777777777778)"/><use xlink:href="#u" transform="matrix(1,0,0,1,1505,323.3333333333333) translate(100.83333333333333 17.77777777777778)"/><use xlink:href="#v" transform="matrix(1,0,0,1,1505,323.3333333333333) translate(67.56172839506172 44.44444444444444)"/></g><path d="M1420 162.67a6 6 0 0 1 6-6h68a6 6 0 0 1 6 6V214a6 6 0 0 1-6 6h-68a6 6 0 0 1-6-6z" stroke="#000" stroke-opacity="0" fill="#fff" fill-opacity="0"/><g><use xlink:href="#w" transform="matrix(1,0,0,1,1425,161.66666666666663) translate(2.901234567901234 31.27777777777778)"/></g><path d="M1420 506a6 6 0 0 1 6-6h68a6 6 0 0 1 6 6v51.33a6 6 0 0 1-6 6h-68a6 6 0 0 1-6-6z" stroke="#000" stroke-opacity="0" fill="#fff" fill-opacity="0"/><g><use xlink:href="#x" transform="matrix(1,0,0,1,1425,505) translate(13.395061728395063 31.27777777777778)"/></g><defs><image width="1" height="1" id="aJ" xlink:href="data:image/png;base64,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" preserveAspectRatio="none"/><path fill="#248814" d="M137 0h-34L2-248h35l83 218 83-218h36" id="y"/><path fill="#248814" d="M24-231v-30h32v30H24zM24 0v-190h32V0H24" id="z"/><path fill="#248814" d="M114-163C36-179 61-72 57 0H25l-1-190h30c1 12-1 29 2 39 6-27 23-49 58-41v29" id="A"/><path fill="#248814" d="M59-47c-2 24 18 29 38 22v24C64 9 27 4 27-40v-127H5v-23h24l9-43h21v43h35v23H59v120" id="B"/><path fill="#248814" d="M84 4C-5 8 30-112 23-190h32v120c0 31 7 50 39 49 72-2 45-101 50-169h31l1 190h-30c-1-10 1-25-2-33-11 22-28 36-60 37" id="C"/><path fill="#248814" d="M141-36C126-15 110 5 73 4 37 3 15-17 15-53c-1-64 63-63 125-63 3-35-9-54-41-54-24 1-41 7-42 31l-33-3c5-37 33-52 76-52 45 0 72 20 72 64v82c-1 20 7 32 28 27v20c-31 9-61-2-59-35zM48-53c0 20 12 33 32 33 41-3 63-29 60-74-43 2-92-5-92 41" id="D"/><path fill="#248814" d="M24 0v-261h32V0H24" id="E"/><g id="a"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#y"/><use transform="matrix(0.05,0,0,0.05,11.65,0)" xlink:href="#z"/><use transform="matrix(0.05,0,0,0.05,15.600000000000001,0)" xlink:href="#A"/><use transform="matrix(0.05,0,0,0.05,21.55,0)" xlink:href="#B"/><use transform="matrix(0.05,0,0,0.05,26.55,0)" xlink:href="#C"/><use transform="matrix(0.05,0,0,0.05,36.55,0)" xlink:href="#D"/><use transform="matrix(0.05,0,0,0.05,46.55,0)" xlink:href="#E"/></g><path fill="#248814" d="M30-248c87 1 191-15 191 75 0 78-77 80-158 76V0H30v-248zm33 125c57 0 124 11 124-50 0-59-68-47-124-48v98" id="F"/><path fill="#248814" d="M108 0H70L1-190h34L89-25l56-165h34" id="G"/><path fill="#248814" d="M100-194c63 0 86 42 84 106H49c0 40 14 67 53 68 26 1 43-12 49-29l28 8c-11 28-37 45-77 45C44 4 14-33 15-96c1-61 26-98 85-98zm52 81c6-60-76-77-97-28-3 7-6 17-6 28h103" id="H"/><g id="b"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#F"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#A"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#z"/><use transform="matrix(0.05,0,0,0.05,21.9,0)" xlink:href="#G"/><use transform="matrix(0.05,0,0,0.05,30.899999999999995,0)" xlink:href="#D"/><use transform="matrix(0.05,0,0,0.05,40.9,0)" xlink:href="#B"/><use transform="matrix(0.05,0,0,0.05,45.9,0)" xlink:href="#H"/></g><path fill="#248814" d="M212-179c-10-28-35-45-73-45-59 0-87 40-87 99 0 60 29 101 89 101 43 0 62-24 78-52l27 14C228-24 195 4 139 4 59 4 22-46 18-125c-6-104 99-153 187-111 19 9 31 26 39 46" id="I"/><path fill="#248814" d="M100-194c62-1 85 37 85 99 1 63-27 99-86 99S16-35 15-95c0-66 28-99 85-99zM99-20c44 1 53-31 53-75 0-43-8-75-51-75s-53 32-53 75 10 74 51 75" id="J"/><path fill="#248814" d="M85-194c31 0 48 13 60 33l-1-100h32l1 261h-30c-2-10 0-23-3-31C134-8 116 4 85 4 32 4 16-35 15-94c0-66 23-100 70-100zm9 24c-40 0-46 34-46 75 0 40 6 74 45 74 42 0 51-32 51-76 0-42-9-74-50-73" id="K"/><g id="c"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#I"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#E"/><use transform="matrix(0.05,0,0,0.05,16.900000000000002,0)" xlink:href="#J"/><use transform="matrix(0.05,0,0,0.05,26.900000000000002,0)" xlink:href="#C"/><use transform="matrix(0.05,0,0,0.05,36.900000000000006,0)" xlink:href="#K"/></g><path fill="#147eba" d="M30-248c87 1 191-15 191 75 0 78-77 80-158 76V0H30v-248zm33 125c57 0 124 11 124-50 0-59-68-47-124-48v98" id="L"/><path fill="#147eba" d="M114-163C36-179 61-72 57 0H25l-1-190h30c1 12-1 29 2 39 6-27 23-49 58-41v29" id="M"/><path fill="#147eba" d="M24-231v-30h32v30H24zM24 0v-190h32V0H24" id="N"/><path fill="#147eba" d="M108 0H70L1-190h34L89-25l56-165h34" id="O"/><path fill="#147eba" d="M141-36C126-15 110 5 73 4 37 3 15-17 15-53c-1-64 63-63 125-63 3-35-9-54-41-54-24 1-41 7-42 31l-33-3c5-37 33-52 76-52 45 0 72 20 72 64v82c-1 20 7 32 28 27v20c-31 9-61-2-59-35zM48-53c0 20 12 33 32 33 41-3 63-29 60-74-43 2-92-5-92 41" id="P"/><path fill="#147eba" d="M59-47c-2 24 18 29 38 22v24C64 9 27 4 27-40v-127H5v-23h24l9-43h21v43h35v23H59v120" id="Q"/><path fill="#147eba" d="M100-194c63 0 86 42 84 106H49c0 40 14 67 53 68 26 1 43-12 49-29l28 8c-11 28-37 45-77 45C44 4 14-33 15-96c1-61 26-98 85-98zm52 81c6-60-76-77-97-28-3 7-6 17-6 28h103" id="R"/><g id="d"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#L"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#M"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#N"/><use transform="matrix(0.05,0,0,0.05,21.9,0)" xlink:href="#O"/><use transform="matrix(0.05,0,0,0.05,30.899999999999995,0)" xlink:href="#P"/><use transform="matrix(0.05,0,0,0.05,40.9,0)" xlink:href="#Q"/><use transform="matrix(0.05,0,0,0.05,45.9,0)" xlink:href="#R"/></g><path fill="#147eba" d="M185-189c-5-48-123-54-124 2 14 75 158 14 163 119 3 78-121 87-175 55-17-10-28-26-33-46l33-7c5 56 141 63 141-1 0-78-155-14-162-118-5-82 145-84 179-34 5 7 8 16 11 25" id="S"/><path fill="#147eba" d="M84 4C-5 8 30-112 23-190h32v120c0 31 7 50 39 49 72-2 45-101 50-169h31l1 190h-30c-1-10 1-25-2-33-11 22-28 36-60 37" id="T"/><path fill="#147eba" d="M115-194c53 0 69 39 70 98 0 66-23 100-70 100C84 3 66-7 56-30L54 0H23l1-261h32v101c10-23 28-34 59-34zm-8 174c40 0 45-34 45-75 0-40-5-75-45-74-42 0-51 32-51 76 0 43 10 73 51 73" id="U"/><path fill="#147eba" d="M117-194c89-4 53 116 60 194h-32v-121c0-31-8-49-39-48C34-167 62-67 57 0H25l-1-190h30c1 10-1 24 2 32 11-22 29-35 61-36" id="V"/><g id="e"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#S"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#T"/><use transform="matrix(0.05,0,0,0.05,22,0)" xlink:href="#U"/><use transform="matrix(0.05,0,0,0.05,32,0)" xlink:href="#V"/><use transform="matrix(0.05,0,0,0.05,42,0)" xlink:href="#R"/><use transform="matrix(0.05,0,0,0.05,52,0)" xlink:href="#Q"/></g><path fill="#3a414a" d="M126-127c33 6 58 20 58 59 0 88-139 92-164 29-3-8-5-16-6-25l32-3c6 27 21 44 54 44 32 0 52-15 52-46 0-38-36-46-79-43v-28c39 1 72-4 72-42 0-27-17-43-46-43-28 0-47 15-49 41l-32-3c6-42 35-63 81-64 48-1 79 21 79 65 0 36-21 52-52 59" id="W"/><path fill="#3a414a" d="M54-142c48-35 137-8 131 61C196 18 31 33 14-55l32-4c7 23 22 37 52 37 35-1 51-22 54-58 4-55-73-65-99-34H22l8-134h141v27H59" id="X"/><path fill="#3a414a" d="M33 0v-38h34V0H33" id="Y"/><path fill="#3a414a" d="M101-251c82-7 93 87 43 132L82-64C71-53 59-42 53-27h129V0H18c2-99 128-94 128-182 0-28-16-43-45-43s-46 15-49 41l-32-3c6-41 34-60 81-64" id="Z"/><path fill="#3a414a" d="M101-251c68 0 85 55 85 127S166 4 100 4C33 4 14-52 14-124c0-73 17-127 87-127zm-1 229c47 0 54-49 54-102s-4-102-53-102c-51 0-55 48-55 102 0 53 5 102 54 102" id="aa"/><path fill="#3a414a" d="M155-56V0h-30v-56H8v-25l114-167h33v167h35v25h-35zm-30-156c-27 46-58 90-88 131h88v-131" id="ab"/><path fill="#3a414a" d="M27 0v-27h64v-190l-56 39v-29l58-41h29v221h61V0H27" id="ac"/><path fill="#3a414a" d="M99-251c64 0 84 50 84 122C183-37 130 33 47-8c-14-7-20-23-25-40l30-5c6 39 69 39 84 7 9-19 16-44 16-74-10 22-31 35-62 35-49 0-73-33-73-83 0-54 28-83 82-83zm-1 141c31-1 51-18 51-49 0-36-14-67-51-67-34 0-49 23-49 58 0 34 15 58 49 58" id="ad"/><path fill="#3a414a" d="M110-160c48 1 74 30 74 79 0 53-28 85-80 85-65 0-83-55-86-122-5-90 50-162 133-122 14 7 22 21 27 39l-31 6c-5-40-67-38-82-6-9 19-15 44-15 74 11-20 30-34 60-33zm-7 138c34 0 49-23 49-58s-16-56-50-56c-29 0-50 16-49 49 1 36 15 65 50 65" id="ae"/><g id="f"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#W"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,12.345679012345679,0)" xlink:href="#X"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,24.691358024691358,0)" xlink:href="#Y"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,30.864197530864196,0)" xlink:href="#Z"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,43.20987654320987,0)" xlink:href="#aa"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,55.55555555555555,0)" xlink:href="#ab"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,67.90123456790123,0)" xlink:href="#Y"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,74.07407407407406,0)" xlink:href="#Z"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,86.41975308641975,0)" xlink:href="#ac"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,98.76543209876543,0)" xlink:href="#ad"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,111.11111111111111,0)" xlink:href="#Y"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,117.28395061728395,0)" xlink:href="#ae"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,129.62962962962962,0)" xlink:href="#aa"/><path fill="#8080ff" d="M-1.1 1.54h144.2v1.63H-1.1z"/></g><path fill="#3a414a" d="M100-194c62-1 85 37 85 99 1 63-27 99-86 99S16-35 15-95c0-66 28-99 85-99zM99-20c44 1 53-31 53-75 0-43-8-75-51-75s-53 32-53 75 10 74 51 75" id="af"/><path fill="#3a414a" d="M114-163C36-179 61-72 57 0H25l-1-190h30c1 12-1 29 2 39 6-27 23-49 58-41v29" id="ag"/><g id="g"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#af"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,12.345679012345679,0)" xlink:href="#ag"/></g><g id="h"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#W"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,12.345679012345679,0)" xlink:href="#ab"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,24.691358024691358,0)" xlink:href="#Y"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,30.864197530864196,0)" xlink:href="#ad"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,43.20987654320987,0)" xlink:href="#aa"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,55.55555555555555,0)" xlink:href="#Y"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,61.72839506172839,0)" xlink:href="#ad"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,74.07407407407408,0)" xlink:href="#Y"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,80.24691358024691,0)" xlink:href="#Z"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,92.5925925925926,0)" xlink:href="#Z"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,104.93827160493828,0)" xlink:href="#aa"/><path fill="#8080ff" d="M-1.1 1.54h119.5v1.63H-1.1z"/></g><path fill="#3a414a" d="M212-179c-10-28-35-45-73-45-59 0-87 40-87 99 0 60 29 101 89 101 43 0 62-24 78-52l27 14C228-24 195 4 139 4 59 4 22-46 18-125c-6-104 99-153 187-111 19 9 31 26 39 46" id="ah"/><path fill="#3a414a" d="M24 0v-261h32V0H24" id="ai"/><path fill="#3a414a" d="M84 4C-5 8 30-112 23-190h32v120c0 31 7 50 39 49 72-2 45-101 50-169h31l1 190h-30c-1-10 1-25-2-33-11 22-28 36-60 37" id="aj"/><path fill="#3a414a" d="M85-194c31 0 48 13 60 33l-1-100h32l1 261h-30c-2-10 0-23-3-31C134-8 116 4 85 4 32 4 16-35 15-94c0-66 23-100 70-100zm9 24c-40 0-46 34-46 75 0 40 6 74 45 74 42 0 51-32 51-76 0-42-9-74-50-73" id="ak"/><g id="i"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#ah"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,15.987654320987653,0)" xlink:href="#ai"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,20.864197530864196,0)" xlink:href="#af"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,33.20987654320987,0)" xlink:href="#aj"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,45.55555555555555,0)" xlink:href="#ak"/></g><path fill="#3a414a" d="M63-220v92h138v28H63V0H30v-248h175v28H63" id="al"/><path fill="#3a414a" d="M24-231v-30h32v30H24zM24 0v-190h32V0H24" id="am"/><path fill="#3a414a" d="M100-194c63 0 86 42 84 106H49c0 40 14 67 53 68 26 1 43-12 49-29l28 8c-11 28-37 45-77 45C44 4 14-33 15-96c1-61 26-98 85-98zm52 81c6-60-76-77-97-28-3 7-6 17-6 28h103" id="an"/><path fill="#3a414a" d="M206 0h-36l-40-164L89 0H53L-1-190h32L70-26l43-164h34l41 164 42-164h31" id="ao"/><path fill="#3a414a" d="M141-36C126-15 110 5 73 4 37 3 15-17 15-53c-1-64 63-63 125-63 3-35-9-54-41-54-24 1-41 7-42 31l-33-3c5-37 33-52 76-52 45 0 72 20 72 64v82c-1 20 7 32 28 27v20c-31 9-61-2-59-35zM48-53c0 20 12 33 32 33 41-3 63-29 60-74-43 2-92-5-92 41" id="ap"/><g id="j"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#al"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,13.518518518518517,0)" xlink:href="#am"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,18.39506172839506,0)" xlink:href="#ag"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,25.74074074074074,0)" xlink:href="#an"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,38.08641975308642,0)" xlink:href="#ao"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,54.07407407407407,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,66.41975308641975,0)" xlink:href="#ai"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,71.29629629629629,0)" xlink:href="#ai"/></g><g id="k"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#ah"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,15.987654320987653,0)" xlink:href="#ai"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,20.864197530864196,0)" xlink:href="#af"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,33.20987654320987,0)" xlink:href="#aj"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,45.55555555555555,0)" xlink:href="#ak"/></g><path fill="#3a414a" d="M190 0L58-211 59 0H30v-248h39L202-35l-2-213h31V0h-41" id="aq"/><path fill="#3a414a" d="M205 0l-28-72H64L36 0H1l101-248h38L239 0h-34zm-38-99l-47-123c-12 45-31 82-46 123h93" id="ar"/><path fill="#3a414a" d="M127-220V0H93v-220H8v-28h204v28h-85" id="as"/><g id="l"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#aq"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,15.987654320987653,0)" xlink:href="#ar"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,29.1358024691358,0)" xlink:href="#as"/></g><path fill="#3a414a" d="M233-177c-1 41-23 64-60 70L243 0h-38l-65-103H63V0H30v-248c88 3 205-21 203 71zM63-129c60-2 137 13 137-47 0-61-80-42-137-45v92" id="at"/><path fill="#3a414a" d="M59-47c-2 24 18 29 38 22v24C64 9 27 4 27-40v-127H5v-23h24l9-43h21v43h35v23H59v120" id="au"/><g id="m"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#at"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,15.987654320987653,0)" xlink:href="#af"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,28.333333333333332,0)" xlink:href="#aj"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,40.67901234567901,0)" xlink:href="#au"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,46.851851851851855,0)" xlink:href="#an"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,59.19753086419753,0)" xlink:href="#ag"/></g><path fill="#3a414a" d="M30-248c87 1 191-15 191 75 0 78-77 80-158 76V0H30v-248zm33 125c57 0 124 11 124-50 0-59-68-47-124-48v98" id="av"/><path fill="#3a414a" d="M210-169c-67 3-38 105-44 169h-31v-121c0-29-5-50-35-48C34-165 62-65 56 0H25l-1-190h30c1 10-1 24 2 32 10-44 99-50 107 0 11-21 27-35 58-36 85-2 47 119 55 194h-31v-121c0-29-5-49-35-48" id="aw"/><path fill="#3a414a" d="M106-169C34-169 62-67 57 0H25v-261h32l-1 103c12-21 28-36 61-36 89 0 53 116 60 194h-32v-121c2-32-8-49-39-48" id="ax"/><path fill="#3a414a" d="M135-143c-3-34-86-38-87 0 15 53 115 12 119 90S17 21 10-45l28-5c4 36 97 45 98 0-10-56-113-15-118-90-4-57 82-63 122-42 12 7 21 19 24 35" id="ay"/><g id="n"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#av"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,14.814814814814813,0)" xlink:href="#ag"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,22.160493827160494,0)" xlink:href="#af"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,34.50617283950617,0)" xlink:href="#aw"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,52.96296296296296,0)" xlink:href="#an"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,65.30864197530865,0)" xlink:href="#au"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,71.48148148148148,0)" xlink:href="#ax"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,83.82716049382717,0)" xlink:href="#an"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,96.17283950617285,0)" xlink:href="#aj"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,108.51851851851853,0)" xlink:href="#ay"/></g><path fill="#3a414a" d="M185-189c-5-48-123-54-124 2 14 75 158 14 163 119 3 78-121 87-175 55-17-10-28-26-33-46l33-7c5 56 141 63 141-1 0-78-155-14-162-118-5-82 145-84 179-34 5 7 8 16 11 25" id="az"/><path fill="#3a414a" d="M96-169c-40 0-48 33-48 73s9 75 48 75c24 0 41-14 43-38l32 2c-6 37-31 61-74 61-59 0-76-41-82-99-10-93 101-131 147-64 4 7 5 14 7 22l-32 3c-4-21-16-35-41-35" id="aA"/><path fill="#3a414a" d="M115-194c55 1 70 41 70 98S169 2 115 4C84 4 66-9 55-30l1 105H24l-1-265h31l2 30c10-21 28-34 59-34zm-8 174c40 0 45-34 45-75s-6-73-45-74c-42 0-51 32-51 76 0 43 10 73 51 73" id="aB"/><g id="o"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#az"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,14.814814814814813,0)" xlink:href="#aA"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,25.925925925925924,0)" xlink:href="#ag"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,33.2716049382716,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,45.61728395061728,0)" xlink:href="#aB"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,57.962962962962955,0)" xlink:href="#aB"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,70.30864197530863,0)" xlink:href="#an"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,82.65432098765432,0)" xlink:href="#ag"/></g><path fill="#333" d="M169-182c-1-43-94-46-97-3 18 66 151 10 154 114 3 95-165 93-204 36-6-8-10-19-12-30l50-8c3 46 112 56 116 5-17-69-150-10-154-114-4-87 153-88 188-35 5 8 8 18 10 28" id="aC"/><path fill="#333" d="M115-3C79 11 28 4 28-45v-112H4v-33h27l15-45h31v45h36v33H77v99c-1 23 16 31 38 25v30" id="aD"/><path fill="#333" d="M133-34C117-15 103 5 69 4 32 3 11-16 11-54c-1-60 55-63 116-61 1-26-3-47-28-47-18 1-26 9-28 27l-52-2c7-38 36-58 82-57s74 22 75 68l1 82c-1 14 12 18 25 15v27c-30 8-71 5-69-32zm-48 3c29 0 43-24 42-57-32 0-66-3-65 30 0 17 8 27 23 27" id="aE"/><path fill="#333" d="M25-224v-37h50v37H25zM25 0v-190h50V0H25" id="aF"/><path fill="#333" d="M190-63c-7 42-38 67-86 67-59 0-84-38-90-98-12-110 154-137 174-36l-49 2c-2-19-15-32-35-32-30 0-35 28-38 64-6 74 65 87 74 30" id="aG"/><g id="p"><use transform="matrix(0.04938271604938272,0,0,0.04938271604938272,0,0)" xlink:href="#aC"/><use transform="matrix(0.04938271604938272,0,0,0.04938271604938272,11.851851851851853,0)" xlink:href="#aD"/><use transform="matrix(0.04938271604938272,0,0,0.04938271604938272,17.728395061728396,0)" xlink:href="#aE"/><use transform="matrix(0.04938271604938272,0,0,0.04938271604938272,27.60493827160494,0)" xlink:href="#aD"/><use transform="matrix(0.04938271604938272,0,0,0.04938271604938272,33.48148148148148,0)" xlink:href="#aF"/><use transform="matrix(0.04938271604938272,0,0,0.04938271604938272,38.41975308641975,0)" xlink:href="#aG"/></g><path fill="#333" d="M24 0v-248h52V0H24" id="aH"/><path fill="#333" d="M24-248c93 1 206-16 204 79-1 75-69 88-152 82V0H24v-248zm52 121c47 0 100 7 100-41 0-47-54-39-100-39v80" id="aI"/><g id="q"><use transform="matrix(0.04938271604938272,0,0,0.04938271604938272,0,0)" xlink:href="#aH"/><use transform="matrix(0.04938271604938272,0,0,0.04938271604938272,4.938271604938272,0)" xlink:href="#aI"/></g><pattern id="r" patternUnits="userSpaceOnUse" x="1520" y="480" width="164" height="164"><use xlink:href="#aJ" transform="translate(0, 0) scale(164,164)"/></pattern><path fill="#3a414a" d="M117-194c89-4 53 116 60 194h-32v-121c0-31-8-49-39-48C34-167 62-67 57 0H25l-1-190h30c1 10-1 24 2 32 11-22 29-35 61-36" id="aK"/><path fill="#3a414a" d="M177-190C167-65 218 103 67 71c-23-6-38-20-44-43l32-5c15 47 100 32 89-28v-30C133-14 115 1 83 1 29 1 15-40 15-95c0-56 16-97 71-98 29-1 48 16 59 35 1-10 0-23 2-32h30zM94-22c36 0 50-32 50-73 0-42-14-75-50-75-39 0-46 34-46 75s6 73 46 73" id="aL"/><path fill="#3a414a" d="M101-234c-31-9-42 10-38 44h38v23H63V0H32v-167H5v-23h27c-7-52 17-82 69-68v24" id="aM"/><g id="s"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#aK"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,12.345679012345679,0)" xlink:href="#an"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,24.691358024691358,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,37.03703703703704,0)" xlink:href="#ag"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,44.382716049382715,0)" xlink:href="#am"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,49.25925925925926,0)" xlink:href="#aK"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,61.60493827160494,0)" xlink:href="#aA"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,72.71604938271605,0)" xlink:href="#Y"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,78.88888888888889,0)" xlink:href="#aL"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,91.23456790123457,0)" xlink:href="#ag"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,98.58024691358025,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,110.92592592592594,0)" xlink:href="#aM"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,117.09876543209877,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,129.44444444444446,0)" xlink:href="#aK"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,141.79012345679013,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,154.1358024691358,0)" xlink:href="#Y"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,160.30864197530863,0)" xlink:href="#aK"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,172.6543209876543,0)" xlink:href="#an"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,184.99999999999997,0)" xlink:href="#au"/></g><g id="t"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#aK"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,12.345679012345679,0)" xlink:href="#an"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,24.691358024691358,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,37.03703703703704,0)" xlink:href="#ag"/></g><g id="u"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#aw"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,18.456790123456788,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,30.80246913580247,0)" xlink:href="#am"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,35.67901234567901,0)" xlink:href="#aK"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,48.02469135802469,0)" xlink:href="#aK"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,60.37037037037037,0)" xlink:href="#an"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,72.71604938271605,0)" xlink:href="#au"/></g><path fill="#3a414a" d="M108 0H70L1-190h34L89-25l56-165h34" id="aN"/><g id="v"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#aN"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,11.11111111111111,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,23.45679012345679,0)" xlink:href="#ai"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,28.333333333333336,0)" xlink:href="#am"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,33.20987654320988,0)" xlink:href="#ak"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,45.55555555555556,0)" xlink:href="#ap"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,57.901234567901234,0)" xlink:href="#au"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,64.07407407407408,0)" xlink:href="#af"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,76.41975308641976,0)" xlink:href="#ag"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,83.76543209876544,0)" xlink:href="#ay"/></g><path fill="#3a414a" d="M80-196l47-18 7 23-49 13 32 44-20 13-27-46-27 45-21-12 33-44-49-13 8-23 47 19-2-53h23" id="aO"/><path fill="#3a414a" d="M33-154v-36h34v36H33zM33 0v-36h34V0H33" id="aP"/><g id="w"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#aO"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,8.641975308641975,0)" xlink:href="#aP"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,14.814814814814813,0)" xlink:href="#W"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,27.160493827160494,0)" xlink:href="#aa"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,39.50617283950617,0)" xlink:href="#W"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,51.85185185185185,0)" xlink:href="#aa"/></g><g id="x"><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,0,0)" xlink:href="#aP"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,6.172839506172839,0)" xlink:href="#ab"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,18.51851851851852,0)" xlink:href="#ab"/><use transform="matrix(0.06172839506172839,0,0,0.06172839506172839,30.864197530864196,0)" xlink:href="#W"/></g></defs></g></svg>
'''
'''--- website/static/img/near_logo.svg ---
<svg height="20" viewBox="0 0 76 20" width="76" xmlns="http://www.w3.org/2000/svg" fill="#262626">
	<path d="m38.0449 4.17778v11.66662c0 .0889-.0666.1778-.1777.1778h-1.2223c-.5555 0-1.0888-.2889-1.4-.7555l-5.5111-8.51114.1778 4.24444v4.8667c0 .0889-.0667.1777-.1778.1777h-1.6c-.0889 0-.1777-.0666-.1777-.1777v-11.68892c0-.08889.0666-.17778.1777-.17778h1.2c.5556 0 1.0889.28889 1.4.75556l5.5111 8.48884-.1777-4.2444v-4.82222c0-.08889.0666-.17778.1777-.17778h1.6c.1334 0 .2.06667.2.17778z"></path>
	<path d="m54.444 16h-1.6889c-.1111 0-.2-.1111-.1555-.2222l4.4889-11.62224c.0444-.08889.1333-.15556.2222-.15556h2.1333c.1111 0 .2.06667.2223.15556l4.5111 11.62224c.0444.1111-.0445.2222-.1556.2222h-1.6889c-.0666 0-.1333-.0444-.1555-.1111l-3.6223-9.55557c-.0444-.13333-.2666-.13333-.3111 0l-3.6222 9.55557c-.0444.0667-.1111.1111-.1778.1111z"></path>
	<path d="m75.9557 15.7333-3.3778-4.3111c1.9111-.3555 3.0222-1.64442 3.0222-3.6222 0-2.26667-1.4667-3.8-4.0889-3.8h-4.7111c-.1333 0-.2444.11111-.2444.24444 0 .88889.7111 1.6 1.6 1.6h3.1777c1.5778 0 2.3334.8 2.3334 1.97778s-.7334 1.97778-2.3334 1.97778h-4.4889c-.1333 0-.2444.11111-.2444.2444v5.7778c0 .0889.0667.1778.1778.1778h1.6c.0889 0 .1778-.0667.1778-.1778v-4.2889h1.8444l2.9333 3.8223c.3111.4222.8.6444 1.3334.6444h1.2222c.0889 0 .1555-.1556.0667-.2667z"></path>
	<path d="m49.3776 4h-7.4444c-.1334 0-.2223.08889-.2223.22222 0 .88889.7334 1.62222 1.6223 1.62222h6.0444c.0889 0 .1778-.06666.1778-.17777v-1.51111c-.0222-.08889-.0889-.15556-.1778-.15556zm0 10.1556h-5.5555c-.0889 0-.1778-.0667-.1778-.1778v-3c0-.0889.0666-.1778.1778-.1778h5.1333c.0889 0 .1778-.0667.1778-.1778v-1.51109c0-.08889-.0667-.17778-.1778-.17778h-7c-.1333 0-.2445.11111-.2445.24445v6.55552c0 .1334.1112.2445.2445.2445h7.4222c.0889 0 .1778-.0667.1778-.1778v-1.5111c-.0222-.0667-.0889-.1333-.1778-.1333z"></path>
	<path d="m16.0444 1.02222-4.1777 6.2c-.2889.42222.2666.93334.6666.57778l4.1111-3.57778c.1112-.08889.2667-.02222.2667.13334v11.17774c0 .1556-.2.2223-.2889.1111l-12.44442-14.888844c-.4-.488889-.97778-.755556-1.62222-.755556h-.44445c-1.155554 0-2.11111.955556-2.11111 2.13333v15.73337c0 1.1777.955556 2.1333 2.13333 2.1333.73334 0 1.42223-.3778 1.82223-1.0222l4.17777-6.2c.28889-.4222-.26666-.9334-.66666-.5778l-4.11111 3.5556c-.11112.0888-.26667.0222-.26667-.1334v-11.15553c0-.15556.2-.22223.28889-.11111l12.44442 14.88884c.4.4889 1 .7556 1.6222.7556h.4445c1.1778 0 2.1333-.9556 2.1333-2.1333v-15.73337c-.0222-1.177774-.9778-2.13333-2.1555-2.13333-.7334 0-1.4223.377778-1.8223 1.02222z"></path>
</svg>
'''
'''--- website/static/js/hotjar.js ---
// Hotjar Tracking Code for https://near-nodes.io
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2867520,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');

'''