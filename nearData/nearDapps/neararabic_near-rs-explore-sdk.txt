*GitHub Repository "neararabic/near-rs-explore-sdk"*

'''--- Cargo.toml ---
[package]
name = "near-rust-sdk-exploration"
version = "0.1.0"
authors = ["Mohammed Hassan <mhassanist@testnear.net>"]
edition = "2018"

[lib]
crate-type = ["cdylib", "rlib"]

[dependencies]
near-sdk = "3.1.0"

[profile.release]
codegen-units = 1
# Tell `rustc` to optimize for small code size.
opt-level = "z"
lto = true
debug = false
panic = "abort"
# Opt into extra safety checks on arithmetic operations https://stackoverflow.com/a/64136471/249801
overflow-checks = true
'''
'''--- README.md ---
# تجربة بعض خصائص مكتبات التطوير NEAR Rust SDk Exploration

## لتشغيل المشروع

يحتاج المشروع لتثبيت أدوات التطوير الخاصة بلغة رست و ويب أسمبلي rust and web assembly tool chain
يمكن اتباع خطوات تثبيتهم هنــاhttps://www.near-sdk.io/

1- قم بنسخ المشروع لجهازك clone

2- من داخل مجلد المشروع فى شاشة الأوامر terminal قم بكتابة الأمر التالي

```
env 'RUSTFLAGS=-C link-arg=-s' cargo build --target wasm32-unknown-unknown --release
```

- ملحوظة: الجزء `env 'RUSTFLAGS=-C link-arg=-s'` يقوم بعمل تحسين لعملية تحويل الكود و يؤثر جذرياً على حجم الملف الناتج و بالتالى تكلفة رفع الملف و استضافته على البلوك تشين. إذا كان الملف الناتج من العملية السابقة أكبر من 200 كيلو بايت لديك (14 ميجا بايت مثلاً أو أكثر) فهذا يعنى أن الأمر لم يعمل بشكل صحيح و يجب عليك فحص إعدادات رست و تفعيله.

3- ستلاحظ وجود ملفات جديدة تم انشائها داخل مجلد target و منها الملف `near-rust-sdk-exploration.wasm`

4- يمكنك رفع هذا الملف مباشرة على البلوك تشين بالطرق المعتادة مثل

```
 near dev-deploy .\target\wasm32-unknown-unknown\release\near-rust-sdk-exploration.wasm
```

5- يمكنك التجربة باستدعاء الدوال 

```
near view CONTRACT_ACCOUNT_ID get_message
```

```
near call CONTRACT_ACCOUNT_ID set_message '{"msg":"My Message"}' --accountId CALLER_ACCOUNT_ID
```

```
near view CONTRACT_ACCOUNT_ID get_message
```

```
near call CONTRACT_ACCOUNT_ID get_balance --accountId CALLER_ACCOUNT_ID
```

'''
'''--- rustfmt.toml ---
tab_spaces = 2

'''
'''--- src/lib.rs ---
//نحتاج استيراد التالي حتى يمكن لبيئة العمل ترجمة السطور التالية و تحويلها لكود يعمل على البلوك تشين
use near_sdk::borsh::{self, BorshDeserialize, BorshSerialize};
use near_sdk::{env, near_bindgen};

near_sdk::setup_alloc!();

#[near_bindgen]
#[derive(Default, BorshDeserialize, BorshSerialize)]
pub struct Contract {
  message: String,
}
//#[near_bindgen]
//ماكرو حتى يمكن لبيئة العمل ترجمة الكود التالي الى كود يعمل على البلوك تشين
#[near_bindgen]
impl Contract {
  //دالة لتغيير قيمة المتغير
  //message
  pub fn set_message(&mut self, msg: String) -> String {
    self.message = msg;
    return "updated".to_string();
  }

  //دالة لإرجاع قيمة المتغير
  //message
  pub fn get_message(&self) -> String {
    return self.message.to_string();
  }

  //دالة لفحص رصيد ههذا الحساب الموجود عليه الكود
  //ملحوظة: تحتاج
  //call
  // و ليس view
  pub fn get_balance() -> u128 {
    //env
    //مثل
    //Context
    //فى الأسمبلي سكريبت
    //و هو وسيلتنا للوصول الى معلومات من البلوك تشين نفسه
    //مثل أرصدة الحسابات وقيم الأموال المرسلة مع الاستعدعاءات و خلافه
    return env::account_balance();
  }
}

'''